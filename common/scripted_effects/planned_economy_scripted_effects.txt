planned_economy_set_up = {
	set_variable = { planned_economy_minimum_goods = 0.3 }
	set_variable = { war_support_goods_modifier = has_war_support }
	if = {
		limit = {
			has_war = yes
			has_war_support > 0.5
		}
		set_variable = { war_support_goods_modifier = has_war_support }
		multiply_variable = { war_support_goods_modifier = 0.2 }
		subtract_from_variable = { planned_economy_minimum_goods = war_support_goods_modifier }
	}
	set_variable = { planned_economy_political_power = modifier@consumer_goods_factor }
	subtract_from_variable = { planned_economy_political_power = planned_economy_minimum_goods }
	multiply_variable = { planned_economy_political_power = 2 }
	set_variable = { planned_economy_party_popularity = modifier@consumer_goods_factor }
	subtract_from_variable = { planned_economy_party_popularity = planned_economy_minimum_goods }
	if = {
		limit = { NOT = { has_dynamic_modifier = { modifier = planned_economy_modifier } } }
		add_dynamic_modifier = { modifier = planned_economy_modifier }
	}
}

planned_economy_update = {
	set_variable = { planned_economy_minimum_goods = 0.3 }
	set_variable = { war_support_goods_modifier = has_war_support }
	if = {
		limit = {
			has_war = yes
			has_war_support > 0.5
		}
		set_variable = { war_support_goods_modifier = has_war_support }
		multiply_variable = { war_support_goods_modifier = 0.2 }
		subtract_from_variable = { planned_economy_minimum_goods = war_support_goods_modifier }
	}
	set_variable = { planned_economy_political_power = modifier@consumer_goods_factor }
	subtract_from_variable = { planned_economy_political_power = planned_economy_minimum_goods }
	multiply_variable = { planned_economy_political_power = 2 }
	set_variable = { planned_economy_party_popularity = modifier@consumer_goods_factor }
	subtract_from_variable = { planned_economy_party_popularity = planned_economy_minimum_goods }
}


planned_economy_remove = {
	if = {
		limit = { has_dynamic_modifier = { modifier = planned_economy_modifier } }
		remove_dynamic_modifier = { modifier = planned_economy_modifier }
	}
}
