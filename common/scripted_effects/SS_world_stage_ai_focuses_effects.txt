#### this handles related actions that usually be triggered by focuses, but for tags that no longer exists
#### (i.e.: if REI is annexed early on, World War Two should still start)
####
#### The first few REI focuses used an older system that did not allow for effects by off-map countries.

#### NOTE: I used global flags to check each focus completed (if the TAG disappear I wanted to make sure I could check it). The focus trees must themselves add these same flags on World-Stage related focus and their prerequisites. In hindsight, for paths that are completely linear, this may not be needed.

	# REI - GERMANY {
world_stage_ai_germany_focus = {
	if = { limit = { date > 1936.01.10 NOT = { has_global_flag = REI_luds_manifesto_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_luds_manifesto"
			complete_national_focus = REI_luds_manifesto
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_luds_manifesto_completed
	}
	# next 3 are all mutually exclusive focuses, thus the long trigger. they are possibly redundant, but I'll add them just in case...
	if = { limit = { date > 1936.06.1 NOT = { has_global_flag = REI_nazi_and_emperor_completed has_global_flag = REI_general_staff_completed has_global_flag = REI_cthule_putsch_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_nazi_and_emperor"
			complete_national_focus = REI_nazi_and_emperor
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_nazi_and_emperor_completed
	}
	if = { limit = { date > 1936.06.1 NOT = { has_global_flag = REI_nazi_and_emperor_completed has_global_flag = REI_general_staff_completed has_global_flag = REI_cthule_putsch_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_general_staff"
			complete_national_focus = REI_general_staff
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_general_staff_completed
	}
	if = { limit = { date > 1936.06.1 NOT = { has_global_flag = REI_nazi_and_emperor_completed has_global_flag = REI_general_staff_completed has_global_flag = REI_cthule_putsch_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_cthule_putsch"
			complete_national_focus = REI_cthule_putsch
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_cthule_putsch_completed
	}
	# next 6 are three sets of two mutually exclusive focuses
	if = { limit = { date > 1936.08.15 NOT = { has_global_flag = REI_kaiser_august_completed has_global_flag = REI_new_reich_completed } has_global_flag = REI_nazi_and_emperor_completed 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_kaiser_august"
			complete_national_focus = REI_kaiser_august
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_kaiser_august_completed
	}
	if = { limit = { date > 1936.08.15 NOT = { has_global_flag = REI_kaiser_august_completed has_global_flag = REI_new_reich_completed } has_global_flag = REI_nazi_and_emperor_completed 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_new_reich"
			complete_national_focus = REI_new_reich
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_new_reich_complete
	}
	if = { limit = { date > 1936.08.15 NOT = { has_global_flag = REI_fascist_cabinet_completed has_global_flag = REI_military_dictatorship_completed } has_global_flag = REI_general_staff_completed 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_fascist_cabinet"
			complete_national_focus = REI_fascist_cabinet
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_fascist_cabinet_completed
	}
	if = { limit = { date > 1936.08.15 NOT = { has_global_flag = REI_fascist_cabinet_completed has_global_flag = REI_military_dictatorship_completed } has_global_flag = REI_general_staff_completed 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_military_dictatorship"
			complete_national_focus = REI_military_dictatorship
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_military_dictatorship_completed
	}
	if = { limit = { date > 1936.08.15 NOT = { has_global_flag = REI_saint_lud_completed has_global_flag = REI_paganphiles_completed } has_global_flag = REI_cthule_putsch_completed 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_saint_lud"
			complete_national_focus = REI_saint_lud
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_saint_lud_completed
	}
	if = { limit = { date > 1936.08.15 NOT = { has_global_flag = REI_saint_lud_completed has_global_flag = REI_paganphiles_completed } has_global_flag = REI_cthule_putsch_completed 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_paganphiles"
			complete_national_focus = REI_paganphiles
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_paganphiles_completed
	}
	# back to regular triggers
	if = { limit = { date > 1936.06.06 NOT = { has_global_flag = REI_help_spain_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } has_global_flag = world_stage_theater_spanish_cw_is_active } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_help_spain"
			complete_national_focus = REI_help_spain
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_help_spain_completed
	}
	if = { limit = { date > 1936.06.06 NOT = { has_global_flag = REI_denounce_versailles_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_denounce_versailles"
			complete_national_focus = REI_denounce_versailles
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_denounce_versailles_completed
	}
	if = { limit = { date > 1936.08.10 NOT = { has_global_flag = REI_long_knives_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_long_knives"
			complete_national_focus = REI_long_knives
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_long_knives_completed
	}
	if = { limit = { date > 1938.03.12 NOT = { has_global_flag = REI_anschluss_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_anschluss"
			complete_national_focus = REI_anschluss clr_global_flag = world_stage_austria_exists
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_anschluss_completed
	}
	if = { limit = { date > 1938.08.22 NOT = { has_global_flag = REI_molotov_ribbentrop_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }	# it happens one year early ww2 starts on schedule
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_molotot_ribbentrop"
			complete_national_focus = REI_molotov_ribbentrop
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_molotov_ribbentrop_completed
	}
	if = { limit = { date > 1938.10.01 NOT = { has_global_flag = REI_sudetenland_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_sudetenland"
			complete_national_focus = REI_sudetenland
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_sudetenland_completed
	}
	if = { limit = { date > 1936.08.06 NOT = { has_global_flag = REI_west_ost_wall_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_west_ost_wall"
			complete_national_focus = REI_west_ost_wall
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_west_ost_wall_completed
	}
	if = { limit = { date > 1936.10.16 NOT = { has_global_flag = REI_army_tech_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_army_tech"
			complete_national_focus = REI_army_tech
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_army_tech_completed
	}
	if = { limit = { date > 1936.12.16 NOT = { has_global_flag = REI_air_tech_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_air_tech"
			complete_national_focus = REI_air_tech
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_air_tech_completed
	}
	# the next few have an extra check: civilian development either is done pre-ww2 or waits for invasion of poland
	if = { limit = { date > 1936.10.16 NOT = { has_global_flag = REI_home_construction_completed } if = { limit = { date > 1939.6.1 } has_global_flag = REI_attack_poland_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_home_construction"
			complete_national_focus = REI_home_construction
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_home_construction_completed
	}
	if = { limit = { date > 1936.12.16 NOT = { has_global_flag = REI_home_industry_completed } if = { limit = { date > 1939.6.1 } has_global_flag = REI_attack_poland_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_home_industry"
			complete_national_focus = REI_home_industry
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_home_industry_completed
	}
	if = { limit = { date > 1936.12.16 NOT = { has_global_flag = REI_home_infrastructure_completed } if = { limit = { date > 1939.6.1 } has_global_flag = REI_attack_poland_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_home_infrastructure"
			complete_national_focus = REI_home_infrastructure
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_home_infrastructure_completed
	}
	if = { limit = { date > 1936.12.26 NOT = { has_global_flag = REI_reichskommissariats_completed } if = { limit = { date > 1939.6.1 } has_global_flag = REI_attack_poland_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_reichskommissariats"
			complete_national_focus = REI_reichskommissariats
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_reichskommissariats_completed
	}
	if = { limit = { date > 1937.3.5 NOT = { has_global_flag = REI_synthetic_resources_completed } if = { limit = { date > 1939.6.1 } has_global_flag = REI_attack_poland_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_synthetic_resources"
			complete_national_focus = REI_synthetic_resources
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_synthetic_resources_completed
	}
	if = { limit = { date > 1937.5.15 NOT = { has_global_flag = REI_volkswagen_completed } if = { limit = { date > 1939.6.1 } has_global_flag = REI_attack_poland_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_volkswagen"
			complete_national_focus = REI_volkswagen
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_volkswagen_completed
	}
	# back to regular triggers
	if = { limit = { date > 1939.08.31 NOT = { has_global_flag = REI_attack_poland_completed } has_global_flag = REI_army_tech_completed has_global_flag = REI_sudetenland_completed 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_attack_poland"
			complete_national_focus = REI_attack_poland
		}
		set_global_flag = offmap_event_worldstage_55
		if = {
			limit = { has_global_flag = GER_SOV_pact_enabled }
			set_global_flag = offmap_event_worldstage_16
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_attack_poland_completed
	}
	# next two are special cases for delayed events after WW2 starts, they also do not need to check for AI cooldown
	if = { limit = { has_global_flag = { flag = offmap_event_worldstage_55 days > 1 } } 
		every_possible_country = { limit = { tag = REI } news_event = { id = worldstage.55 } clr_global_flag = offmap_event_worldstage_55 }
	}
	if = { limit = { has_global_flag = { flag = offmap_event_worldstage_16 days > 12 } } 
		every_possible_country = { limit = { tag = REI } news_event = { id = worldstage.16 }clr_global_flag = offmap_event_worldstage_16 }
	}
	# next one does not need special triggers
	if = { limit = { date > 1940.3.24 NOT = { has_global_flag = REI_case_yellow_completed_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_case_yellow_completed"
			complete_national_focus = REI_case_yellow_completed
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_case_yellow_completed_completed
	}
	# next ones depend on Germany having undeployed strength and WW2 being ongoing, along specific triggers
	if = { limit = {	# complete focus Blitzkrieg
			date > 1940.5.9 NOT = { has_global_flag = REI_blitzkrieg_completed }																									# regular triggers
			has_global_flag = world_stage_world_war_2_is_active																														# ww2 is active
			101 = { check_variable = { world_stage_power > 120 } } 8 = { check_variable = { theater_owner_coalition = 1 } } 3 = { NOT = { has_state_flag = theater_is_active } }	# specific triggers
			#has_global_flag = { flag = world_stage_phoney_war_rages_on days < 110 }	
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
			# more specific triggers
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_blitzkrieg"
			complete_national_focus = REI_blitzkrieg
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_blitzkrieg_completed
	}
	if = { limit = {	# bypass focus Blitzkrieg
			date > 1940.5.9 NOT = { has_global_flag = REI_blitzkrieg_completed }														# regular triggers
			has_global_flag = world_stage_world_war_2_is_active																			# ww2 is active
			OR = { 8 = { check_variable = { theater_owner_coalition = 3 } } NOT = { has_global_flag = world_stage_france_exists } }		# specific triggers
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_blitzkrieg"
			unlock_national_focus = REI_blitzkrieg
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_blitzkrieg_completed
	}
	if = { limit = {
			date > 1941.5.10 NOT = { has_global_flag = REI_afrikakorps_completed }																						# regular triggers
			has_global_flag = world_stage_world_war_2_is_active																											# ww2 is active
			101 = { check_variable = { world_stage_power > 30 } } OR = { 14 = { has_state_flag = theater_is_active } 15 = { has_state_flag = theater_is_active } }		# specific triggers
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_afrikakorps"
			complete_national_focus = REI_afrikakorps
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_afrikakorps_completed
	}
	if = { limit = {
			date > 1942.1.1 NOT = { has_global_flag = REI_atlantikwall_completed }												# regular triggers
			has_global_flag = world_stage_world_war_2_is_active																	# ww2 is active
			8 = { NOT = { has_state_flag = theater_is_active } } 8 = { check_variable = { theater_owner_coalition = 3 } }		# specific triggers
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_atlantikwall"
			complete_national_focus = REI_atlantikwall
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_atlantikwall_completed
	}
	if = { limit = {
			date > 1942.1.1 NOT = { has_global_flag = REI_sea_lion_completed }													# regular triggers
			has_global_flag = world_stage_world_war_2_is_active																	# ww2 is active
			30 = { check_variable = { theater_owner_coalition = 1 } } 8 = { check_variable = { theater_owner_coalition = 3 } }	# specific triggers
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_sea_lion"
			complete_national_focus = REI_sea_lion
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_sea_lion_completed
	}
	if = { limit = { date > 1940.12.24 NOT = { has_global_flag = REI_lossberg_halder_plans_completed } 101 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_lossberg_halder_plans"
			complete_national_focus = REI_lossberg_halder_plans
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_lossberg_halder_plans_completed
	}
	if = { limit = {
			NOT = { has_global_flag = REI_help_italy_completed } has_global_flag = GENERIC_operaion_husky_completed	# we don't have to check historical date here since it always comes after Husky focuses, which check their own dates
			has_global_flag = world_stage_world_war_2_is_active
			NOT = { has_global_flag = world_stage_italy_capitulated } 101 = { check_variable = { world_stage_power > 29 } }
			OR = { 23 = { has_state_flag = theater_is_active } 24 = { has_state_flag = theater_is_active } 25 = { has_state_flag = theater_is_active } }
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_help_italy"
			complete_national_focus = REI_help_italy
		}	
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_help_italy_completed	# note: AI will not complete the help_vichy focus off map
	}
	if = { limit = {
			date > 1941.06.21 NOT = { has_global_flag = REI_barbarossa_completed }											# regular triggers
			has_global_flag = world_stage_world_war_2_is_active																# ww2 is active
			101 = { check_variable = { world_stage_power > 89 } }															# specific triggers
			3 = { check_variable = { theater_owner_coalition = 3 } }
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_barbarossa"
			complete_national_focus = REI_barbarossa
		}
		set_temp_variable = { chance_success = 200 } 101 = { multiply_temp_variable = { chance_success = doctrine_bonus_land } multiply_temp_variable = { chance_success = doctrine_bonus_air } } clamp_temp_variable = { var = chance_success min = 1 }
		set_temp_variable = { chance_failure = 100 } 104 = { multiply_temp_variable = { chance_failure = doctrine_bonus_land } multiply_temp_variable = { chance_failure = doctrine_bonus_air } } clamp_temp_variable = { var = chance_failure min = 1 }
		if = { limit = { 122 = { check_variable = { world_stage_coalition = 3 } } } add_to_temp_variable = { chance_success = 200 } }
		random_list = {
			var:chance_success = { news_event = { id = worldstage.37 days = 14 random = 7 } }
			var:chance_failure = { news_event = { id = worldstage.38 days = 14 random = 7 } }
		}
		set_global_flag = offmap_event_worldstage_55
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_barbarossa_completed
	}
	# next two are special cases for delayed events after Barbarosa starts, they also do not need to check for AI cooldown
	if = { limit = { has_global_flag = { flag = offmap_event_worldstage_37 days > 18 } } 
		every_possible_country = { limit = { tag = REI } news_event = { id = worldstage.37 } clr_global_flag = offmap_event_worldstage_37 }
	}
	if = { limit = { has_global_flag = { flag = offmap_event_worldstage_38 days > 18 } } 
		every_possible_country = { limit = { tag = REI } news_event = { id = worldstage.38 } clr_global_flag = offmap_event_worldstage_38 }
	}
	if = { limit = {
			date > 1941.09.30 NOT = { has_global_flag = REI_thrust_to_moscow_completed }
			OR = { 10 = { has_state_flag = theater_is_active } 11 = { has_state_flag = theater_is_active } }
			NOT = { 11 = { check_variable = { theater_owner_coalition = 3 } } }
			101 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = REI } log = "(off-map AI) [THIS.GetName] completed focus REI_thrust_to_moscow"
			complete_national_focus = REI_thrust_to_moscow
		}
		clr_global_flag = world_stage_ai_germany_focus set_global_flag = world_stage_ai_germany_focus set_global_flag = REI_thrust_to_moscow_completed
	}
}

	# } OSA - GREAT BRITAIN {
world_stage_ai_england_focus = {
	if = { limit = { date > 1939.10.1 NOT = { has_global_flag = OSA_GENERIC_interventionism_focus_western_completed } 102 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = OSA } log = "(off-map AI) [THIS.GetName] completed focus OSA_GENERIC_interventionism_focus_western_completed"
			complete_national_focus = interventionism_focus_western
		}
		clr_global_flag = world_stage_ai_england_focus set_global_flag = world_stage_ai_england_focus set_global_flag = OSA_GENERIC_interventionism_focus_western_completed
	}
	if = { limit = { date > 1940.01.10 NOT = { has_global_flag = OSA_GENERIC_colonial_armies_completed } 102 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = OSA } log = "(off-map AI) [THIS.GetName] completed focus OSA_GENERIC_colonial_armies"
			complete_national_focus = colonial_armies
		}
		clr_global_flag = world_stage_ai_england_focus set_global_flag = world_stage_ai_england_focus set_global_flag = OSA_GENERIC_colonial_armies_completed
	}
	if = { limit = { date > 1936.01.10 NOT = { has_global_flag = OSA_operaion_husky_completed } 102 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = OSA } log = "(off-map AI) [THIS.GetName] completed focus OSA_generic_operation_husky"
			complete_national_focus = OSA_generic_operation_husky
		}
		clr_global_flag = world_stage_ai_england_focus set_global_flag = world_stage_ai_england_focus set_global_flag = OSA_operaion_husky_completed
	}
	if = { limit = { date > 1944.06.06 NOT = { has_global_flag = OSA_operaion_overlord_completed } 102 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = OSA } log = "(off-map AI) [THIS.GetName] completed focus OSA_operaion_overlord"
			complete_national_focus = OSA_generic_operation_overlord
		}
		clr_global_flag = world_stage_ai_england_focus set_global_flag = world_stage_ai_england_focus set_global_flag = OSA_operaion_overlord_completed
	}
}

	# } KOB - FRANCE {
world_stage_ai_france_focus = {
	if = { limit = { date > 1939.10.1 NOT = { has_global_flag = KOB_GENERIC_interventionism_focus_western_completed } 103 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = KOB } log = "(off-map AI) [THIS.GetName] completed focus KOB_GENERIC_interventionism_focus_western_completed"
			complete_national_focus = interventionism_focus_western
		}
		clr_global_flag = world_stage_ai_france_focus set_global_flag = world_stage_ai_france_focus set_global_flag = KOB_GENERIC_interventionism_focus_western_completed
	}
	if = { limit = { date > 1940.01.10 NOT = { has_global_flag = OSA_GENERIC_colonial_armies_completed } 103 = { NOT = { has_state_flag = metropolis_capitulated } } }
		every_possible_country = { limit = { tag = KOB } log = "(off-map AI) [THIS.GetName] completed focus KOB_GENERIC_colonial_armies"
			complete_national_focus = colonial_armies
		}
		clr_global_flag = world_stage_ai_france_focus set_global_flag = world_stage_ai_france_focus set_global_flag = KOB_GENERIC_colonial_armies_completed
	}
	if = {
		limit = {
			103 = { NOT = { has_state_flag = metropolis_capitulated } }
			has_global_flag = world_stage_world_war_2_is_active has_global_flag = world_stage_france_exists NOT = { country_exists = KOB }
			if = {
				limit = { has_global_flag = KOB_saarland_offensive_completed }	# This focus is, itself, never completed off map!
				has_global_flag = { flag = world_stage_phoney_war_rages_on days > 90 }
			} else ={ has_global_flag = { flag = world_stage_phoney_war_rages_on days > 180 } }
		}
		every_possible_country = { limit = { tag = KOB } log = "(off-map AI) [THIS.GetName]: Phoeny War ends!"
			clr_global_flag = world_stage_phoney_war_rages_on
			news_event = worldstage.21
		}
		clr_global_flag = world_stage_ai_france_focus set_global_flag = world_stage_ai_france_focus	# this is ONLY supposed to be fire if KOB does not exist (if it does, its mission about the phoney war will fire the event
	}
}

	# } FER SOVIET UNION {
world_stage_ai_sovietunion_focus = {
	
}

	# } MUS/SUS/AMC/OKI UNITED STATES {	# All American tags will most likely share the international politics branch
world_stage_ai_usa_focus = {
	if = { limit = { date > 1941.04.20 NOT = { has_global_flag = AMERICA_generic_abandon_neutrality_completed }
			105 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = AMC } log = "(off-map AI) [THIS.GetName] completed focus AMERICA_generic_abandon_neutrality"	# MUS tag does not work here, I think
			complete_national_focus = AMERICA_generic_abandon_neutrality
		}
		clr_global_flag = world_stage_ai_usa_focus set_global_flag = world_stage_ai_usa_focus set_global_flag = AMERICA_generic_abandon_neutrality_completed
	}
	if = { limit = { date > 1941.07.01 NOT = { has_global_flag = AMERICA_generic_arsenal_of_democracy_completed }
			105 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = AMC } log = "(off-map AI) [THIS.GetName] completed focus AMERICA_generic_arsenal_of_democracy"	# MUS tag does not work here, I think
			complete_national_focus = AMERICA_generic_arsenal_of_democracy
		}
		clr_global_flag = world_stage_ai_usa_focus set_global_flag = world_stage_ai_usa_focus set_global_flag = AMERICA_generic_arsenal_of_democracy_completed
	}
	if = { limit = { date > 1942.10.09 NOT = { has_global_flag = AMERICA_operation_torch_completed }
			105 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = AMC } log = "(off-map AI) [THIS.GetName] completed focus AMERICA_operation_torch"	# MUS tag does not work here, I think
			complete_national_focus = AMERICA_operation_torch
		}
		clr_global_flag = world_stage_ai_usa_focus set_global_flag = world_stage_ai_usa_focus set_global_flag = AMERICA_operation_torch_completed
	}
}

	# } ROC CHINA { # this will be moved to the 'multiple paths' group later
world_stage_ai_china_focus = {
	if = { limit = { date > 1937.06.01 NOT = { has_global_flag = ROC_temporary_provisions_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_temporary_provisions"
			complete_national_focus = ROC_temporary_provisions
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_temporary_provisions_completed
	}
	if = { limit = { date > 1937.08.10 NOT = { has_global_flag = ROC_whampoa_clique_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_whampoa_clique"
			complete_national_focus = ROC_whampoa_clique
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_whampoa_clique_completed
	}
	if = { limit = { date > 1937.10.20 NOT = { has_global_flag = ROC_rural_reconstruction_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_rural_reconstruction"
			complete_national_focus = ROC_rural_reconstruction
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_rural_reconstruction_completed
	}
	if = { limit = { date > 1938.02.01 NOT = { has_global_flag = ROC_communications_clique_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_communications_clique"
			complete_national_focus = ROC_communications_clique
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_communications_clique_completed
	}
	if = { limit = { date > 1938.04.10 NOT = { has_global_flag = ROC_beijing_railway_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_beijing_railway"
			complete_national_focus = ROC_beijing_railway
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_beijing_railway_completed
	}
	if = { limit = { date > 1938.06.20 NOT = { has_global_flag = ROC_hanyang_arsenal_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_hanyang_arsenal"
			complete_national_focus = ROC_hanyang_arsenal
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_hanyang_arsenal_completed
	}
	if = { limit = { date > 1938.09.01 NOT = { has_global_flag = ROC_camco_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_camco"
			complete_national_focus = ROC_camco
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_camco_completed
	}
	if = { limit = { date > 1938.11.10 NOT = { has_global_flag = ROC_march_on_beijing_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_march_on_beijing"
			complete_national_focus = ROC_march_on_beijing
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_march_on_beijing_completed
	}
	if = { limit = { date > 1939.04.01 NOT = { has_global_flag = ROC_accomodate_warlords_completed has_global_flag = ROC_replace_governors_completed }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_accomodate_warlords"
			complete_national_focus = ROC_accomodate_warlords
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_accomodate_warlords_completed
	}
	if = {	limit = { date > 1939.12.01 NOT = { has_global_flag = ROC_imperial_ambitions_completed }
			106 = { check_variable = { world_stage_power > 29 } }
			106 = { NOT = { check_variable = { world_stage_coalition = 1 } } }
			106 = { NOT = { check_variable = { world_stage_coalition = 5 } } }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_imperial_ambitions"
			complete_national_focus = ROC_imperial_ambitions
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_imperial_ambitions_completed
	}
	if = { limit = { date > 1940.02.10 NOT = { has_global_flag = ROC_antikominternpakt_completed }
			106 = { NOT = { check_variable = { world_stage_coalition = 3 } } }
			106 = { NOT = { check_variable = { world_stage_coalition = 1 } } }
			106 = { NOT = { check_variable = { world_stage_coalition = 5 } } }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_antikominternpakt"
			complete_national_focus = ROC_antikominternpakt
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_antikominternpakt_completed
	}
	if = { limit = { date > 1940.02.10 NOT = { has_global_flag = ROC_antikominternpakt_completed }
			106 = { NOT = { check_variable = { world_stage_coalition = 3 } } }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] bypassed focus ROC_antikominternpakt"
			unlock_national_focus = ROC_antikominternpakt
		}
		set_global_flag = ROC_antikominternpakt_completed
	}
	if = { limit = { date > 1940.04.20 NOT = { has_global_flag = ROC_militarised_society_completed } }
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_militarised_society"
			complete_national_focus = ROC_militarised_society
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_militarised_society_completed
	}
	if = {	limit = { date > 1940.12.10 NOT = { has_global_flag = ROC_denounce_treaties_completed }
			OR = { 106 = { check_variable = { world_stage_power > 29 } } has_global_flag = world_stage_world_war_2_is_active }
			106 = { NOT = { check_variable = { world_stage_coalition = 1 } } }
			106 = { NOT = { check_variable = { world_stage_coalition = 5 } } }
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_denounce_treaties"
			complete_national_focus = ROC_denounce_treaties
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_denounce_treaties_completed
	}
	if = {	limit = { date > 1941.02.10 NOT = { has_global_flag = ROC_taiwan_completed }
			106 = { check_variable = { world_stage_power > 14 } }
			105 = { NOT = { check_variable = { world_stage_coalition = 3 } } }	# USA is AXIS
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
			has_global_flag = world_stage_world_war_2_is_active
			has_global_flag = unitedstates_joined_ww2							### IF USA JOINS WW2 ON ITS OWN, CHINA INVADES TAIWAN SOONER
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_taiwan"
			complete_national_focus = ROC_taiwan
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_taiwan_completed
	}
	if = {	limit = { date > 1942.02.10 NOT = { has_global_flag = ROC_taiwan_completed }
			106 = { check_variable = { world_stage_power > 14 } }
			105 = { NOT = { check_variable = { world_stage_coalition = 3 } } }	# USA is AXIS
			106 = { NOT = { has_state_flag = metropolis_capitulated } }
			has_global_flag = world_stage_world_war_2_is_active
		}
		every_possible_country = { limit = { tag = ROC } log = "(off-map AI) [THIS.GetName] completed focus ROC_taiwan"
			complete_national_focus = ROC_taiwan
		}
		clr_global_flag = world_stage_ai_china_focus set_global_flag = world_stage_ai_china_focus set_global_flag = ROC_taiwan_completed
	}
}

# The following is for countries that can choose radically different paths in the World Stage; the code works essentially the same but the early focuses of each country set up a flag checked on SS_on_actions.txt (neutral path is always default) (example world_stage_ai_netherlands_path_allies)

	# } HIR NETHERLANDS (3 paths){
world_stage_ai_netherlands_focus_neutral = {
	
}

world_stage_ai_netherlands_focus_allies = {
	
}

world_stage_ai_netherlands_focus_axis = {
	
}

	# } PRT PORTUGAL (3 paths) {

world_stage_ai_portugal_focus_neutral = {

}

world_stage_ai_portugal_focus_allies = {

}

world_stage_ai_portugal_focus_axis = {

}
