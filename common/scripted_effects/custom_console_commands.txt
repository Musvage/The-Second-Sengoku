### OCCUPATION

d_add_compliance_to_all_states = {
	every_controlled_state = {
		limit = { NOT = { is_core_of = ROOT } }
		add_compliance = 100
		log = "[THIS.GetName]([ROOT.GetName]) add 100 compliance"
	}
}

d_add_remove_compliance_from_all_states = {
	every_controlled_state = {
		limit = { NOT = { is_core_of = ROOT } }
		add_compliance = -100
		log = "[THIS.GetName]([ROOT.GetName]) remove 100 compliance"
	}
}

### RELIGION

d_get_religion_drift = {
	get_country_religion_drift = yes
}
d_allow_cthulhu = {
	
	if = {
		limit = {
			NOT = { has_global_flag = religion_cthulhu_allowed }
		}
		set_global_flag = religion_cthulhu_allowed
	} else = {
		clr_global_flag = religion_cthulhu_allowed
	}
	
}
d_set_country_religion = {

	add_political_power = 111 
	
	find_highest_in_array = { 
		array = args 
		value = v 
		index = i
	}
	
	FROM = {
		if = {
			limit = {
				check_variable = { v = 1 }
			}
			set_variable = { country_religion = 1 }
		}
		if = {
			limit = {
				check_variable = { v = 2 }
			}
			set_variable = { country_religion = 2 }
		}
		if = {
			limit = {
				check_variable = { v = 3 }
			}
			set_variable = { country_religion = 3 }
		}
		if = {
			limit = {
				check_variable = { v = 4 }
			}
			set_variable = { country_religion = 4 }
		}
		if = {
			limit = {
				check_variable = { v = 5 }
			}
			set_variable = { country_religion = 5 }
		}
		if = {
			limit = {
				check_variable = { v = 6 }
			}
			set_variable = { country_religion = 6 }
		}
		if = {
			limit = {
				check_variable = { v = 7 }
			}
			set_variable = { country_religion = 7 }
		}
	}
}

d_set_country_religion_1 = {
	ROOT = { set_variable = { country_religion = 1 } }
}
d_set_country_religion_2 = {
	set_variable = { country_religion = 2 }
}
d_set_country_religion_3 = {
	set_variable = { country_religion = 3 }
}
d_set_country_religion_4 = {
	ROOT = { set_variable = { country_religion = 4 } }
}
d_set_country_religion_5 = {
	set_variable = { country_religion = 5 }
}
d_set_country_religion_6 = {
	set_variable = { country_religion = 6 }
}
d_set_country_religion_7 = {
	set_variable = { country_religion = 7 }
}
d_set_country_religion_buddhism = {
	set_variable = { country_religion = 1 }
}
d_set_country_religion_shinto = {
	set_variable = { country_religion = 2 }
}
d_set_country_religion_christianity = {
	set_variable = { country_religion = 3 }
}
d_set_country_religion_taoism = {
	set_variable = { country_religion = 4 }
}
d_set_country_religion_confucianism = {
	set_variable = { country_religion = 5 }
}
d_set_country_religion_secularism = {
	set_variable = { country_religion = 6 }
}
d_set_country_religion_cthulhu = {
	set_variable = { country_religion = 7 }
}

### CLANS

d_release_all_clans = {
	every_country = {
		if = { limit = { any_controlled_state = { is_core_of = DOS } NOT = { country_exists = DOS } } release_on_controlled = DOS }
		if = { limit = { any_controlled_state = { is_core_of = BUR } NOT = { country_exists = BUR } } release_on_controlled = BUR }
		if = { limit = { any_controlled_state = { is_core_of = ASO } NOT = { country_exists = ASO } } release_on_controlled = ASO }
		if = { limit = { any_controlled_state = { is_core_of = IKE } NOT = { country_exists = IKE } } release_on_controlled = IKE }
		if = { limit = { any_controlled_state = { is_core_of = TMA } NOT = { country_exists = TMA } } release_on_controlled = TMA }
		if = { limit = { any_controlled_state = { is_core_of = OIK } NOT = { country_exists = OIK } } release_on_controlled = OIK }
		if = { limit = { any_controlled_state = { is_core_of = MAT } NOT = { country_exists = MAT } } release_on_controlled = MAT }
		if = { limit = { any_controlled_state = { is_core_of = ABE } NOT = { country_exists = ABE } } release_on_controlled = ABE }
		if = { limit = { any_controlled_state = { is_core_of = NBS } NOT = { country_exists = NBS } } release_on_controlled = NBS }
		if = { limit = { any_controlled_state = { is_core_of = HOS } NOT = { country_exists = HOS } } release_on_controlled = HOS }
		if = { limit = { any_controlled_state = { is_core_of = NAI } NOT = { country_exists = NAI } } release_on_controlled = NAI }
		if = { limit = { any_controlled_state = { is_core_of = SAR } NOT = { country_exists = SAR } } release_on_controlled = SAR }
		if = { limit = { any_controlled_state = { is_core_of = KAR } NOT = { country_exists = KAR } } release_on_controlled = KAR }
		if = { limit = { any_controlled_state = { is_core_of = NAG } NOT = { country_exists = NAG } } release_on_controlled = NAG }
		if = { limit = { any_controlled_state = { is_core_of = TMK } NOT = { country_exists = TMK } } release_on_controlled = TMK }
		if = { limit = { any_controlled_state = { is_core_of = IYO } NOT = { country_exists = IYO } } release_on_controlled = IYO }
		if = { limit = { any_controlled_state = { is_core_of = IMA } NOT = { country_exists = IMA } } release_on_controlled = IMA }
		if = { limit = { any_controlled_state = { is_core_of = OKA } NOT = { country_exists = OKA } } release_on_controlled = OKA }
		if = { limit = { any_controlled_state = { is_core_of = TOU } NOT = { country_exists = TOU } } release_on_controlled = TOU }
		if = { limit = { any_controlled_state = { is_core_of = OMA } NOT = { country_exists = OMA } } release_on_controlled = OMA }
		if = { limit = { any_controlled_state = { is_core_of = MI0 } NOT = { country_exists = MI0 } } release_on_controlled = MI0 }
		if = { limit = { any_controlled_state = { is_core_of = SKI } NOT = { country_exists = SKI } } release_on_controlled = SKI }
		if = { limit = { any_controlled_state = { is_core_of = SKA } NOT = { country_exists = SKA } } release_on_controlled = SKA }
		if = { limit = { any_controlled_state = { is_core_of = OWA } NOT = { country_exists = OWA } } release_on_controlled = OWA }
		if = { limit = { any_controlled_state = { is_core_of = SE0 } NOT = { country_exists = SE0 } } release_on_controlled = SE0 }
		if = { limit = { any_controlled_state = { is_core_of = STK } NOT = { country_exists = STK } } release_on_controlled = STK }
		if = { limit = { any_controlled_state = { is_core_of = HRO } NOT = { country_exists = HRO } } release_on_controlled = HRO }
		if = { limit = { any_controlled_state = { is_core_of = MTS } NOT = { country_exists = MTS } } release_on_controlled = MTS }
		if = { limit = { any_controlled_state = { is_core_of = NAG } NOT = { country_exists = NAG } } release_on_controlled = NAG }
		if = { limit = { any_controlled_state = { is_core_of = SMZ } NOT = { country_exists = SMZ } } release_on_controlled = SMZ }
		if = { limit = { any_controlled_state = { is_core_of = RYU } NOT = { country_exists = RYU } } release_on_controlled = RYU }
		if = { limit = { any_controlled_state = { is_core_of = HOJ } NOT = { country_exists = HOJ } } release_on_controlled = HOJ }
		if = { limit = { any_controlled_state = { is_core_of = OTO } NOT = { country_exists = OTO } } release_on_controlled = OTO }
		if = { limit = { any_controlled_state = { is_core_of = MRI } NOT = { country_exists = MRI } } release_on_controlled = MRI }
		if = { limit = { any_controlled_state = { is_core_of = AMA } NOT = { country_exists = AMA } } release_on_controlled = AMA }
		if = { limit = { any_controlled_state = { is_core_of = CHO } NOT = { country_exists = CHO } } release_on_controlled = CHO }
		if = { limit = { any_controlled_state = { is_core_of = MIY } NOT = { country_exists = MIY } } release_on_controlled = MIY }
		if = { limit = { any_controlled_state = { is_core_of = AZA } NOT = { country_exists = AZA } } release_on_controlled = AZA }
		if = { limit = { any_controlled_state = { is_core_of = ASA } NOT = { country_exists = ASA } } release_on_controlled = ASA }
		if = { limit = { any_controlled_state = { is_core_of = ODA } NOT = { country_exists = ODA } } release_on_controlled = ODA }
		if = { limit = { any_controlled_state = { is_core_of = TAK } NOT = { country_exists = TAK } } release_on_controlled = TAK }
		if = { limit = { any_controlled_state = { is_core_of = UES } NOT = { country_exists = UES } } release_on_controlled = UES }
		if = { limit = { any_controlled_state = { is_core_of = SAT } NOT = { country_exists = SAT } } release_on_controlled = SAT }
		if = { limit = { any_controlled_state = { is_core_of = ASH } NOT = { country_exists = ASH } } release_on_controlled = ASH }
		if = { limit = { any_controlled_state = { is_core_of = DAT } NOT = { country_exists = DAT } } release_on_controlled = DAT }
		if = { limit = { any_controlled_state = { is_core_of = MOG } NOT = { country_exists = MOG } } release_on_controlled = MOG }
		if = { limit = { any_controlled_state = { is_core_of = NAN } NOT = { country_exists = NAN } } release_on_controlled = NAN }
	}
	every_country = {
		limit = { has_country_flag = is_clan }
		set_politics = {
			ruling_party = autocracy
		}
	}
}

d_random_ladies_all_clans = {
	every_country = {
		if = {
			limit = { is_clan = yes has_government = autocracy }
			random_character = {
				limit = { is_country_leader = yes }
				if = { limit = { has_character_flag = secondary_leader_lady_1} clr_character_flag = secondary_leader_lady_1	}
				if = { limit = { has_character_flag = secondary_leader_lady_2} clr_character_flag = secondary_leader_lady_2	}
				if = { limit = { has_character_flag = secondary_leader_lady_3} clr_character_flag = secondary_leader_lady_3	}
				if = { limit = { has_character_flag = secondary_leader_lady_4} clr_character_flag = secondary_leader_lady_4	}
				if = { limit = { has_character_flag = secondary_leader_lady_5} clr_character_flag = secondary_leader_lady_5	}
				if = { limit = { has_character_flag = secondary_leader_lady_6} clr_character_flag = secondary_leader_lady_6	}
				dual_leader_get_random_clan_lady = yes
			}
		}
	}
}