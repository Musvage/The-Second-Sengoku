world_stage_daily_effect = {	# activated from on_actions/daily from a random scope
	if = {	### MONGOLIA
		limit = { has_global_flag = world_stage_theater_mongolia_is_active }
		subtract_from_variable = { global.theater_mongolia_timer = 1 }
		set_variable = { global.CHI_strength_mongolia_final = global.CHI_strength_mongolia }
		add_to_variable = { global.CHI_strength_mongolia_final = global.CHI_strength_mongolia_bonus }
		set_variable = { global.CHI_strength_doc_air = ROC.air_doctrine_level }
		set_variable = { global.CHI_strength_doc_land = ROC.land_doctrine_level }
		multiply_variable = { global.CHI_strength_doc_air = 0.05 }
		multiply_variable = { global.CHI_strength_doc_land = 0.10 }
		set_temp_variable = { global.CHI_strength_mongolia_multiplier = 1 }
		add_to_temp_variable = { global.CHI_strength_mongolia_multiplier = global.CHI_strength_doc_air }
		add_to_temp_variable = { global.CHI_strength_mongolia_multiplier = global.CHI_strength_doc_land }
		multiply_variable = { global.CHI_strength_mongolia_final = global.CHI_strength_mongolia_multiplier }
		set_variable = { global.SOV_strength_mongolia_final = global.SOV_strength_mongolia }
		add_to_variable = { global.SOV_strength_mongolia_final = global.SOV_strength_mongolia_bonus }
		set_variable = { global.SOV_strength_doc_air = FER.air_doctrine_level }
		set_variable = { global.SOV_strength_doc_land = FER.land_doctrine_level }
		multiply_variable = { global.SOV_strength_doc_air = 0.05 }
		multiply_variable = { global.SOV_strength_doc_land = 0.10 }
		set_temp_variable = { global.SOV_strength_mongolia_multiplier = 1 }
		add_to_temp_variable = { global.SOV_strength_mongolia_multiplier = global.SOV_strength_doc_air }
		add_to_temp_variable = { global.SOV_strength_mongolia_multiplier = global.SOV_strength_doc_land }
		multiply_variable = { global.SOV_strength_mongolia_final = global.SOV_strength_mongolia_multiplier }
		world_stage_get_mongolia_timer_frame = yes
		if = {
			limit = { check_variable = { global.theater_mongolia_timer < 1 } }
			resolve_mongolian_crisis = yes
		}
	}
	if = {	### SPANISH CIVIL WAR
		limit = { has_global_flag = world_stage_theater_spanish_cw_is_active }
		subtract_from_variable = { global.theater_spanish_cw_timer = 5 }
		set_variable = { global.REP_strength_spain_final = global.REP_strength_spain }
		add_to_variable = { global.REP_strength_spain_final = global.REP_strength_spain_bonus }
		set_temp_variable = { global.REP_strength_spain_multiplier = 1 }
		multiply_variable = { global.REP_strength_spain_final = global.REP_strength_spain_multiplier }
		set_variable = { global.FAL_strength_spain_final = global.FAL_strength_spain }
		add_to_variable = { global.FAL_strength_spain_final = global.FAL_strength_spain_bonus }
		set_temp_variable = { global.FAL_strength_spain_multiplier = 1 }
		multiply_variable = { global.FAL_strength_spain_final = global.FAL_strength_spain_multiplier }
		world_stage_get_spanish_cw_timer_frame = yes
		if = {
			limit = { check_variable = { global.theater_spanish_cw_timer < 1 } }
			resolve_spanish_cw = yes
		}
	}
	if = {	### POLAND first INVASION
		limit = { has_global_flag = world_stage_theater_poland_is_active_first }
		subtract_from_variable = { global.theater_poland_timer = 1 }
		set_variable = { global.GER_strength_poland_final = global.GER_strength_poland }
		add_to_variable = { global.GER_strength_poland_final = global.GER_strength_poland_bonus }
		set_variable = { global.GER_strength_doc_air = REI.air_doctrine_level }
		set_variable = { global.GER_strength_doc_land = REI.land_doctrine_level }
		multiply_variable = { global.GER_strength_doc_air = 0.05 }
		multiply_variable = { global.GER_strength_doc_land = 0.10 }
		set_temp_variable = { global.GER_strength_poland_multiplier = 1 }
		add_to_temp_variable = { global.GER_strength_poland_multiplier = global.GER_strength_doc_air }
		add_to_temp_variable = { global.GER_strength_poland_multiplier = global.GER_strength_doc_land }
		multiply_variable = { global.GER_strength_poland_final = global.GER_strength_poland_multiplier }
		if = {
			limit = { has_global_flag = GER_SOV_pact_enabled }
			set_variable = { global.SOV_strength_poland_final = global.SOV_strength_poland }
			add_to_variable = { global.SOV_strength_poland_final = global.SOV_strength_poland_bonus }
			set_variable = { global.SOV_strength_doc_air = FER.air_doctrine_level }
			set_variable = { global.SOV_strength_doc_land = FER.land_doctrine_level }
			multiply_variable = { global.SOV_strength_doc_air = 0.05 }
			multiply_variable = { global.SOV_strength_doc_land = 0.10 }
			set_temp_variable = { global.SOV_strength_poland_multiplier = 1 }
			add_to_temp_variable = { global.SOV_strength_poland_multiplier = global.SOV_strength_doc_air }
			add_to_temp_variable = { global.SOV_strength_poland_multiplier = global.SOV_strength_doc_land }
			multiply_variable = { global.SOV_strength_poland_final = global.SOV_strength_poland_multiplier }
		}
		set_variable = { global.ENG_strength_poland_final = global.ENG_strength_poland }
		add_to_variable = { global.ENG_strength_poland_final = global.ENG_strength_poland_bonus }
		set_variable = { global.ENG_strength_doc_air = 0 } #.air_doctrine_level }	# poland will not get doctrines
		set_variable = { global.ENG_strength_doc_land = 0 } #.land_doctrine_level }		# poland will not get doctrines
		#multiply_variable = { global.ENG_strength_doc_air = 0.05 }
		#multiply_variable = { global.ENG_strength_doc_land = 0.10 }
		#set_temp_variable = { global.ENG_strength_poland_multiplier = 1 }
		#add_to_temp_variable = { global.ENG_strength_poland_multiplier = global.ENG_strength_doc_air }
		#add_to_temp_variable = { global.ENG_strength_poland_multiplier = global.ENG_strength_doc_land }
		#multiply_variable = { global.ENG_strength_poland_final = global.ENG_strength_poland_multiplier }
		world_stage_get_poland_timer_frame = yes
		if = {
			limit = { check_variable = { global.theater_poland_timer < 1 } }
			resolve_theater_poland_first = yes
		}
	}
}

### THEATER RESOLUTIONS
resolve_mongolian_crisis = {
	set_temp_variable = { side_a_attack = random }	# each side causes damage equal to [0-20]% of their final strength
	multiply_temp_variable = { side_a_attack = global.CHI_strength_mongolia_final }
	divide_temp_variable = { side_a_attack = 5 }
	clamp_temp_variable = { var = side_a_attack min = 1 max = 999 }
	set_temp_variable = { side_b_attack = random }
	clamp_temp_variable = { var = side_b_attack min = 1 max = 999 }
	multiply_temp_variable = { side_b_attack = global.SOV_strength_mongolia_final }
	divide_temp_variable = { side_b_attack = 5 }
	set_variable = { global.CHI_strength_trickleback = global.CHI_strength_mongolia }
	subtract_from_variable = { global.CHI_strength_trickleback = side_b_attack }
	set_variable = { global.SOV_strength_trickleback = global.SOV_strength_mongolia }
	subtract_from_variable = { global.SOV_strength_trickleback = side_a_attack }
	round_variable = global.CHI_strength_trickleback
	round_variable = global.SOV_strength_trickleback
	if = {
		limit = { check_variable = { global.CHI_strength_mongolia_final > global.SOV_strength_mongolia_final } }
		multiply_variable = { global.CHI_strength_mongolia_final = global.CHI_strength_mongolia_final }
	} else = { multiply_variable = { global.SOV_strength_mongolia_final = global.SOV_strength_mongolia_final } }
	random_list = {
		var:global.CHI_strength_mongolia_final = { country_event = worldstage.2 add_world_stage_power_chi_5 = yes }
		var:global.SOV_strength_mongolia_final = { country_event = worldstage.3 add_world_stage_power_sov_5 = yes }
	}
	clr_global_flag = world_stage_theater_mongolia_is_active	# CLEAR ALL UNECESSARY DATA (do not delete trickleback data! it's used for localisation)
	clear_variable = global.CHI_strength_mongolia
	clear_variable = global.CHI_strength_mongolia_final
	clear_variable = global.SOV_strength_mongolia
	clear_variable = global.SOV_strength_mongolia_final
}	d_resolve_mongolian_crisis = { resolve_mongolian_crisis = yes }	# shortcut console command

resolve_spanish_cw = {
	log = "resolve_spanish_cw"
	set_temp_variable = { side_a_attack = random }												# each side causes damage equal to [0;20]% of their final strength ([0;1] * final strength / 5 )
	multiply_temp_variable = { side_a_attack = global.FAL_strength_spain_final }
	divide_temp_variable = { side_a_attack = 5 }
	clamp_temp_variable = { var = side_a_attack min = 1 max = 999 }								# minimum 1 attack
	set_temp_variable = { side_b_attack = random }
	multiply_temp_variable = { side_b_attack = global.REP_strength_spain_final }
	divide_temp_variable = { side_b_attack = 5 }
	clamp_temp_variable = { var = side_b_attack min = 1 max = 999 }
	log = "attacks a/b: [?side_a_attack]/[?side_b_attack]"
	subtract_from_variable = { global.FAL_strength_spain = side_b_attack }						# each side hacks away at each other a bit
	subtract_from_variable = { global.REP_strength_spain = side_a_attack }
	if = {
		limit = { OR = { check_variable = { global.FAL_strength_spain < 1 } check_variable = { global.REP_strength_spain < 1 } } }	# one of the sides is destroyed, ends theater (only deployed strength counts here!)
		if = {
			limit = {
				check_variable = {  global.FAL_strength_spain >  global.REP_strength_spain }	# FAL > REP -> FAL WINS!
			}
			set_variable = { global.FAL_strength_trickleback = global.FAL_strength_spain }		# already diminished after each side hacked each other
			clamp_temp_variable = { var = global.FAL_strength_trickleback min = 1 max = 999 }	# at least someone survives
			round_variable = global.FAL_strength_trickleback
			set_variable = { global.REP_strength_trickleback = 0 }								# if he dies, he dies...
			clr_global_flag = world_stage_theater_spanish_cw_is_active							# finishes theater and clear unecessary data
			clear_variable = global.FAL_strength_spain
			clear_variable = global.FAL_strength_spain_final
			clear_variable = global.REP_strength_spain
			clear_variable = global.REP_strength_spain_final
			# country event...
			log = "spain: FAL WINS"
		} else = {	# <-------------------------------------------------------------- # else:    # REP > FAL -> REP WINS!
			set_variable = { global.FAL_strength_trickleback = 0 }								# if he dies, he dies...
			set_variable = { global.REP_strength_trickleback = global.REP_strength_spain }		# already diminished after each side hacked each other
			clamp_temp_variable = { var = global.REP_strength_trickleback min = 1 max = 999 }	# at least someone survives
			round_variable = global.REP_strength_trickleback
			clr_global_flag = world_stage_theater_spanish_cw_is_active							# finishes theater and clear unecessary data
			clear_variable = global.FAL_strength_spain
			clear_variable = global.FAL_strength_spain_final
			clear_variable = global.REP_strength_spain
			clear_variable = global.REP_strength_spain_final
			# country event...
			log = "spain: REP WINS"
		}
	} else = {	# else: theater continues
		set_variable = { global.theater_spanish_cw_timer = 180 }								# restarts clock
		world_stage_get_spanish_cw_timer_frame = yes
		round_variable = global.FAL_strength_spain
		divide_variable = { global.FAL_strength_spain_bonus = 2 }								# each 'turn' halves the strategic advantages of both sides
		round_variable = global.FAL_strength_spain_bonus
		round_variable = global.REP_strength_spain
		divide_variable = { global.REP_strength_spain_bonus = 2 }
		round_variable = global.REP_strength_spain_bonus
		set_variable = { global.FAL_strength_spain_final = global.FAL_strength_spain }			# recalculate final strength so tooltips dont get messy after a draw
		add_to_variable = { global.FAL_strength_spain_final = global.FAL_strength_spain_bonus }
		set_variable = { global.REP_strength_spain_final = global.REP_strength_spain }
		add_to_variable = { global.REP_strength_spain_final = global.REP_strength_spain_bonus }
		log = "spain: no winner"
	}
}	d_resolve_spanish_cw = { resolve_spanish_cw = yes }	# shortcut console command

resolve_theater_poland_first = {
	log = "resolve_theater_poland_first"
	set_temp_variable = { side_a_attack = random }												# each side causes damage equal to [0;20]% of their final strength ([0;1] * final strength / 5 )
	multiply_temp_variable = { side_a_attack = global.GER_strength_poland_final }
	divide_temp_variable = { side_a_attack = 5 }
	clamp_temp_variable = { var = side_a_attack min = 1 max = 999 }								# minimum 1 attack
	set_temp_variable = { side_b_attack = random }
	multiply_temp_variable = { side_b_attack = global.ENG_strength_poland_final }
	divide_temp_variable = { side_b_attack = 5 }
	if = {
		limit = { has_global_flag = GER_SOV_pact_enabled }
		set_temp_variable = { side_c_attack = random }											# special rule: double invasion of poland
		multiply_temp_variable = { side_c_attack = global.SOV_strength_poland_final }
		divide_temp_variable = { side_c_attack = 5 }
		add_to_temp_variable = { side_a_attack = side_c_attack }
		divide_temp_variable = { side_b_attack = 2 }											# each side takes half the damage
	}
	clamp_temp_variable = { var = side_b_attack min = 1 max = 999 }
	log = "attacks a/b: [?side_a_attack]/[?side_b_attack]"
	subtract_from_variable = { global.GER_strength_poland = side_b_attack }						# each side hacks away at each other a bit
	subtract_from_variable = { global.ENG_strength_poland = side_a_attack }
	if = {
		limit = {  has_global_flag = GER_SOV_pact_enabled }
		subtract_from_variable = { global.SOV_strength_poland = side_b_attack }
	}
	if = {
		limit = { check_variable = { global.ENG_strength_poland < 1 } }	# special rule: theater only ends when poland loses, (only deployed strength counts here!) (usual: one of the sides is destroyed, ends theater)
		if = {
			limit = {
				check_variable = {  global.GER_strength_poland >  global.ENG_strength_poland }	# GER > ENG -> GER WINS!
			}
			set_variable = { global.GER_strength_trickleback = global.GER_strength_poland }		# already diminished after each side hacked each other
			clamp_temp_variable = { var = global.GER_strength_trickleback min = 1 max = 999 }	# at least someone survives
			round_variable = global.GER_strength_trickleback
			set_variable = { global.ENG_strength_trickleback = 0 }								# if he dies, he dies...
			clr_global_flag = world_stage_theater_poland_is_active_first						# finishes theater and clear unecessary data
			set_variable = { global.GER_strength_poland = 0 }
			set_variable = { global.GER_strength_poland_bonus = 0 }								# do not clear... we'll be back here soon
			if = {
				limit = { has_global_flag = GER_SOV_pact_enabled }
				set_variable = { global.SOV_strength_poland = 0 }
				set_variable = { global.SOV_strength_poland_bonus = 0 }
			}
			clear_variable = global.ENG_strength_poland
			clear_variable = global.ENG_strength_poland_final
			# country event...
			log = "poland: GER WINS"
		}#  else = {																			# no elses here, GER never loses, only gets delayed
	} else = {	# else: theater continues
		set_variable = { global.theater_poland_timer = 35 }										# restarts clock
		world_stage_get_spanish_cw_timer_frame = yes
		round_variable = global.GER_strength_poland
		divide_variable = { global.GER_strength_poland_bonus = 2 }								# each 'turn' halves the strategic advantages of both sides
		round_variable = global.GER_strength_poland_bonus
		round_variable = global.ENG_strength_poland
		divide_variable = { global.ENG_strength_poland_bonus = 2 }
		round_variable = global.ENG_strength_poland_bonus
		set_variable = { global.GER_strength_poland_final = global.GER_strength_poland }		# recalculate final strength so tooltips dont get messy after a draw
		add_to_variable = { global.GER_strength_poland_final = global.GER_strength_poland_bonus }
		set_variable = { global.ENG_strength_poland_final = global.ENG_strength_poland }
		add_to_variable = { global.ENG_strength_poland_final = global.ENG_strength_poland_bonus }
		if = {
			limit = { has_global_flag = GER_SOV_pact_enabled }
			round_variable = global.SOV_strength_poland
			divide_variable = { global.SOV_strength_poland_bonus = 2 }
			round_variable = global.SOV_strength_poland_bonus
			set_variable = { global.SOV_strength_poland_final = global.SOV_strength_poland }
			add_to_variable = { global.SOV_strength_poland_final = global.SOV_strength_poland_bonus }			
		}
		log = "poland: no winner"
	}
}

### INTERFACE HANDLER

world_stage_get_mongolia_timer_frame = {
	set_variable = { global.theater_mongolia_timer_frame = global.theater_mongolia_timer }
	divide_variable = { global.theater_mongolia_timer_frame = 9 }	# timer has 90 max days
	round_variable = global.theater_mongolia_timer_frame
	clamp_variable = { var = global.theater_mongolia_timer_frame min = 1 max = 9 }
	log = "[?global.theater_mongolia_timer_frame]" 
}
world_stage_get_poland_timer_frame = {
	set_variable = { global.theater_poland_timer_frame = global.theater_poland_timer }
	divide_variable = { global.theater_poland_timer_frame = 3.8 }	# timer has 35 max days, 35/3.8 ~= 9
	round_variable = global.theater_poland_timer_frame
	clamp_variable = { var = global.theater_poland_timer_frame min = 1 max = 9 }
	log = "[?global.theater_poland_timer_frame]" 
}

world_stage_get_spanish_cw_timer_frame = {
	set_variable = { global.theater_spanish_cw_timer_frame = global.theater_spanish_cw_timer }
	divide_variable = { global.theater_spanish_cw_timer_frame = 20 }	# timer has 180 max days, 180/20 = 9
	round_variable = global.theater_spanish_cw_timer_frame
	clamp_variable = { var = global.theater_spanish_cw_timer_frame min = 1 max = 9 }
	log = "[?global.theater_spanish_cw_timer_frame]" 
}

### COUNTRY EFFECTS
# GERMANY

add_world_stage_power_ger_1 = {
	add_to_variable = {global.world_stage_power_ger = 1 }
	custom_effect_tooltip = add_world_stage_power_ger_1_tt
}

add_world_stage_power_ger_2 = {
	add_to_variable = {global.world_stage_power_ger = 2 }
	custom_effect_tooltip = add_world_stage_power_ger_2_tt
}

add_world_stage_power_ger_5 = {
	add_to_variable = {global.world_stage_power_ger = 5 }
	custom_effect_tooltip = add_world_stage_power_ger_5_tt
}

add_world_stage_power_ger_10 = {
	add_to_variable = {global.world_stage_power_ger = 10 }
	custom_effect_tooltip = add_world_stage_power_ger_10_tt
}

add_world_stage_power_ger_15 = {
	add_to_variable = {global.world_stage_power_ger = 15 }
	custom_effect_tooltip = add_world_stage_power_ger_15_tt
}

add_world_stage_power_ger_20 = {
	add_to_variable = {global.world_stage_power_ger = 20 }
	custom_effect_tooltip = add_world_stage_power_ger_20_tt
}

remove_world_stage_power_ger_1 = {
	add_to_variable = {global.world_stage_power_ger = -1 }
	custom_effect_tooltip = remove_world_stage_power_ger_1_tt
}

remove_world_stage_power_ger_5 = {
	add_to_variable = {global.world_stage_power_ger = -5 }
	custom_effect_tooltip = remove_world_stage_power_ger_5_tt
}

remove_world_stage_power_ger_10 = {
	add_to_variable = {global.world_stage_power_ger = -10 }
	custom_effect_tooltip = remove_world_stage_power_ger_10_tt
}

remove_world_stage_power_ger_15 = {
	add_to_variable = {global.world_stage_power_ger = -15 }
	custom_effect_tooltip = remove_world_stage_power_ger_15_tt
}

remove_world_stage_power_ger_20 = {
	add_to_variable = {global.world_stage_power_ger = -20 }
	custom_effect_tooltip = remove_world_stage_power_ger_20_tt
}

# UNITED STATES

add_world_stage_power_usa_1 = {
	add_to_variable = {global.world_stage_power_usa = 1 }
	custom_effect_tooltip = add_world_stage_power_usa_1_tt
}

add_world_stage_power_usa_5 = {
	add_to_variable = {global.world_stage_power_usa = 5 }
	custom_effect_tooltip = add_world_stage_power_usa_5_tt
}

add_world_stage_power_usa_10 = {
	add_to_variable = {global.world_stage_power_usa = 10 }
	custom_effect_tooltip = add_world_stage_power_usa_10_tt
}

add_world_stage_power_usa_15 = {
	add_to_variable = {global.world_stage_power_usa = 15 }
	custom_effect_tooltip = add_world_stage_power_usa_15_tt
}

add_world_stage_power_usa_20 = {
	add_to_variable = {global.world_stage_power_usa = 20 }
	custom_effect_tooltip = add_world_stage_power_usa_20_tt
}

remove_world_stage_power_usa_1 = {
	add_to_variable = {global.world_stage_power_usa = -1 }
	custom_effect_tooltip = remove_world_stage_power_usa_1_tt
}

remove_world_stage_power_usa_5 = {
	add_to_variable = {global.world_stage_power_usa = -5 }
	custom_effect_tooltip = remove_world_stage_power_usa_5_tt
}

remove_world_stage_power_usa_10 = {
	add_to_variable = {global.world_stage_power_usa = -10 }
	custom_effect_tooltip = remove_world_stage_power_usa_10_tt
}

remove_world_stage_power_usa_15 = {
	add_to_variable = {global.world_stage_power_usa = -15 }
	custom_effect_tooltip = remove_world_stage_power_usa_15_tt
}

remove_world_stage_power_usa_20 = {
	add_to_variable = {global.world_stage_power_usa = -20 }
	custom_effect_tooltip = remove_world_stage_power_usa_20_tt
}

# ENGLAND

add_world_stage_power_eng_1 = {
	add_to_variable = {global.world_stage_power_eng = 1 }
	custom_effect_tooltip = add_world_stage_power_eng_1_tt
}

add_world_stage_power_eng_5 = {
	add_to_variable = {global.world_stage_power_eng = 5 }
	custom_effect_tooltip = add_world_stage_power_eng_5_tt
}

add_world_stage_power_eng_10 = {
	add_to_variable = {global.world_stage_power_eng = 10 }
	custom_effect_tooltip = add_world_stage_power_eng_10_tt
}

add_world_stage_power_eng_15 = {
	add_to_variable = {global.world_stage_power_eng = 15 }
	custom_effect_tooltip = add_world_stage_power_eng_15_tt
}

add_world_stage_power_eng_20 = {
	add_to_variable = {global.world_stage_power_eng = 20 }
	custom_effect_tooltip = add_world_stage_power_eng_20_tt
}

remove_world_stage_power_eng_1 = {
	add_to_variable = {global.world_stage_power_eng = -1 }
	custom_effect_tooltip = remove_world_stage_power_eng_1_tt
}

remove_world_stage_power_eng_5 = {
	add_to_variable = {global.world_stage_power_eng = -5 }
	custom_effect_tooltip = remove_world_stage_power_eng_5_tt
}

remove_world_stage_power_eng_10 = {
	add_to_variable = {global.world_stage_power_eng = -10 }
	custom_effect_tooltip = remove_world_stage_power_eng_10_tt
}

remove_world_stage_power_eng_15 = {
	add_to_variable = {global.world_stage_power_eng = -15 }
	custom_effect_tooltip = remove_world_stage_power_eng_15_tt
}

remove_world_stage_power_eng_20 = {
	add_to_variable = {global.world_stage_power_eng = -20 }
	custom_effect_tooltip = remove_world_stage_power_eng_20_tt
}

# FRANCE

add_world_stage_power_fra_1 = {
	add_to_variable = {global.world_stage_power_fra = 1 }
	custom_effect_tooltip = add_world_stage_power_fra_1_tt
}

add_world_stage_power_fra_5 = {
	add_to_variable = {global.world_stage_power_fra = 5 }
	custom_effect_tooltip = add_world_stage_power_fra_5_tt
}

add_world_stage_power_fra_10 = {
	add_to_variable = {global.world_stage_power_fra = 10 }
	custom_effect_tooltip = add_world_stage_power_fra_10_tt
}

add_world_stage_power_fra_15 = {
	add_to_variable = {global.world_stage_power_fra = 15 }
	custom_effect_tooltip = add_world_stage_power_fra_15_tt
}

add_world_stage_power_fra_20 = {
	add_to_variable = {global.world_stage_power_fra = 20 }
	custom_effect_tooltip = add_world_stage_power_fra_20_tt
}

remove_world_stage_power_fra_1 = {
	add_to_variable = {global.world_stage_power_fra = -1 }
	custom_effect_tooltip = remove_world_stage_power_fra_1_tt
}

remove_world_stage_power_fra_5 = {
	add_to_variable = {global.world_stage_power_fra = -5 }
	custom_effect_tooltip = remove_world_stage_power_fra_5_tt
}

remove_world_stage_power_fra_10 = {
	add_to_variable = {global.world_stage_power_fra = -10 }
	custom_effect_tooltip = remove_world_stage_power_fra_10_tt
}

remove_world_stage_power_fra_15 = {
	add_to_variable = {global.world_stage_power_fra = -15 }
	custom_effect_tooltip = remove_world_stage_power_fra_15_tt
}

remove_world_stage_power_fra_20 = {
	add_to_variable = {global.world_stage_power_fra = -20 }
	custom_effect_tooltip = remove_world_stage_power_fra_20_tt
}

# SOVIET UNION	

add_world_stage_power_sov_1 = {
	add_to_variable = {global.world_stage_power_sov = 1 }
	custom_effect_tooltip = add_world_stage_power_sov_1_tt
}

add_world_stage_power_sov_5 = {
	add_to_variable = {global.world_stage_power_sov = 5 }
	custom_effect_tooltip = add_world_stage_power_sov_5_tt
}

add_world_stage_power_sov_10 = {
	add_to_variable = {global.world_stage_power_sov = 10 }
	custom_effect_tooltip = add_world_stage_power_sov_10_tt
}

add_world_stage_power_sov_15 = {
	add_to_variable = {global.world_stage_power_sov = 15 }
	custom_effect_tooltip = add_world_stage_power_sov_15_tt
}

add_world_stage_power_sov_20 = {
	add_to_variable = {global.world_stage_power_sov = 20 }
	custom_effect_tooltip = add_world_stage_power_sov_20_tt
}

remove_world_stage_power_sov_1 = {
	add_to_variable = {global.world_stage_power_sov = -1 }
	custom_effect_tooltip = remove_world_stage_power_sov_1_tt
}

remove_world_stage_power_sov_5 = {
	add_to_variable = {global.world_stage_power_sov = -5 }
	custom_effect_tooltip = remove_world_stage_power_sov_5_tt
}

remove_world_stage_power_sov_10 = {
	add_to_variable = {global.world_stage_power_sov = -10 }
	custom_effect_tooltip = remove_world_stage_power_sov_10_tt
}

remove_world_stage_power_sov_15 = {
	add_to_variable = {global.world_stage_power_sov = -15 }
	custom_effect_tooltip = remove_world_stage_power_sov_15_tt
}

remove_world_stage_power_sov_20 = {
	add_to_variable = {global.world_stage_power_sov = -20 }
	custom_effect_tooltip = remove_world_stage_power_sov_20_tt
}

# PORTUGAL

add_world_stage_power_prt_1 = {
	add_to_variable = {global.world_stage_power_prt = 1 }
	custom_effect_tooltip = add_world_stage_power_prt_1_tt
}

add_world_stage_power_prt_5 = {
	add_to_variable = {global.world_stage_power_prt = 5 }
	custom_effect_tooltip = add_world_stage_power_prt_5_tt
}

add_world_stage_power_prt_10 = {
	add_to_variable = {global.world_stage_power_prt = 10 }
	custom_effect_tooltip = add_world_stage_power_prt_10_tt
}

add_world_stage_power_prt_15 = {
	add_to_variable = {global.world_stage_power_prt = 15 }
	custom_effect_tooltip = add_world_stage_power_prt_15_tt
}

add_world_stage_power_prt_20 = {
	add_to_variable = {global.world_stage_power_prt = 20 }
	custom_effect_tooltip = add_world_stage_power_prt_20_tt
}

remove_world_stage_power_prt_1 = {
	add_to_variable = {global.world_stage_power_prt = -1 }
	custom_effect_tooltip = remove_world_stage_power_prt_1_tt
}

remove_world_stage_power_prt_5 = {
	add_to_variable = {global.world_stage_power_prt = -5 }
	custom_effect_tooltip = remove_world_stage_power_prt_5_tt
}

remove_world_stage_power_prt_10 = {
	add_to_variable = {global.world_stage_power_prt = -10 }
	custom_effect_tooltip = remove_world_stage_power_prt_10_tt
}

remove_world_stage_power_prt_15 = {
	add_to_variable = {global.world_stage_power_prt = -15 }
	custom_effect_tooltip = remove_world_stage_power_prt_15_tt
}

remove_world_stage_power_prt_20 = {
	add_to_variable = {global.world_stage_power_prt = -20 }
	custom_effect_tooltip = remove_world_stage_power_prt_20_tt
}

# NETHERLANDS

add_world_stage_power_net_1 = {
	add_to_variable = {global.world_stage_power_net = 1 }
	custom_effect_tooltip = add_world_stage_power_net_1_tt
}

add_world_stage_power_net_5 = {
	add_to_variable = {global.world_stage_power_net = 5 }
	custom_effect_tooltip = add_world_stage_power_net_5_tt
}

add_world_stage_power_net_10 = {
	add_to_variable = {global.world_stage_power_net = 10 }
	custom_effect_tooltip = add_world_stage_power_net_10_tt
}

add_world_stage_power_net_15 = {
	add_to_variable = {global.world_stage_power_net = 15 }
	custom_effect_tooltip = add_world_stage_power_net_15_tt
}

add_world_stage_power_net_20 = {
	add_to_variable = {global.world_stage_power_net = 20 }
	custom_effect_tooltip = add_world_stage_power_net_20_tt
}

remove_world_stage_power_net_1 = {
	add_to_variable = {global.world_stage_power_net = -1 }
	custom_effect_tooltip = remove_world_stage_power_net_1_tt
}

remove_world_stage_power_net_5 = {
	add_to_variable = {global.world_stage_power_net = -5 }
	custom_effect_tooltip = remove_world_stage_power_net_5_tt
}

remove_world_stage_power_net_10 = {
	add_to_variable = {global.world_stage_power_net = -10 }
	custom_effect_tooltip = remove_world_stage_power_net_10_tt
}

remove_world_stage_power_net_15 = {
	add_to_variable = {global.world_stage_power_net = -15 }
	custom_effect_tooltip = remove_world_stage_power_net_15_tt
}

remove_world_stage_power_net_20 = {
	add_to_variable = {global.world_stage_power_net = -20 }
	custom_effect_tooltip = remove_world_stage_power_net_20_tt
}

# CHINA

add_world_stage_power_chi_1 = {
	add_to_variable = {global.world_stage_power_chi = 1 }
	custom_effect_tooltip = add_world_stage_power_chi_1_tt
}

add_world_stage_power_chi_2 = {
	add_to_variable = {global.world_stage_power_chi = 2 }
	custom_effect_tooltip = add_world_stage_power_chi_2_tt
}

add_world_stage_power_chi_5 = {
	add_to_variable = {global.world_stage_power_chi = 5 }
	custom_effect_tooltip = add_world_stage_power_chi_5_tt
}

add_world_stage_power_chi_10 = {
	add_to_variable = {global.world_stage_power_chi = 10 }
	custom_effect_tooltip = add_world_stage_power_chi_10_tt
}

add_world_stage_power_chi_15 = {
	add_to_variable = {global.world_stage_power_chi = 15 }
	custom_effect_tooltip = add_world_stage_power_chi_15_tt
}

add_world_stage_power_chi_20 = {
	add_to_variable = {global.world_stage_power_chi = 20 }
	custom_effect_tooltip = add_world_stage_power_chi_20_tt
}

remove_world_stage_power_chi_1 = {
	add_to_variable = {global.world_stage_power_chi = -1 }
	custom_effect_tooltip = remove_world_stage_power_chi_1_tt
}

remove_world_stage_power_chi_5 = {
	add_to_variable = {global.world_stage_power_chi = -5 }
	custom_effect_tooltip = remove_world_stage_power_chi_5_tt
}

remove_world_stage_power_chi_10 = {
	add_to_variable = {global.world_stage_power_chi = -10 }
	custom_effect_tooltip = remove_world_stage_power_chi_10_tt
}

remove_world_stage_power_chi_15 = {
	add_to_variable = {global.world_stage_power_chi = -15 }
	custom_effect_tooltip = remove_world_stage_power_chi_15_tt
}

remove_world_stage_power_chi_20 = {
	add_to_variable = {global.world_stage_power_chi = -20 }
	custom_effect_tooltip = remove_world_stage_power_chi_20_tt
}

remove_world_stage_power_chi_25 = {
	add_to_variable = {global.world_stage_power_chi = -25 }
	custom_effect_tooltip = remove_world_stage_power_chi_25_tt
}

remove_world_stage_power_SELF_5 = {
	if = { limit = { tag = ROC }
		add_to_variable = {global.world_stage_power_chi = -5 }
		custom_effect_tooltip = remove_world_stage_power_chi_5_tt
	}
	if = { limit = { tag = HIR }
		add_to_variable = {global.world_stage_power_net = -5 }
		custom_effect_tooltip = remove_world_stage_power_net_5_tt
	}
	if = { limit = { tag = PRT }
		add_to_variable = {global.world_stage_power_prt = -5 }
		custom_effect_tooltip = remove_world_stage_power_prt_5_tt
	}
	if = { limit = { tag = KOB }
		add_to_variable = {global.world_stage_power_fra = -5 }
		custom_effect_tooltip = remove_world_stage_power_fra_5_tt
	}
	if = { limit = { tag = OSA }
		add_to_variable = {global.world_stage_power_eng = -5 }
		custom_effect_tooltip = remove_world_stage_power_eng_5_tt
	}
	if = { limit = { tag = OKI }
		add_to_variable = {global.world_stage_power_usa = -5 }
		custom_effect_tooltip = remove_world_stage_power_usa_5_tt
	}
	if = { limit = { tag = AMC }
		add_to_variable = {global.world_stage_power_usa = -5 }
		custom_effect_tooltip = remove_world_stage_power_usa_5_tt
	}
	if = { limit = { tag = REI }
		add_to_variable = {global.world_stage_power_ger = -5 }
		custom_effect_tooltip = remove_world_stage_power_ger_5_tt
	}
	if = { limit = { tag = FER }
		add_to_variable = {global.world_stage_power_sov = -5 }
		custom_effect_tooltip = remove_world_stage_power_sov_5_tt
	}
}

### GENERIC

world_stage_get_coalitions = {
	# Get Coalitions
	hidden_effect = { 	# just so it does not pollute effect tooltips
		set_variable = { global.world_stage_power_allies = 0 }		# Allies	-> 1
		set_variable = { global.world_stage_power_komintern = 0 }	# Komintern	-> 2
		set_variable = { global.world_stage_power_axis = 0 }		# Axis		-> 3
		if = {
			limit = { check_variable = { global.world_stage_coalition_usa = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_usa }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_usa = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_usa }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_usa = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_usa }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_eng = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_eng }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_eng = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_eng }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_eng = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_eng }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_fra = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_fra }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_fra = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_fra }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_fra = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_fra }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_sov = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_sov }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_sov = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_sov }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_sov = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_sov }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_ger = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_ger }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_ger = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_ger }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_ger = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_ger }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_prt = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_prt }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_prt = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_prt }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_prt = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_prt }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_net = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_net }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_net = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_net }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_net = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_net }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_chi = 1 } }
			add_to_variable = { global.world_stage_power_allies = global.world_stage_power_chi }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_chi = 2 } }
			add_to_variable = { global.world_stage_power_komintern = global.world_stage_power_chi }
		}
		if = {
			limit = { check_variable = { global.world_stage_coalition_chi = 3 } }
			add_to_variable = { global.world_stage_power_axis = global.world_stage_power_chi }
		}
		every_country = {
			limit = { check_variable = { world_stage_coalition = 1 } }
			add_to_variable = { global.world_stage_power_allies = world_stage_power }
		}
		every_country = {
			limit = { check_variable = { world_stage_coalition = 1 } }
			add_to_variable = { global.world_stage_power_allies = world_stage_power }
		}
		every_country = {
			limit = { check_variable = { world_stage_coalition = 2 } }
			add_to_variable = { global.world_stage_power_komintern = world_stage_power }
		}
		every_country = {
			limit = { check_variable = { world_stage_coalition = 3 } }
			add_to_variable = { global.world_stage_power_axis = world_stage_power }
		}
	}
}

world_stage_join_allies = {
	if = {
		limit = { OR = { tag = ROC tag = REI tag = PRT tag = OSA tag = NET tag = KOB tag = OKI tag = FER tag = AMC } }
		if = { limit = { tag = ROC } set_variable = { global.world_stage_coalition_chi = 1 } }
		if = { limit = { tag = REI } set_variable = { global.world_stage_coalition_ger = 1 } }
		if = { limit = { tag = PRT } set_variable = { global.world_stage_coalition_prt = 1 } }
		if = { limit = { tag = NET } set_variable = { global.world_stage_coalition_net = 1 } }
		if = { limit = { tag = OSA } set_variable = { global.world_stage_coalition_eng = 1 } }
		if = { limit = { tag = KOB } set_variable = { global.world_stage_coalition_fra = 1 } }
		if = { limit = { tag = OKI } set_variable = { global.world_stage_coalition_amc = 1 } }
		if = { limit = { tag = FER } set_variable = { global.world_stage_coalition_sov = 1 } }
		if = { limit = { tag = AMC } set_variable = { global.world_stage_coalition_amc = 1 } }
	} else = {
		set_variable = { world_stage_coalition = 1 }
	}
	world_stage_get_coalitions = yes
}

world_stage_join_komintern = {
	if = {
		limit = { OR = { tag = ROC tag = REI tag = PRT tag = OSA tag = NET tag = KOB tag = OKI tag = FER tag = AMC } }
		if = { limit = { tag = ROC } set_variable = { global.world_stage_coalition_chi = 2 } }
		if = { limit = { tag = REI } set_variable = { global.world_stage_coalition_ger = 2 } }
		if = { limit = { tag = PRT } set_variable = { global.world_stage_coalition_prt = 2 } }
		if = { limit = { tag = NET } set_variable = { global.world_stage_coalition_net = 2 } }
		if = { limit = { tag = OSA } set_variable = { global.world_stage_coalition_eng = 2 } }
		if = { limit = { tag = KOB } set_variable = { global.world_stage_coalition_fra = 2 } }
		if = { limit = { tag = OKI } set_variable = { global.world_stage_coalition_amc = 2 } }
		if = { limit = { tag = FER } set_variable = { global.world_stage_coalition_sov = 2 } }
		if = { limit = { tag = AMC } set_variable = { global.world_stage_coalition_amc = 2 } }
	} else = {
		set_variable = { world_stage_coalition = 2}
	}
	world_stage_get_coalitions = yes
}

world_stage_join_axis = {
	if = {
		limit = { OR = { tag = ROC tag = REI tag = PRT tag = OSA tag = NET tag = KOB tag = OKI tag = FER tag = AMC } }
		if = { limit = { tag = ROC } set_variable = { global.world_stage_coalition_chi = 3 } }
		if = { limit = { tag = REI } set_variable = { global.world_stage_coalition_ger = 3 } }
		if = { limit = { tag = PRT } set_variable = { global.world_stage_coalition_prt = 3 } }
		if = { limit = { tag = NET } set_variable = { global.world_stage_coalition_net = 3 } }
		if = { limit = { tag = OSA } set_variable = { global.world_stage_coalition_eng = 3 } }
		if = { limit = { tag = KOB } set_variable = { global.world_stage_coalition_fra = 3 } }
		if = { limit = { tag = OKI } set_variable = { global.world_stage_coalition_amc = 3 } }
		if = { limit = { tag = FER } set_variable = { global.world_stage_coalition_sov = 3 } }
		if = { limit = { tag = AMC } set_variable = { global.world_stage_coalition_amc = 3 } }
	} else = {
		set_variable = { world_stage_coalition = 3 }
	}
	world_stage_get_coalitions = yes
}

world_stage_join_unaligned = {
	if = {
		limit = { OR = { tag = ROC tag = REI tag = PRT tag = OSA tag = NET tag = KOB tag = OKI tag = FER tag = AMC } }
		if = { limit = { tag = ROC } set_variable = { global.world_stage_coalition_chi = 0 } }
		if = { limit = { tag = REI } set_variable = { global.world_stage_coalition_ger = 0 } }
		if = { limit = { tag = PRT } set_variable = { global.world_stage_coalition_prt = 0 } }
		if = { limit = { tag = NET } set_variable = { global.world_stage_coalition_net = 0 } }
		if = { limit = { tag = OSA } set_variable = { global.world_stage_coalition_eng = 0 } }
		if = { limit = { tag = KOB } set_variable = { global.world_stage_coalition_fra = 0 } }
		if = { limit = { tag = OKI } set_variable = { global.world_stage_coalition_amc = 0 } }
		if = { limit = { tag = FER } set_variable = { global.world_stage_coalition_sov = 0 } }
	} else = {
		set_variable = { world_stage_coalition = 0}
	}
	world_stage_get_coalitions = yes
}