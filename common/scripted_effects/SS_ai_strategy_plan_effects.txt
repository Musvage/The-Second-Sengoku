# These are mostly used once per game by the AI to determine the next strategy.
# They are (mostly) activated by focuses, and will be written here lest the focus tree files are filled with repetitive code

# Initial strategies are determined by game rules and on_action files

# Common flags used:
# ai_path_neutrality
# ai_path_democratic
# ai_path_democratic_socialism
# ai_path_fascism
# ai_path_communism
# ai_path_autocracy
# initial_strategy_completed
# ai_path_aggressiv
# hostile_to_[TAG]
# friendly_to_[TAG]

# EASTERNS {

SHO_choose_stategy_plan = {
	SHO = {
	
	}
} d_SHO_choose_stategy_plan = { SHO_choose_stategy_plan = yes log = "SHO_choose_stategy_plan" }

KAN_choose_stategy_plan = {
	KAN = {
	
	}
} d_KAN_choose_stategy_plan = { KAN_choose_stategy_plan = yes log = "KAN_choose_stategy_plan" }

EZO_choose_stategy_plan = {
	EZO = {
	
	}
} d_EZO_choose_stategy_plan = { EZO_choose_stategy_plan = yes log = "EZO_choose_stategy_plan" }

SHI_choose_stategy_plan = {
	SHI = {
		# choose stance on Seto Crisis (if it is going on)
	}
} d_SHI_choose_stategy_plan = { SHI_choose_stategy_plan = yes log = "SHI_choose_stategy_plan" }

KYU_choose_stategy_plan = {
	KYU = {
		# choose stance on HIR
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_HIR = opinion@HIR }
		HIR = { add_to_temp_variable = { hostility_HIR = opinion@KYU } }
		multiply_temp_variable = { hostility_HIR = -1 }
			# check ideology
		if = { limit = { left_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { center_ideology = yes HIR = { center_ideology = yes } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { left_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_country_flag = friendly_to_HIR }						add_to_temp_variable = { hostility_HIR = -100 } }
			# check other factors
		if = { limit = { has_war_with = HIR }										add_to_temp_variable = { hostility_HIR = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_HIR }				add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { is_justifying_wargoal_against = HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_wargoal_against = HIR }								add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { is_in_faction_with = HIR }									add_to_temp_variable = { hostility_HIR = -500 } }
		if = { limit = { has_completed_focus = KYU_NAV_befriend_HIR }				add_to_temp_variable = { hostility_HIR = -200 } }
		if = { limit = { is_embargoing = HIR }										add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_neutrality } }		add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_aggressive } }		add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { has_country_flag = reject_overture_from_KYU } }	add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_wargoal_against = KYU } }						add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { is_embargoing = KYU } }							add_to_temp_variable = { hostility_HIR = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_HIR > 499 } }
			clr_country_flag = friendly_to_HIR
			set_country_flag = hostile_to_HIR log = "[THIS.GetName] is hostile towards [HIR.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_HIR < -249 } }
			clr_country_flag = hostile_to_HIR
			set_country_flag = friendly_to_HIR log = "[THIS.GetName] is friendly towards [HIR.GetName]"
		} else = {
			clr_country_flag = hostile_to_HIR
			clr_country_flag = friendly_to_HIR log = "[THIS.GetName] is neutral towards [HIR.GetName]"
		}
		# choose stance on PRT
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_PRT = opinion@PRT }
		PRT = { add_to_temp_variable = { hostility_PRT = opinion@KYU } }
		multiply_temp_variable = { hostility_PRT = -1 }
			# check ideology
		if = { limit = { left_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { center_ideology = yes PRT = { center_ideology = yes } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { left_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_country_flag = friendly_to_PRT }						add_to_temp_variable = { hostility_PRT = -100 } }
			# check other factors
		if = { limit = { has_war_with = PRT }										add_to_temp_variable = { hostility_PRT = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_PRT }				add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { is_justifying_wargoal_against = PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_wargoal_against = PRT }								add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { is_in_faction_with = PRT }									add_to_temp_variable = { hostility_PRT = -500 } }
		if = { limit = { has_completed_focus = KYU_NAV_befriend_PRT }				add_to_temp_variable = { hostility_PRT = -200 } }
		if = { limit = { is_embargoing = PRT }										add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_neutrality } }		add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_aggressive } }		add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { PRT = { has_country_flag = reject_overture_from_KYU } }	add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_wargoal_against = KYU } }						add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { PRT = { is_embargoing = KYU } }							add_to_temp_variable = { hostility_PRT = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_PRT > 499 } }
			clr_country_flag = friendly_to_PRT
			set_country_flag = hostile_to_PRT log = "[THIS.GetName] is hostile towards [PRT.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_PRT < -249 } }
			clr_country_flag = hostile_to_PRT
			set_country_flag = friendly_to_PRT log = "[THIS.GetName] is friendly towards [PRT.GetName]"
		} else = {
			clr_country_flag = hostile_to_PRT
			clr_country_flag = friendly_to_PRT log = "[THIS.GetName] is neutral towards [PRT.GetName]"
		}
		# choose NAV strategy (besides PRT and HIR, KYU must check MUS/SUS since focuses about Okinawa depend on initial NAV focuses)
		set_temp_variable = { NAV_aggressivenes = opinion@MUS }
		MUS = { add_to_temp_variable = { NAV_aggressivenes = opinion@KYU } }
		multiply_temp_variable = { NAV_aggressivenes = -1 }
		add_to_temp_variable = { NAV_aggressivenes = hostility_HIR }
		add_to_temp_variable = { NAV_aggressivenes = hostility_PRT }
			# check ideology
		if = { limit = { left_ideology = yes MUS = { left_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = -100 } }
		if = { limit = { right_ideology = yes MUS = { right_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = -100 } }
		if = { limit = { center_ideology = yes MUS = { center_ideology = yes } }	add_to_temp_variable = { NAV_aggressivenes = -100 } }
		if = { limit = { right_ideology = yes MUS = { left_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = 100 } }
		if = { limit = { left_ideology = yes MUS = { right_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = NAV_aggressive_strategy }				add_to_temp_variable = { NAV_aggressivenes = 100 } }
		if = { limit = { has_country_flag = NAV_friendly_strategy }					add_to_temp_variable = { NAV_aggressivenes = -100 } }
			# check other factors
		if = { limit = { has_war_with = MUS }										add_to_temp_variable = { NAV_aggressivenes = 1000 } }
		if = { limit = { is_justifying_wargoal_against = MUS }						add_to_temp_variable = { NAV_aggressivenes = 100 } }
		if = { limit = { has_wargoal_against = MUS }								add_to_temp_variable = { NAV_aggressivenes = 200 } }
		if = { limit = { is_in_faction_with = MUS }									add_to_temp_variable = { NAV_aggressivenes = -500 } }
		if = { limit = { is_embargoing = MUS }										add_to_temp_variable = { NAV_aggressivenes = 200 } }
		#if = { limit = { MUS = { has_completed_focus =  } }						add_to_temp_variable = { NAV_aggressivenes =  } }
		if = { limit = { MUS = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { NAV_aggressivenes = 200 } }
		if = { limit = { MUS = { has_wargoal_against = KYU } }						add_to_temp_variable = { NAV_aggressivenes = 400 } }
		if = { limit = { MUS = { is_embargoing = KYU } }							add_to_temp_variable = { NAV_aggressivenes = 200 } }
			# final decision
		if = {
			limit = { check_variable = { NAV_aggressivenes > 0 } }
			clr_country_flag = NAV_friendly_strategy
			set_country_flag = NAV_aggressive_strategy log = "[THIS.GetName] chose aggressive strategy (NAV)"
		} else = {
			clr_country_flag = NAV_aggressive_strategy
			set_country_flag = NAV_friendly_strategy log = "[THIS.GetName] chose friendly strategy (NAV)"
		}
		# choose stance on Seto Crisis (if it is going on)
	}
} d_KYU_choose_stategy_plan = { KYU_choose_stategy_plan = yes log = "KYU_choose_stategy_plan" }

CHU_choose_stategy_plan = {
	CHU = {
		# choose stance on Seto Crisis (if it is going on)
	}
} d_CHU_choose_stategy_plan = { CHU_choose_stategy_plan = yes log = "CHU_choose_stategy_plan" }

PRO_choose_stategy_plan = {
	PRO = {
	
	}
} d_PRO_choose_stategy_plan = { PRO_choose_stategy_plan = yes log = "PRO_choose_stategy_plan" }

IMS_choose_stategy_plan = {
	IMS = {
		# choose stance on Seto Crisis (if it is going on), this mostly means waiting a few months to check if any nation of interest is a human player (SHI, KYU, CHU, REI)
	}
} d_IMS_choose_stategy_plan = { IMS_choose_stategy_plan = yes log = "IMS_choose_stategy_plan" }

AMO_choose_stategy_plan = {
	AMO = {
	
	}
} d_AMO_choose_stategy_plan = { AMO_choose_stategy_plan = yes log = "AMO_choose_stategy_plan" }

JOS_choose_stategy_plan = {
	JOS = {
	
	}
} d_JOS_choose_stategy_plan = { JOS_choose_stategy_plan = yes log = "JOS_choose_stategy_plan" }

GAN_choose_stategy_plan = {
	GAN = {
	
	}
} d_GAN_choose_stategy_plan = { GAN_choose_stategy_plan = yes log = "GAN_choose_stategy_plan" }

# } WESTERNS {

REI_choose_stategy_plan = {
	REI = {
	
	}
} d_REI_choose_stategy_plan = { REI_choose_stategy_plan = yes log = "REI_choose_stategy_plan" }

PRT_choose_stategy_plan = {
	PRT = {
		# choose stance on KYU
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_KYU = opinion@KYU }
		KYU = { add_to_temp_variable = { hostility_KYU = opinion@PRT } }
		multiply_temp_variable = { hostility_KYU = -1 }
			# check ideology
		if = { limit = { left_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { center_ideology = yes KYU = { center_ideology = yes } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { left_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_country_flag = friendly_to_KYU }						add_to_temp_variable = { hostility_KYU = -100 } }
			# check other factors
		if = { limit = { has_war_with = KYU }										add_to_temp_variable = { hostility_KYU = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_KYU }				add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { is_justifying_wargoal_against = KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_wargoal_against = KYU }								add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { is_in_faction_with = KYU }									add_to_temp_variable = { hostility_KYU = -500 } }
		if = { limit = { has_completed_focus = PRT_NAV_befriend_KYU }				add_to_temp_variable = { hostility_KYU = -200 } }
		if = { limit = { is_embargoing = KYU }										add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_neutrality } }		add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_aggressive } }		add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { has_country_flag = reject_overture_from_PRT } }	add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { is_justifying_wargoal_against = PRT } }			add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_wargoal_against = PRT } }						add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { is_embargoing = PRT } }							add_to_temp_variable = { hostility_KYU = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_KYU > 499 } }
			clr_country_flag = friendly_to_KYU
			set_country_flag = hostile_to_KYU log = "[THIS.GetName] is hostile towards [KYU.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_KYU < -249 } }
			clr_country_flag = hostile_to_KYU
			set_country_flag = friendly_to_KYU log = "[THIS.GetName] is friendly towards [KYU.GetName]"
		} else = {
			clr_country_flag = hostile_to_KYU
			clr_country_flag = friendly_to_KYU log = "[THIS.GetName] is neutral towards [KYU.GetName]"
		}
		# choose stance on HIR
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_HIR = opinion@HIR }
		HIR = { add_to_temp_variable = { hostility_HIR = opinion@PRT } }
		multiply_temp_variable = { hostility_HIR = -1 }
			# check ideology
		if = { limit = { left_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { center_ideology = yes HIR = { center_ideology = yes } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { left_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_country_flag = friendly_to_HIR }						add_to_temp_variable = { hostility_HIR = -100 } }
			# check other factors
		if = { limit = { has_war_with = HIR }										add_to_temp_variable = { hostility_HIR = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_HIR }				add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { is_justifying_wargoal_against = HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_wargoal_against = HIR }								add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { is_in_faction_with = HIR }									add_to_temp_variable = { hostility_HIR = -500 } }
		if = { limit = { has_completed_focus = PRT_NAV_befriend_HIR }				add_to_temp_variable = { hostility_HIR = -200 } }
		if = { limit = { is_embargoing = HIR }										add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_neutrality } }		add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_aggressive } }		add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { has_country_flag = reject_overture_from_PRT } }	add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { is_justifying_wargoal_against = PRT } }			add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_wargoal_against = PRT } }						add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { is_embargoing = PRT } }							add_to_temp_variable = { hostility_HIR = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_HIR > 499 } }
			clr_country_flag = friendly_to_HIR
			set_country_flag = hostile_to_HIR log = "[THIS.GetName] is hostile towards [HIR.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_HIR < -249 } }
			clr_country_flag = hostile_to_HIR
			set_country_flag = friendly_to_HIR log = "[THIS.GetName] is friendly towards [HIR.GetName]"
		} else = {
			clr_country_flag = hostile_to_HIR
			clr_country_flag = friendly_to_HIR log = "[THIS.GetName] is neutral towards [HIR.GetName]"
		}
		# choose NAV strategy
		if = {
			limit = { NOT = { has_country_flag = NAV_aggressive_strategy has_country_flag = NAV_friendly_strategy } }
			if = {
				limit = { has_country_flag = hostile_to_HIR has_country_flag = hostile_to_KYU }
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_HIR
					check_variable = { hostility_KYU > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_KYU
					check_variable = { hostility_HIR > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					NOT = { has_country_flag = hostile_to_HIR }
					NOT = { has_country_flag = hostile_to_KYU }
				}
				set_country_flag = NAV_friendly_strategy	log = "[THIS.GetName] chose NAV_friendly_strategy"
			}
		} else = {
			if = { limit = { has_country_flag = NAV_friendly_strategy } log = "[THIS.GetName] chose NAV_friendly_strategy" }
			if = { limit = { has_country_flag = NAV_aggressive_strategy } log = "[THIS.GetName] chose NAV_aggressive_strategy" }
		}
		# choose overal strategy
			# 5 possible paths: neutrality (default), democratic/socdem, fascist/monarchist.
			# neutral, fascist and monarchy prefer Strenghen Colonial Act, dem/socdem prefere Revise
			# if neutral or fasc/mon, check China for peaceful resolution of Macau problem
			# choose aggressive path if KYU is hostile, if China is hostile, or if AXS/ALY is threateing (unlikely)
	}
} d_PRT_choose_stategy_plan = { PRT_choose_stategy_plan = yes log = "PRT_choose_stategy_plan" }

KOB_choose_stategy_plan = {
	KOB = {
	
	}
} d_KOB_choose_stategy_plan = { KOB_choose_stategy_plan = yes log = "KOB_choose_stategy_plan" }

OSA_choose_stategy_plan = {
	OSA = {
	
	}
} d_OSA_choose_stategy_plan = { OSA_choose_stategy_plan = yes log = "OSA_choose_stategy_plan" }

AMC_choose_stategy_plan = {
	OKI = {
	
	}
} d_AMC_choose_stategy_plan = { AMC_choose_stategy_plan = yes log = "AMC_choose_stategy_plan" }

OKI_choose_stategy_plan = {
	OKI = {
	
	}
}  d_OKI_choose_stategy_plan = { OKI_choose_stategy_plan = yes log = "OKI_choose_stategy_plan" }

FER_choose_stategy_plan = {
	FER = {
	
	}
}  d_FER_choose_stategy_plan = { FER_choose_stategy_plan = yes log = "FER_choose_stategy_plan" }

HIR_choose_stategy_plan = {
	HIR = {
		# choose stance on KYU
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_KYU = opinion@KYU }
		KYU = { add_to_temp_variable = { hostility_KYU = opinion@HIR } }
		multiply_temp_variable = { hostility_KYU = -1 }
			# check ideology
		if = { limit = { left_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { center_ideology = yes KYU = { center_ideology = yes } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { left_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_country_flag = friendly_to_KYU }						add_to_temp_variable = { hostility_KYU = -100 } }
			# check other factors
		if = { limit = { has_war_with = KYU }										add_to_temp_variable = { hostility_KYU = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_KYU }				add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { is_justifying_wargoal_against = KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_wargoal_against = KYU }								add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { is_in_faction_with = KYU }									add_to_temp_variable = { hostility_KYU = -500 } }
		if = { limit = { has_completed_focus = HIR_NAV_befriend_KYU }				add_to_temp_variable = { hostility_KYU = -200 } }
		if = { limit = { is_embargoing = KYU }										add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_neutrality } }		add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_aggressive } }		add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { has_country_flag = reject_overture_from_HIR } }	add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { is_justifying_wargoal_against = HIR } }			add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_wargoal_against = HIR } }						add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { is_embargoing = HIR } }							add_to_temp_variable = { hostility_KYU = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_KYU > 499 } }
			clr_country_flag = friendly_to_KYU
			set_country_flag = hostile_to_KYU log = "[THIS.GetName] is hostile towards [KYU.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_KYU < -249 } }
			clr_country_flag = hostile_to_KYU
			set_country_flag = friendly_to_KYU log = "[THIS.GetName] is friendly towards [KYU.GetName]"
		} else = {
			clr_country_flag = hostile_to_KYU
			clr_country_flag = friendly_to_KYU log = "[THIS.GetName] is neutral towards [KYU.GetName]"
		}
		# choose stance on PRT
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_PRT = opinion@PRT }
		PRT = { add_to_temp_variable = { hostility_PRT = opinion@HIR } }
		multiply_temp_variable = { hostility_PRT = -1 }
			# check ideology
		if = { limit = { left_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { center_ideology = yes PRT = { center_ideology = yes } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { left_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_country_flag = friendly_to_PRT }						add_to_temp_variable = { hostility_PRT = -100 } }
			# check other factors
		if = { limit = { has_war_with = PRT }										add_to_temp_variable = { hostility_PRT = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_PRT }				add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { is_justifying_wargoal_against = PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_wargoal_against = PRT }								add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { is_in_faction_with = PRT }									add_to_temp_variable = { hostility_PRT = -500 } }
		if = { limit = { has_completed_focus = HIR_NAV_befriend_PRT }				add_to_temp_variable = { hostility_PRT = -200 } }
		if = { limit = { is_embargoing = PRT }										add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_neutrality } }		add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_aggressive } }		add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { PRT = { has_country_flag = reject_overture_from_HIR } }	add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { is_justifying_wargoal_against = HIR } }			add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_wargoal_against = HIR } }						add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { KYU = { is_embargoing = HIR } }							add_to_temp_variable = { hostility_PRT = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_PRT > 499 } }
			clr_country_flag = friendly_to_PRT
			set_country_flag = hostile_to_PRT log = "[THIS.GetName] is hostile towards [PRT.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_PRT < -249 } }
			clr_country_flag = hostile_to_PRT
			set_country_flag = friendly_to_PRT log = "[THIS.GetName] is friendly towards [PRT.GetName]"
		} else = {
			clr_country_flag = hostile_to_PRT
			clr_country_flag = friendly_to_PRT log = "[THIS.GetName] is neutral towards [PRT.GetName]"
		}
		# choose NAV strategy
		if = {
			limit = { NOT = { has_country_flag = NAV_aggressive_strategy has_country_flag = NAV_friendly_strategy } }
			if = {
				limit = { has_country_flag = hostile_to_PRT has_country_flag = hostile_to_KYU }
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_PRT
					check_variable = { hostility_KYU > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_KYU
					check_variable = { hostility_PRT > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					NOT = { has_country_flag = hostile_to_PRT }
					NOT = { has_country_flag = hostile_to_KYU }
				}
				set_country_flag = NAV_friendly_strategy	log = "[THIS.GetName] chose NAV_friendly_strategy"
			}
		} else = {
			if = { limit = { has_country_flag = NAV_friendly_strategy } log = "[THIS.GetName] chose NAV_friendly_strategy" }
			if = { limit = { has_country_flag = NAV_aggressive_strategy } log = "[THIS.GetName] chose NAV_aggressive_strategy" }
		}
		# choose overal strategy
		if = {
			limit = { OR = { has_country_flag = ai_path_neutrality has_country_flag = ai_path_fascism } }	# V.O.C., fascist and monarchist path
			if = {
				limit = {
					OR = {
						any_other_country = { has_war_with_wargoal_against = { target = HIR } }
						KYU = {
							OR = {
								has_country_flag = hostile_to_HIR
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human HIR
							}
						}
						PRT = {
							OR = {
								has_country_flag = hostile_to_HIR
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human HIR
							}
						}
					}
				}
				set_country_flag = ai_path_aggressive
				log = "[THIS.GetName] chose alternative path / ai_path_aggressive"
			} else = { log = "[THIS.GetName] chose alternative path / NOT ai_path_aggressive" }
		} else = {	# default: democratic (same as before but also checks for aggressive REI)
			if = {
				limit = {
					OR = {
						any_other_country = { has_war_with_wargoal_against = { target = HIR } }
						KYU = {
							OR = {
								has_country_flag = hostile_to_KYU
							}
						}
						PRT = {
							OR = {
								has_country_flag = hostile_to_PRT
							}
						}
						REI = {
							OR = {
								is_embargoing = HIR
								has_war_with = HIR
								has_opinion = { target = HIR value < -50 }
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human REI
							}
						}
						is_embargoing = REI
						has_opinion = { target = REI value < -50 }
						has_world_stage_coalition_allies = yes
					}
				}
				set_country_flag = ai_path_aggressive
				log = "[THIS.GetName] chose default path / ai_path_aggressive"
			} else = { log = "[THIS.GetName] chose default path / NOT ai_path_aggressive" }
		}
	}
} d_HIR_choose_stategy_plan = { HIR_choose_stategy_plan = yes log = "HIR_choose_stategy_plan" }

# } DEBUG

choose_ai_strategy = {
	every_country = {
		if = {
			limit = { is_ai = yes }
			if = { limit = { tag = SHO } SHO_choose_stategy_plan = yes }
			if = { limit = { tag = KAN } KAN_choose_stategy_plan = yes }
			if = { limit = { tag = EZO } EZO_choose_stategy_plan = yes }
			if = { limit = { tag = SHI } SHI_choose_stategy_plan = yes }
			if = { limit = { tag = KYU } KYU_choose_stategy_plan = yes }
			if = { limit = { tag = CHU } CHU_choose_stategy_plan = yes }
			if = { limit = { tag = PRO } PRO_choose_stategy_plan = yes }
			if = { limit = { tag = IMS } IMS_choose_stategy_plan = yes }
			if = { limit = { tag = AMO } AMO_choose_stategy_plan = yes }
			if = { limit = { tag = JOS } JOS_choose_stategy_plan = yes }
			if = { limit = { tag = GAN } GAN_choose_stategy_plan = yes }
			if = { limit = { tag = REI } REI_choose_stategy_plan = yes }
			if = { limit = { tag = PRT } PRT_choose_stategy_plan = yes }
			if = { limit = { tag = KOB } KOB_choose_stategy_plan = yes }
			if = { limit = { tag = OSA } OSA_choose_stategy_plan = yes }
			if = { limit = { tag = AMC } AMC_choose_stategy_plan = yes }
			if = { limit = { tag = OKI } OKI_choose_stategy_plan = yes }
			if = { limit = { tag = FER } FER_choose_stategy_plan = yes }
			if = { limit = { tag = HIR } HIR_choose_stategy_plan = yes }
		} else = { log = "[THIS.GetName] is not AI" }
	}
} d_choose_ai_strategy = { choose_ai_strategy = yes log = "choose_ai_strategy (DEBUG)"}


## in SS_generic_triggers.txt:

#left_ideology = {
#	OR = {
#		has_government = democratic_socialism
#		has_government = communism
#	}
#}

#right_ideology = {
#	OR = {
#		has_government = fascism
#		has_government = autocracy
#	}
#}

#center_ideology = {
#	OR = {
#		has_government = democratic
#		has_government = neutrality
#	}
#}