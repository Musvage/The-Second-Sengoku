# These are mostly used once per game by the AI to determine the next strategy.
# They are (mostly) activated by focuses, and will be written here lest the focus tree files are filled with repetitive code

# Initial strategies are determined by game rules and on_action files

# Flags used:
# ai_path_neutrality
# ai_path_democratic
# ai_path_democratic_socialism
# ai_path_fascism
# ai_path_communism
# ai_path_autocracy
# initial_strategy_completed
# ai_path_aggressive

# EASTERNS {

SHO_choose_stategy_plan = {
	SHO = {
	
	}
}

KAN_choose_stategy_plan = {
	KAN = {
	
	}
}

EZO_choose_stategy_plan = {
	EZO = {
	
	}
}

SHI_choose_stategy_plan = {
	SHI = {
	
	}
}

KYU_choose_stategy_plan = {
	KYU = {
		# choose stance on PRT
		if = {
			limit = {
				NOT = {
					has_country_flag = hostile_to_PRT
					focus_progress = { focus = PRT_NAV_befriend_KYU progress > 0.01 }
				}
				count_triggers = {
					amount = 3
					has_war_with = PRT has_war_with = PRT has_war_with = PRT	#it counts 3 times to fulfill trigger automatically
					has_opinion = { target = PRT value < -50 }
					has_opinion = { target = PRT value < -100 }
					is_justifying_wargoal_against = PRT
					PRT = { has_completed_focus = PRT_NAV_neutrality }
					PRT = { has_completed_focus = PRT_NAV_aggressive }
					PRT = { has_country_flag = reject_overture_from_KYU }
					PRT = { has_opinion = { target = KYU value < -50 } }
					PRT = { has_opinion = { target = KYU value < -100 } }
					PRT = { is_justifying_wargoal_against = KYU }
					AND = { OR = { has_government = democratic has_government = democratic_socialism has_government = communism } PRT = { OR = { has_government = fascism has_government = neutrality has_government = autocracy } } }
				}
			}
			set_country_flag = hostile_to_PRT
			log = "[THIS.GetName] chose hostile_to_PRT"
		} else = { log = "[THIS.GetName] chose NOT hostile_to_PRT" }
		# choose stance on HIR
		if = {
			limit = {
				NOT = {
					has_country_flag = HIR
					focus_progress = { focus = HIR_NAV_befriend_KYU progress > 0.01 }
				}
				count_triggers = {
					amount = 3
					has_war_with = HIR has_war_with = HIR has_war_with = HIR	#it counts 3 times to fulfill trigger automatically
					has_completed_focus = HIR_NAV_aggressive
					has_opinion = { target = HIR value < -50 }
					has_opinion = { target = HIR value < -100 }
					is_justifying_wargoal_against = HIR
					HIR = { has_country_flag = reject_overture_from_KYU }
					HIR = { has_opinion = { target = KYU value < -50 } }
					HIR = { has_opinion = { target = KYU value < -100 } }
					HIR = { is_justifying_wargoal_against = KYU }
					AND = { OR = { has_government = democratic has_government = democratic_socialism has_government = communism } HIR = { OR = { has_government = fascism has_government = neutrality has_government = autocracy } } }
				}
			}
			set_country_flag = hostile_to_HIR
			log = "[THIS.GetName] chose hostile_to_HIR"
		} else = { log = "[THIS.GetName] chose NOT hostile_to_HIR" }
	}
}

CHU_choose_stategy_plan = {
	CHU = {
	
	}
}

PRO_choose_stategy_plan = {
	PRO = {
	
	}
}

IMS_choose_stategy_plan = {
	IMS = {
	
	}
}

AMO_choose_stategy_plan = {
	AMO = {
	
	}
}

JOS_choose_stategy_plan = {
	JOS = {
	
	}
}

GAN_choose_stategy_plan = {
	GAN = {
	
	}
}

# } WESTERNS

REI_choose_stategy_plan = {
	REI = {
	
	}
}

PRT_choose_stategy_plan = {
	PRT = {
		# choose stance on KYU
		if = {
			limit = {
				NOT = {
					has_country_flag = hostile_to_KYU
					focus_progress = { focus = KYU_NAV_befriend_PRT progress > 0.01 }
				}
				count_triggers = {
					amount = 3
					has_war_with = KYU has_war_with = KYU has_war_with = KYU	#it counts 3 times to fulfill trigger automatically
					has_opinion = { target = KYU value < -50 }
					has_opinion = { target = KYU value < -100 }
					is_justifying_wargoal_against = KYU
					KYU = { has_completed_focus = PRT_NAV_neutrality }
					KYU = { has_completed_focus = KYU_NAV_aggressive }
					KYU = { has_country_flag = reject_overture_from_PRT }
					KYU = { has_opinion = { target = PRT value < -50 } }
					KYU = { has_opinion = { target = PRT value < -100 } }
					KYU = { is_justifying_wargoal_against = PRT }
					AND = { OR = { has_government = democratic has_government = democratic_socialism has_government = communism } KYU = { OR = { has_government = fascism has_government = neutrality has_government = autocracy } } }
				}
			}
			set_country_flag = hostile_to_KYU
			log = "[THIS.GetName] chose hostile_to_KYU"
		} else = { log = "[THIS.GetName] chose NOT hostile_to_KYU" }
		# choose stance on HIR
		if = {
			limit = {
				NOT = {
					has_country_flag = hostile_to_HIR
					focus_progress = { focus = HIR_NAV_befriend_PRT progress > 0.01 }
				}
				count_triggers = {
					amount = 3
					has_war_with = HIR has_war_with = HIR has_war_with = HIR	#it counts 3 times to fulfill trigger automatically
					has_completed_focus = HIR_NAV_aggressive
					has_opinion = { target = HIR value < -50 }
					has_opinion = { target = HIR value < -100 }
					is_justifying_wargoal_against = HIR
					HIR = { has_country_flag = reject_overture_from_PRT }
					HIR = { has_opinion = { target = PRT value < -50 } }
					HIR = { has_opinion = { target = PRT value < -100 } }
					HIR = { is_justifying_wargoal_against = PRT }
					AND = { OR = { has_government = democratic has_government = democratic_socialism has_government = communism } HIR = { OR = { has_government = fascism has_government = neutrality has_government = autocracy } } }
				}
			}
			set_country_flag = hostile_to_HIR
			log = "[THIS.GetName] chose hostile_to_HIR"
		} else = { log = "[THIS.GetName] chose NOT hostile_to_HIR" }
	}
}

KOB_choose_stategy_plan = {
	KOB = {
	
	}
}

OSA_choose_stategy_plan = {
	OSA = {
	
	}
}

AMC_choose_stategy_plan = {
	OKI = {
	
	}
}

OKI_choose_stategy_plan = {
	OKI = {
	
	}
}

FER_choose_stategy_plan = {
	FER = {
	
	}
}

HIR_choose_stategy_plan = {
	HIR = {
		# choose stance on KYU
		if = {
			limit = {
				NOT = {
					has_country_flag = hostile_to_KYU
					focus_progress = { focus = KYU_NAV_befriend_HIR progress > 0.01 }
				}
				count_triggers = {
					amount = 3
					has_war_with = KYU has_war_with = KYU has_war_with = KYU	#it counts 3 times to fulfill trigger automatically
					has_opinion = { target = KYU value < -50 }
					has_opinion = { target = KYU value < -100 }
					is_justifying_wargoal_against = KYU
					KYU = { has_completed_focus = HIR_NAV_neutrality }
					KYU = { has_completed_focus = KYU_NAV_aggressive }
					KYU = { has_country_flag = reject_overture_from_HIR }
					KYU = { has_opinion = { target = HIR value < -50 } }
					KYU = { has_opinion = { target = HIR value < -100 } }
					KYU = { is_justifying_wargoal_against = HIR }
					AND = { OR = { has_government = democratic has_government = democratic_socialism has_government = communism } KYU = { OR = { has_government = fascism has_government = neutrality has_government = autocracy } } }
				}
			}
			set_country_flag = hostile_to_KYU
			log = "[THIS.GetName] chose hostile_to_KYU"
		} else = { log = "[THIS.GetName] chose NOT hostile_to_KYU" }
		# choose stance on PRT
		if = {
			limit = {
				NOT = {
					has_country_flag = hostile_to_PRT
					focus_progress = { focus = PRT_NAV_befriend_HIR progress > 0.01 }
				}
				count_triggers = {
					amount = 3
					has_war_with = PRT has_war_with = PRT has_war_with = PRT	#it counts 3 times to fulfill trigger automatically
					has_completed_focus = PRT_NAV_aggressive
					has_opinion = { target = PRT value < -50 }
					has_opinion = { target = PRT value < -100 }
					is_justifying_wargoal_against = PRT
					PRT = { has_country_flag = reject_overture_from_HIR }
					PRT = { has_opinion = { target = HIR value < -50 } }
					PRT = { has_opinion = { target = HIR value < -100 } }
					PRT = { is_justifying_wargoal_against = HIR }
					AND = { OR = { has_government = democratic has_government = democratic_socialism has_government = communism } KYU = { OR = { has_government = fascism has_government = neutrality has_government = autocracy } } }
				}
			}
			set_country_flag = hostile_to_PRT
			log = "[THIS.GetName] chose hostile_to_PRT"
		} else = { log = "[THIS.GetName] chose NOT hostile_to_PRT" }
		# choose overal strategy
		if = {
			limit = { OR = { has_country_flag = ai_path_neutrality has_country_flag = ai_path_fascism } }	# V.O.C., fascist and monarchist path
			if = {
				limit = {
					OR = {
						any_other_country = { has_war_with_wargoal_against = { target = HIR } }
						KYU = {
							OR = {
								has_country_flag = hostile_to_KYU
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human REI
							}
						}
						PRT = {
							OR = {
								has_country_flag = hostile_to_PRT
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human REI
							}
						}
					}
				}
				set_country_flag = ai_path_aggressive
				log = "[THIS.GetName] chose alternative path / ai_path_aggressive"
			} else = { log = "[THIS.GetName] chose alternative path / NOT ai_path_aggressive" }
		} else = {	# default: democratic (same as before but also checks for aggressive REI)
			if = {
				limit = {
					OR = {
						any_other_country = { has_war_with_wargoal_against = { target = HIR } }
						KYU = {
							OR = {
								has_country_flag = hostile_to_KYU
							}
						}
						PRT = {
							OR = {
								has_country_flag = hostile_to_PRT
							}
						}
						REI = {
							OR = {
								is_embargoing = HIR
								has_war_with = HIR
								has_opinion = { target = HIR value < -50 }
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human REI
							}
						}
						is_embargoing = REI
						has_opinion = { target = REI value < -50 }
						has_world_stage_coalition_allies = yes
					}
				}
				set_country_flag = ai_path_aggressive
				log = "[THIS.GetName] chose default path / ai_path_aggressive"
			} else = { log = "[THIS.GetName] chose default path / NOT ai_path_aggressive" }
		}
	}
}