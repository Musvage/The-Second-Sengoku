# These are mostly used once per game by the AI to determine the next strategy.
# They are (mostly) activated by focuses, and will be written here lest the focus tree files are filled with repetitive code

# Initial strategies are determined by game rules and on_action files

# Common flags used:
# ai_path_neutrality
# ai_path_democratic
# ai_path_democratic_socialism
# ai_path_fascism
# ai_path_communism
# ai_path_autocracy
# initial_strategy_completed
# ai_alternative_strategy
# ai_path_aggressive
# hostile_to_[TAG]
# friendly_to_[TAG]

# EASTERNS {

SHO_choose_stategy_plan = {
	SHO = {
	
	}
} d_SHO_choose_stategy_plan = { SHO_choose_stategy_plan = yes log = "SHO_choose_stategy_plan" }

KAN_choose_stategy_plan = {
	KAN = {
	
	}
} d_KAN_choose_stategy_plan = { KAN_choose_stategy_plan = yes log = "KAN_choose_stategy_plan" }

EZO_choose_stategy_plan = {
	EZO = {
	
	}
} d_EZO_choose_stategy_plan = { EZO_choose_stategy_plan = yes log = "EZO_choose_stategy_plan" }

SHI_choose_stategy_plan = {
	SHI = {
		# choose stance on Seto Crisis (if it is going on)
	}
} d_SHI_choose_stategy_plan = { SHI_choose_stategy_plan = yes log = "SHI_choose_stategy_plan" }


KYU_choose_stategy_plan = {
	KYU = {
		# choose stance on HIR
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_HIR = opinion@HIR }
		HIR = { add_to_temp_variable = { hostility_HIR = opinion@KYU } }
		multiply_temp_variable = { hostility_HIR = -1 }
			# check ideology
		if = { limit = { left_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { center_ideology = yes HIR = { center_ideology = yes } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { left_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_country_flag = friendly_to_HIR }						add_to_temp_variable = { hostility_HIR = -100 } }
			# check other factors
		if = { limit = { has_war_with = HIR }										add_to_temp_variable = { hostility_HIR = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_HIR }				add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { is_justifying_wargoal_against = HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_wargoal_against = HIR }								add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { is_in_faction_with = HIR }									add_to_temp_variable = { hostility_HIR = -500 } }
		if = { limit = { has_completed_focus = KYU_NAV_befriend_HIR }				add_to_temp_variable = { hostility_HIR = -200 } }
		if = { limit = { is_embargoing = HIR }										add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_neutrality } }		add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_aggressive } }		add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { has_country_flag = reject_overture_from_KYU } }	add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_wargoal_against = KYU } }						add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { is_embargoing = KYU } }							add_to_temp_variable = { hostility_HIR = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_HIR > 499 } }
			clr_country_flag = friendly_to_HIR
			set_country_flag = hostile_to_HIR log = "[THIS.GetName] is hostile towards [HIR.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_HIR < -249 } }
			clr_country_flag = hostile_to_HIR
			set_country_flag = friendly_to_HIR log = "[THIS.GetName] is friendly towards [HIR.GetName]"
		} else = {
			clr_country_flag = hostile_to_HIR
			clr_country_flag = friendly_to_HIR log = "[THIS.GetName] is neutral towards [HIR.GetName]"
		}
		# choose stance on PRT
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_PRT = opinion@PRT }
		PRT = { add_to_temp_variable = { hostility_PRT = opinion@KYU } }
		multiply_temp_variable = { hostility_PRT = -1 }
			# check ideology
		if = { limit = { left_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { center_ideology = yes PRT = { center_ideology = yes } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { left_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_country_flag = friendly_to_PRT }						add_to_temp_variable = { hostility_PRT = -100 } }
			# check other factors
		if = { limit = { has_war_with = PRT }										add_to_temp_variable = { hostility_PRT = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_PRT }				add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { is_justifying_wargoal_against = PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_wargoal_against = PRT }								add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { is_in_faction_with = PRT }									add_to_temp_variable = { hostility_PRT = -500 } }
		if = { limit = { has_completed_focus = KYU_NAV_befriend_PRT }				add_to_temp_variable = { hostility_PRT = -200 } }
		if = { limit = { is_embargoing = PRT }										add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_neutrality } }		add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_aggressive } }		add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { PRT = { has_country_flag = reject_overture_from_KYU } }	add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_wargoal_against = KYU } }						add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { PRT = { is_embargoing = KYU } }							add_to_temp_variable = { hostility_PRT = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_PRT > 499 } }
			clr_country_flag = friendly_to_PRT
			set_country_flag = hostile_to_PRT log = "[THIS.GetName] is hostile towards [PRT.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_PRT < -249 } }
			clr_country_flag = hostile_to_PRT
			set_country_flag = friendly_to_PRT log = "[THIS.GetName] is friendly towards [PRT.GetName]"
		} else = {
			clr_country_flag = hostile_to_PRT
			clr_country_flag = friendly_to_PRT log = "[THIS.GetName] is neutral towards [PRT.GetName]"
		}
		# choose NAV strategy (besides PRT and HIR, KYU must check MUS/SUS since focuses about Okinawa depend on initial NAV focuses)
		set_temp_variable = { NAV_aggressivenes = opinion@MUS }
		MUS = { add_to_temp_variable = { NAV_aggressivenes = opinion@KYU } }
		multiply_temp_variable = { NAV_aggressivenes = -1 }
		add_to_temp_variable = { NAV_aggressivenes = hostility_HIR }
		add_to_temp_variable = { NAV_aggressivenes = hostility_PRT }
			# check ideology
		if = { limit = { left_ideology = yes MUS = { left_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = -100 } }
		if = { limit = { right_ideology = yes MUS = { right_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = -100 } }
		if = { limit = { center_ideology = yes MUS = { center_ideology = yes } }	add_to_temp_variable = { NAV_aggressivenes = -100 } }
		if = { limit = { right_ideology = yes MUS = { left_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = 100 } }
		if = { limit = { left_ideology = yes MUS = { right_ideology = yes } }		add_to_temp_variable = { NAV_aggressivenes = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = NAV_aggressive_strategy }				add_to_temp_variable = { NAV_aggressivenes = 100 } }
		if = { limit = { has_country_flag = NAV_friendly_strategy }					add_to_temp_variable = { NAV_aggressivenes = -100 } }
			# check other factors
		if = { limit = { has_war_with = MUS }										add_to_temp_variable = { NAV_aggressivenes = 1000 } }
		if = { limit = { is_justifying_wargoal_against = MUS }						add_to_temp_variable = { NAV_aggressivenes = 100 } }
		if = { limit = { has_wargoal_against = MUS }								add_to_temp_variable = { NAV_aggressivenes = 200 } }
		if = { limit = { is_in_faction_with = MUS }									add_to_temp_variable = { NAV_aggressivenes = -500 } }
		if = { limit = { is_embargoing = MUS }										add_to_temp_variable = { NAV_aggressivenes = 200 } }
		#if = { limit = { MUS = { has_completed_focus =  } }						add_to_temp_variable = { NAV_aggressivenes =  } }
		if = { limit = { MUS = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { NAV_aggressivenes = 200 } }
		if = { limit = { MUS = { has_wargoal_against = KYU } }						add_to_temp_variable = { NAV_aggressivenes = 400 } }
		if = { limit = { MUS = { is_embargoing = KYU } }							add_to_temp_variable = { NAV_aggressivenes = 200 } }
			# final decision
		if = {
			limit = { check_variable = { NAV_aggressivenes > 0 } }
			clr_country_flag = NAV_friendly_strategy
			set_country_flag = NAV_aggressive_strategy log = "[THIS.GetName] chose aggressive strategy (NAV)"
		} else = {
			clr_country_flag = NAV_aggressive_strategy
			set_country_flag = NAV_friendly_strategy log = "[THIS.GetName] chose friendly strategy (NAV)"
		}
		# choose stance on CHU
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_CHU = opinion@CHU }
		CHU = { add_to_temp_variable = { hostility_CHU = opinion@KYU } }
		multiply_temp_variable = { hostility_CHU = -1 }
		add_to_temp_variable = { hostility_CHU = 100 }		# historical grievances
			# check ideology
		if = { limit = { left_ideology = yes CHU = { left_ideology = yes } }		add_to_temp_variable = { hostility_CHU = -100 } }
		if = { limit = { right_ideology = yes CHU = { right_ideology = yes } }		add_to_temp_variable = { hostility_CHU = -100 } }
		if = { limit = { center_ideology = yes CHU = { center_ideology = yes } }	add_to_temp_variable = { hostility_CHU = -100 } }
		if = { limit = { right_ideology = yes CHU = { left_ideology = yes } }		add_to_temp_variable = { hostility_CHU = 100 } }
		if = { limit = { left_ideology = yes CHU = { right_ideology = yes } }		add_to_temp_variable = { hostility_CHU = 100 } }
		if = { limit = { has_global_flag = seto_crisis_active }						multiply_temp_variable = { hostility_CHU = 2 } }	# ideologial tensions are high rigth now!
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_CHU }						add_to_temp_variable = { hostility_CHU = 100 } }
		if = { limit = { has_country_flag = friendly_to_CHU }						add_to_temp_variable = { hostility_CHU = -100 } }
			# check other factors
		if = { limit = { has_war_with = CHU }										add_to_temp_variable = { hostility_CHU = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_PRT }				add_to_temp_variable = { hostility_CHU = 100 } }
		if = { limit = { is_justifying_wargoal_against = CHU }						add_to_temp_variable = { hostility_CHU = 100 } }
		if = { limit = { has_wargoal_against = CHU }								add_to_temp_variable = { hostility_CHU = 200 } }
		if = { limit = { is_in_faction_with = CHU }									add_to_temp_variable = { hostility_CHU = -500 } }
		if = { limit = { has_completed_focus = KYU_seto_crises_back_chu }			add_to_temp_variable = { hostility_CHU = -200 } }
		if = { limit = { is_embargoing = CHU }										add_to_temp_variable = { hostility_CHU = 200 } }
		if = { limit = { CHU = { has_completed_focus = CHU_aggressive_policy } }	add_to_temp_variable = { hostility_CHU = 200 } }
		if = { limit = { CHU = { has_completed_focus = CHU_spread_democracy_to_kyu } }		add_to_temp_variable = { hostility_CHU = 200 } }	# CHU wants to unify japan
		if = { limit = { CHU = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { hostility_CHU = 200 } }
		if = { limit = { CHU = { has_wargoal_against = KYU } }						add_to_temp_variable = { hostility_CHU = 400 } }
		if = { limit = { CHU = { is_embargoing = KYU } }							add_to_temp_variable = { hostility_CHU = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_CHU > 499 } }
			clr_country_flag = friendly_to_CHU
			set_country_flag = hostile_to_CHU log = "[THIS.GetName] is hostile towards [CHU.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_CHU < -249 } }
			clr_country_flag = hostile_to_CHU
			set_country_flag = friendly_to_CHU log = "[THIS.GetName] is friendly towards [CHU.GetName]"
		} else = {
			clr_country_flag = hostile_to_CHU
			clr_country_flag = friendly_to_CHU log = "[THIS.GetName] is neutral towards [CHU.GetName]"
		}
			# choose stance on SHI
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_SHI = opinion@SHI }
		SHI = { add_to_temp_variable = { hostility_SHI = opinion@KYU } }
		multiply_temp_variable = { hostility_SHI = -1 }
			# check ideology
		if = { limit = { left_ideology = yes SHI = { left_ideology = yes } }		add_to_temp_variable = { hostility_SHI = -100 } }
		if = { limit = { right_ideology = yes SHI = { right_ideology = yes } }		add_to_temp_variable = { hostility_SHI = -100 } }
		if = { limit = { center_ideology = yes SHI = { center_ideology = yes } }	add_to_temp_variable = { hostility_SHI = -100 } }
		if = { limit = { right_ideology = yes SHI = { left_ideology = yes } }		add_to_temp_variable = { hostility_SHI = 100 } }
		if = { limit = { left_ideology = yes SHI = { right_ideology = yes } }		add_to_temp_variable = { hostility_SHI = 100 } }
		if = { limit = { has_global_flag = seto_crisis_active }						multiply_temp_variable = { hostility_SHI = 2 } }	# ideologial tensions are high rigth now!
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_SHI }						add_to_temp_variable = { hostility_SHI = 100 } }
		if = { limit = { has_country_flag = friendly_to_SHI }						add_to_temp_variable = { hostility_SHI = -100 } }
			# check other factors
		if = { limit = { has_war_with = SHI }										add_to_temp_variable = { hostility_SHI = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_PRT }				add_to_temp_variable = { hostility_SHI = 100 } }
		if = { limit = { is_justifying_wargoal_against = SHI }						add_to_temp_variable = { hostility_SHI = 100 } }
		if = { limit = { has_wargoal_against = SHI }								add_to_temp_variable = { hostility_SHI = 200 } }
		if = { limit = { is_in_faction_with = SHI }									add_to_temp_variable = { hostility_SHI = -500 } }
		if = { limit = { has_completed_focus = KYU_seto_crises_back_SHI }			add_to_temp_variable = { hostility_SHI = -200 } }
		if = { limit = { is_embargoing = SHI }										add_to_temp_variable = { hostility_SHI = 200 } }
		if = { limit = { SHI = { has_completed_focus = SHI_blood_dragon } }			add_to_temp_variable = { hostility_SHI = 200 } }	# SHI wants to unify japan
		if = { limit = { SHI = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { hostility_SHI = 200 } }
		if = { limit = { SHI = { has_wargoal_against = KYU } }						add_to_temp_variable = { hostility_SHI = 400 } }
		if = { limit = { SHI = { is_embargoing = KYU } }							add_to_temp_variable = { hostility_SHI = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_SHI > 499 } }
			clr_country_flag = friendly_to_SHI
			set_country_flag = hostile_to_SHI log = "[THIS.GetName] is hostile towards [SHI.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_SHI < -249 } }
			clr_country_flag = hostile_to_SHI
			set_country_flag = friendly_to_SHI log = "[THIS.GetName] is friendly towards [SHI.GetName]"
		} else = {
			clr_country_flag = hostile_to_SHI
			clr_country_flag = friendly_to_SHI log = "[THIS.GetName] is neutral towards [SHI.GetName]"
		}
			# choose stance on IMS
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_IMS = opinion@IMS }
		IMS = { add_to_temp_variable = { hostility_IMS = opinion@KYU } }
		multiply_temp_variable = { hostility_IMS = -1 }
			# check ideology
		if = { limit = { left_ideology = yes IMS = { left_ideology = yes } }		add_to_temp_variable = { hostility_IMS = -100 } }
		if = { limit = { right_ideology = yes IMS = { right_ideology = yes } }		add_to_temp_variable = { hostility_IMS = -100 } }
		if = { limit = { center_ideology = yes IMS = { center_ideology = yes } }	add_to_temp_variable = { hostility_IMS = -100 } }
		if = { limit = { right_ideology = yes IMS = { left_ideology = yes } }		add_to_temp_variable = { hostility_IMS = 100 } }
		if = { limit = { left_ideology = yes IMS = { right_ideology = yes } }		add_to_temp_variable = { hostility_IMS = 100 } }
		if = { limit = { has_global_flag = seto_crisis_active }						multiply_temp_variable = { hostility_IMS = 2 } }	# ideologial tensions are high rigth now!
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_IMS }						add_to_temp_variable = { hostility_IMS = 100 } }
		if = { limit = { has_country_flag = friendly_to_IMS }						add_to_temp_variable = { hostility_IMS = -100 } }
			# check other factors
		if = { limit = { IMS = { num_of_controlled_states < 6 } }					add_to_temp_variable = { hostility_IMS = -200 } }	# IMS is harmelss
		if = { limit = { has_war_with = IMS }										add_to_temp_variable = { hostility_IMS = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_PRT }				add_to_temp_variable = { hostility_IMS = 100 } }
		if = { limit = { is_justifying_wargoal_against = IMS }						add_to_temp_variable = { hostility_IMS = 100 } }
		if = { limit = { has_wargoal_against = IMS }								add_to_temp_variable = { hostility_IMS = 200 } }
		if = { limit = { is_in_faction_with = IMS }									add_to_temp_variable = { hostility_IMS = -500 } }
		if = { limit = { has_completed_focus = KYU_seto_crises_back_IMS }			add_to_temp_variable = { hostility_IMS = -200 } }
		if = { limit = { is_embargoing = IMS }										add_to_temp_variable = { hostility_IMS = 200 } }
		if = { limit = { IMS = { has_completed_focus = ss_generic_modernisation } }	add_to_temp_variable = { hostility_IMS = -200 } }
		if = { limit = { IMS = { has_completed_focus = ss_generic_join_lon } }		add_to_temp_variable = { hostility_IMS = -200 } }
		if = { limit = { IMS = { has_completed_focus = ss_generic_tradition } }		add_to_temp_variable = { hostility_IMS = 200 } }
		if = { limit = { IMS = { is_justifying_wargoal_against = KYU } }			add_to_temp_variable = { hostility_IMS = 200 } }
		if = { limit = { IMS = { has_wargoal_against = KYU } }						add_to_temp_variable = { hostility_IMS = 400 } }
		if = { limit = { IMS = { is_embargoing = KYU } }							add_to_temp_variable = { hostility_IMS = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_IMS > 499 } }
			clr_country_flag = friendly_to_IMS
			set_country_flag = hostile_to_IMS log = "[THIS.GetName] is hostile towards [IMS.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_IMS < -249 } }
			clr_country_flag = hostile_to_IMS
			set_country_flag = friendly_to_IMS log = "[THIS.GetName] is friendly towards [IMS.GetName]"
		} else = {
			clr_country_flag = hostile_to_IMS
			clr_country_flag = friendly_to_IMS log = "[THIS.GetName] is neutral towards [IMS.GetName]"
		}
		# choose stance on Seto Crisis (if it is going on)
		if = {
			limit = { has_global_flag = seto_crisis_active }
			set_country_flag = seto_crisis_strategy_neutrality
			clr_country_flag = seto_crisis_strategy_back_ims
			clr_country_flag = seto_crisis_strategy_back_shi
			clr_country_flag = seto_crisis_strategy_back_chu
			if = {
				limit = {
					OR = {
						check_variable = { hostility_IMS < -200 }
						AND = {
							check_variable = { hostility_IMS < 0 }
							IMS = { focus_progress = { focus = IMS_generic_prepare_for_war progress > 0 } }
						}
					}
					OR = {
						AND = {
							check_variable = { hostility_IMS < hostility_SHI }
							check_variable = { hostility_IMS < hostility_CHU }
						}
						AND = {
							check_variable = { hostility_SHI > 200 }
							check_variable = { hostility_CHU > 200 }
						}
					}
				}
				set_country_flag = seto_crisis_strategy_back_ims clr_country_flag = seto_crisis_strategy_neutrality	# logic: if [KYU is very friendly towards IMS; OR IMS is actively persuing independence] AND [KYU is more friendly towards IMS than both SHI/CHU; OR KYU is very hostile towards both SHI/CHU] => adopt strategy to back IMS
				log = "[THIS.GetName] chose seto_crisis_strategy_back_ims"
			}
			else_if = {
				limit = {
					OR = {
						AND = {
							check_variable = { hostility_SHI < -200 }
							check_variable = { hostility_SHI < hostility_IMS }
							check_variable = { hostility_SHI < hostility_CHU }
						}
						AND = {
							check_variable = { hostility_SHI < 0 }
							has_government = fascism CHU = { has_government = fascism }
							IMS = { focus_progress = { focus = IMS_generic_government_fascism progress > 0 } }
						}
					}
					NOT = { has_government = democratic has_government = democratic_socialism has_government = communism }
				}
				set_country_flag = seto_crisis_strategy_back_shi clr_country_flag = seto_crisis_strategy_neutrality	# logic: if [KYU is friendly towards SHI; AND KYU is more friendly towards SHI than CHU/IMS] OR [KYU/SHI/IMS are ideologicaly aligned; AND KYU is not hostile towards SHI] => adopt strategy to back SHI
				log = "[THIS.GetName] chose seto_crisis_strategy_back_shi"
			}
			else_if = {
				limit = {
					OR = {
						AND = {
							check_variable = { hostility_CHU < -200 }
							check_variable = { hostility_CHU < hostility_SHI }
							check_variable = { hostility_CHU < hostility_IMS }
						}
						AND = {
							check_variable = { hostility_CHU < 0 }
							has_government = neutrality CHU = { has_government = neutrality }
							IMS = { focus_progress = { focus = IMS_generic_government_neutrality progress > 0 } }
						}
					}
					NOT = { has_government = democratic has_government = democratic_socialism has_government = communism }
				}
				set_country_flag = seto_crisis_strategy_back_chu clr_country_flag = seto_crisis_strategy_neutrality	# logic: if [KYU is friendly towards CHU; AND KYU is more friendly towards CHU than SHI/IMS] OR [KYU/CHU/IMS are ideologicaly aligned; AND KYU is not hostile towards CHU] => adopt strategy to back CHU
				log = "[THIS.GetName] chose seto_crisis_strategy_back_chu"
			}
			else = { log = "[THIS.GetName] chose seto_crisis_strategy_neutrality" }
		} else = { clr_country_flag = seto_crisis_strategy_neutrality clr_country_flag = seto_crisis_strategy_back_ims clr_country_flag = seto_crisis_strategy_back_shi clr_country_flag = seto_crisis_strategy_back_chu }
		# check end of initial strategy branches to move on to late game strategy (these are placeholders at the moment)
		if = {
			limit = {
				date > 1937.06.01
				NOT = { has_country_flag = initial_strategy_completed }
				OR = {
					AND = {
						has_country_flag = ai_path_autocracy
						has_completed_focus = KYU_technology_industry_effort
						has_completed_focus = KYU_clan_generals
						has_completed_focus = KYU_research_effort
					}
					AND = {
						has_country_flag = ai_path_neutrality
						has_completed_focus = KYU_back_koga_3
						has_completed_focus = KYU_technology_industry_effort_2
						has_completed_focus = KYU_war_council
					}
					AND = {
						has_country_flag = ai_path_fascism
						has_completed_focus = KYU_invite_nagano_2
						has_completed_focus = KYU_military_industry_effort_3
						has_completed_focus = KYU_reformed_military_academy
					}
				}
			}
			set_country_flag = initial_strategy_completed log = "[THIS.GetName] finished initial strategy"	# THIS check is duplicated in the focuses themselves as a fail-safe
		}
		# chose late game strategy
		if = {
			limit = {
				has_country_flag = initial_strategy_completed
			}
			if = {
				limit = { has_government = autocracy }
				if = {
					limit = {
						OR = {
							any_neighbor_country = {
								strength_ratio = { tag = KYU ratio > 1 }
								NOT = { is_in_faction_with = KYU }
							}
							CHU = {
								strength_ratio = { tag = KYU ratio > 1 }
								NOT = { is_in_faction_with = KYU }
							}
							SHI = {
								strength_ratio = { tag = KYU ratio > 1 }
								NOT = { is_in_faction_with = KYU }
							}
						}
					}
					set_country_flag = ai_alternative_strategy log = "[THIS.GetName] chose alternative strategy"	# logic: if any neighbor (or CHU/SHI) is too strong, go for independence path (alternative). Else, go for unification (default).
				} else = { clr_country_flag = ai_alternative_strategy log = "[THIS.GetName] chose default strategy" }
			} else_if = {
				limit = { OR = { has_government = fascism has_government = neutrality } }
				if = {
					limit = {
						has_war = no
						AND = {
							all_neighbor_country = {
								OR = {
									strength_ratio = { tag = KYU ratio < 0.75 }
									is_in_faction_with = KYU
									is_subject_of = KYU
								}
							}
							CHU = {
								OR = {
									strength_ratio = { tag = KYU ratio < 0.75 }
									is_in_faction_with = KYU
									is_subject_of = KYU
								}
							}
							SHI = {
								OR = {
									strength_ratio = { tag = KYU ratio < 0.75 }
									is_in_faction_with = KYU
									is_subject_of = KYU
								}
							}
						}
					}
					set_country_flag = ai_alternative_strategy log = "[THIS.GetName] chose alternative strategy"	# logic: if every neighbor (and CHU/SHI) is significantly weaker, go aggressive soon (alternative). Else, build up more (default). If at war, do not persue aggressive focuses.
				} else = { clr_country_flag = ai_alternative_strategy log = "[THIS.GetName] chose default strategy" }
			} else = {
				clr_country_flag = ai_alternative_strategy log = "[THIS.GetName] chose default strategy"
			}
		}
	}
} d_KYU_choose_stategy_plan = { KYU_choose_stategy_plan = yes log = "KYU_choose_stategy_plan" }

CHU_choose_stategy_plan = {
	CHU = {
		# choose stance on Seto Crisis (if it is going on)
	}
} d_CHU_choose_stategy_plan = { CHU_choose_stategy_plan = yes log = "CHU_choose_stategy_plan" }

PRO_choose_stategy_plan = {
	PRO = {
	
	}
} d_PRO_choose_stategy_plan = { PRO_choose_stategy_plan = yes log = "PRO_choose_stategy_plan" }

IMS_choose_stategy_plan = {
	IMS = {
		# choose stance on Seto Crisis (if it is going on), this mostly means waiting a few months to check if any nation of interest is a human player (SHI, KYU, CHU, REI)
	}
} d_IMS_choose_stategy_plan = { IMS_choose_stategy_plan = yes log = "IMS_choose_stategy_plan" }

AMO_choose_stategy_plan = {
	AMO = {
	
	}
} d_AMO_choose_stategy_plan = { AMO_choose_stategy_plan = yes log = "AMO_choose_stategy_plan" }

JOS_choose_stategy_plan = {
	JOS = {
	
	}
} d_JOS_choose_stategy_plan = { JOS_choose_stategy_plan = yes log = "JOS_choose_stategy_plan" }

GAN_choose_stategy_plan = {
	GAN = {
	
	}
} d_GAN_choose_stategy_plan = { GAN_choose_stategy_plan = yes log = "GAN_choose_stategy_plan" }

# } WESTERNS {

REI_choose_stategy_plan = {
	REI = {
	
	}
} d_REI_choose_stategy_plan = { REI_choose_stategy_plan = yes log = "REI_choose_stategy_plan" }

PRT_choose_stategy_plan = {
	PRT = {
		# choose stance on KYU
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_KYU = opinion@KYU }
		KYU = { add_to_temp_variable = { hostility_KYU = opinion@PRT } }
		multiply_temp_variable = { hostility_KYU = -1 }
			# check ideology
		if = { limit = { left_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { center_ideology = yes KYU = { center_ideology = yes } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { left_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_country_flag = friendly_to_KYU }						add_to_temp_variable = { hostility_KYU = -100 } }
			# check other factors
		if = { limit = { has_war_with = KYU }										add_to_temp_variable = { hostility_KYU = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_KYU }				add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { is_justifying_wargoal_against = KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_wargoal_against = KYU }								add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { is_in_faction_with = KYU }									add_to_temp_variable = { hostility_KYU = -500 } }
		if = { limit = { has_completed_focus = PRT_NAV_befriend_KYU }				add_to_temp_variable = { hostility_KYU = -200 } }
		if = { limit = { is_embargoing = KYU }										add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_neutrality } }		add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_pan_asianism } }			add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_aggressive } }		add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { has_country_flag = reject_overture_from_PRT } }	add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { is_justifying_wargoal_against = PRT } }			add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_wargoal_against = PRT } }						add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { is_embargoing = PRT } }							add_to_temp_variable = { hostility_KYU = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_KYU > 499 } }
			clr_country_flag = friendly_to_KYU
			set_country_flag = hostile_to_KYU log = "[THIS.GetName] is hostile towards [KYU.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_KYU < -249 } }
			clr_country_flag = hostile_to_KYU
			set_country_flag = friendly_to_KYU log = "[THIS.GetName] is friendly towards [KYU.GetName]"
		} else = {
			clr_country_flag = hostile_to_KYU
			clr_country_flag = friendly_to_KYU log = "[THIS.GetName] is neutral towards [KYU.GetName]"
		}
		# choose stance on HIR
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_HIR = opinion@HIR }
		HIR = { add_to_temp_variable = { hostility_HIR = opinion@PRT } }
		multiply_temp_variable = { hostility_HIR = -1 }
			# check ideology
		if = { limit = { left_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { center_ideology = yes HIR = { center_ideology = yes } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { right_ideology = yes HIR = { left_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { left_ideology = yes HIR = { right_ideology = yes } }		add_to_temp_variable = { hostility_HIR = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_country_flag = friendly_to_HIR }						add_to_temp_variable = { hostility_HIR = -100 } }
			# check other factors
		if = { limit = { has_war_with = HIR }										add_to_temp_variable = { hostility_HIR = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_HIR }				add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { is_justifying_wargoal_against = HIR }						add_to_temp_variable = { hostility_HIR = 100 } }
		if = { limit = { has_wargoal_against = HIR }								add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { is_in_faction_with = HIR }									add_to_temp_variable = { hostility_HIR = -500 } }
		if = { limit = { has_completed_focus = PRT_NAV_befriend_HIR }				add_to_temp_variable = { hostility_HIR = -200 } }
		if = { limit = { is_embargoing = HIR }										add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_HIR = -100 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_neutrality } }		add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_completed_focus = HIR_NAV_aggressive } }		add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { has_country_flag = reject_overture_from_PRT } }	add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { is_justifying_wargoal_against = PRT } }			add_to_temp_variable = { hostility_HIR = 200 } }
		if = { limit = { HIR = { has_wargoal_against = PRT } }						add_to_temp_variable = { hostility_HIR = 400 } }
		if = { limit = { HIR = { is_embargoing = PRT } }							add_to_temp_variable = { hostility_HIR = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_HIR > 499 } }
			clr_country_flag = friendly_to_HIR
			set_country_flag = hostile_to_HIR log = "[THIS.GetName] is hostile towards [HIR.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_HIR < -249 } }
			clr_country_flag = hostile_to_HIR
			set_country_flag = friendly_to_HIR log = "[THIS.GetName] is friendly towards [HIR.GetName]"
		} else = {
			clr_country_flag = hostile_to_HIR
			clr_country_flag = friendly_to_HIR log = "[THIS.GetName] is neutral towards [HIR.GetName]"
		}
		# choose NAV strategy
		if = {
			limit = { NOT = { has_country_flag = NAV_aggressive_strategy has_country_flag = NAV_friendly_strategy } }
			if = {
				limit = { has_country_flag = hostile_to_HIR has_country_flag = hostile_to_KYU }
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_HIR
					check_variable = { hostility_KYU > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_KYU
					check_variable = { hostility_HIR > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					NOT = { has_country_flag = hostile_to_HIR }
					NOT = { has_country_flag = hostile_to_KYU }
				}
				set_country_flag = NAV_friendly_strategy	log = "[THIS.GetName] chose NAV_friendly_strategy"
			}
		} else = {
			if = { limit = { has_country_flag = NAV_friendly_strategy } log = "[THIS.GetName] chose NAV_friendly_strategy" }
			if = { limit = { has_country_flag = NAV_aggressive_strategy } log = "[THIS.GetName] chose NAV_aggressive_strategy" }
		}
		# choose overal strategy
		if = {
			limit = {
				date > 1937.06.01
				NOT = { has_country_flag = initial_strategy_completed }
				OR = {
					AND = {
						has_country_flag = ai_path_neutrality
						has_completed_focus = PRT_create_arsenal_alfeite
						has_completed_focus = PRT_extra_research_2
						has_completed_focus = PRT_cult_of_personality
					}
					AND = {
						OR = { has_country_flag = ai_path_autocracy has_country_flag = ai_path_fascism }
						has_completed_focus = PRT_create_ogma
						has_completed_focus = PRT_develop_african_industry
						has_completed_focus = PRT_local_dockyards
					}
					AND = {
						OR = { has_country_flag = ai_path_democratic has_country_flag = ai_path_democratic_socialism }
						has_completed_focus = PRT_religious_syncretism
						has_completed_focus = PRT_integrate_market
						has_completed_focus = PRT_free_elections
					}
				}
			}
			set_country_flag = initial_strategy_completed log = "[THIS.GetName] finished initial strategy"	# THIS check is duplicated in the focuses themselves as a fail-safe
		}
		if = {
			limit = {
				OR = {
					any_other_country = { is_justifying_wargoal_against = PRT }
					any_other_country = { has_wargoal_against = PRT }
					has_global_flag = world_stage_devolution_of_macau
					KYU = { has_country_flag = reject_overture_from_PRT OR = { has_completed_focus = KYU_pan_asianism has_completed_focus = KYU_NAV_aggressive } }
					AND = { NOT = { clr_global_flag = modus_vivendi_pacific } has_global_flag = world_stage_world_war_2_is_active }
				}
			}
			set_country_flag = ai_alternative_strategy	log = "[THIS.GetName] chose alternative/aggressive strategy"
		} else = { clr_country_flag = ai_alternative_strategy	log = "[THIS.GetName] chose default/isolacionist strategy" }
	}
} d_PRT_choose_stategy_plan = { PRT_choose_stategy_plan = yes log = "PRT_choose_stategy_plan" }

KOB_choose_stategy_plan = {
	KOB = {
	
	}
} d_KOB_choose_stategy_plan = { KOB_choose_stategy_plan = yes log = "KOB_choose_stategy_plan" }

OSA_choose_stategy_plan = {
	OSA = {
	
	}
} d_OSA_choose_stategy_plan = { OSA_choose_stategy_plan = yes log = "OSA_choose_stategy_plan" }

AMC_choose_stategy_plan = {
	OKI = {
	
	}
} d_AMC_choose_stategy_plan = { AMC_choose_stategy_plan = yes log = "AMC_choose_stategy_plan" }

OKI_choose_stategy_plan = {
	OKI = {
	
	}
}  d_OKI_choose_stategy_plan = { OKI_choose_stategy_plan = yes log = "OKI_choose_stategy_plan" }

FER_choose_stategy_plan = {
	FER = {
	
	}
}  d_FER_choose_stategy_plan = { FER_choose_stategy_plan = yes log = "FER_choose_stategy_plan" }

HIR_choose_stategy_plan = {
	HIR = {
		# choose stance on KYU
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_KYU = opinion@KYU }
		KYU = { add_to_temp_variable = { hostility_KYU = opinion@HIR } }
		multiply_temp_variable = { hostility_KYU = -1 }
			# check ideology
		if = { limit = { left_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { center_ideology = yes KYU = { center_ideology = yes } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { right_ideology = yes KYU = { left_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { left_ideology = yes KYU = { right_ideology = yes } }		add_to_temp_variable = { hostility_KYU = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_country_flag = friendly_to_KYU }						add_to_temp_variable = { hostility_KYU = -100 } }
			# check other factors
		if = { limit = { has_war_with = KYU }										add_to_temp_variable = { hostility_KYU = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_KYU }				add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { is_justifying_wargoal_against = KYU }						add_to_temp_variable = { hostility_KYU = 100 } }
		if = { limit = { has_wargoal_against = KYU }								add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { is_in_faction_with = KYU }									add_to_temp_variable = { hostility_KYU = -500 } }
		if = { limit = { has_completed_focus = HIR_NAV_befriend_KYU }				add_to_temp_variable = { hostility_KYU = -200 } }
		if = { limit = { is_embargoing = KYU }										add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_KYU = -100 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_neutrality } }		add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_completed_focus = KYU_NAV_aggressive } }		add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { has_completed_focus = KYU_pan_asianism } }			add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { has_country_flag = reject_overture_from_HIR } }	add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { is_justifying_wargoal_against = HIR } }			add_to_temp_variable = { hostility_KYU = 200 } }
		if = { limit = { KYU = { has_wargoal_against = HIR } }						add_to_temp_variable = { hostility_KYU = 400 } }
		if = { limit = { KYU = { is_embargoing = HIR } }							add_to_temp_variable = { hostility_KYU = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_KYU > 499 } }
			clr_country_flag = friendly_to_KYU
			set_country_flag = hostile_to_KYU log = "[THIS.GetName] is hostile towards [KYU.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_KYU < -249 } }
			clr_country_flag = hostile_to_KYU
			set_country_flag = friendly_to_KYU log = "[THIS.GetName] is friendly towards [KYU.GetName]"
		} else = {
			clr_country_flag = hostile_to_KYU
			clr_country_flag = friendly_to_KYU log = "[THIS.GetName] is neutral towards [KYU.GetName]"
		}
		# choose stance on PRT
			# check opinion (positive relations decrease hostility)
		set_temp_variable = { hostility_PRT = opinion@PRT }
		PRT = { add_to_temp_variable = { hostility_PRT = opinion@HIR } }
		multiply_temp_variable = { hostility_PRT = -1 }
			# check ideology
		if = { limit = { left_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { center_ideology = yes PRT = { center_ideology = yes } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { right_ideology = yes PRT = { left_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { left_ideology = yes PRT = { right_ideology = yes } }		add_to_temp_variable = { hostility_PRT = 100 } }
			# previous decisions
		if = { limit = { has_country_flag = hostile_to_PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_country_flag = friendly_to_PRT }						add_to_temp_variable = { hostility_PRT = -100 } }
			# check other factors
		if = { limit = { has_war_with = PRT }										add_to_temp_variable = { hostility_PRT = 1000 } }
		if = { limit = { has_country_flag = reject_overture_from_PRT }				add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { is_justifying_wargoal_against = PRT }						add_to_temp_variable = { hostility_PRT = 100 } }
		if = { limit = { has_wargoal_against = PRT }								add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { is_in_faction_with = PRT }									add_to_temp_variable = { hostility_PRT = -500 } }
		if = { limit = { has_completed_focus = HIR_NAV_befriend_PRT }				add_to_temp_variable = { hostility_PRT = -200 } }
		if = { limit = { is_embargoing = PRT }										add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_active_diplomacy } }	add_to_temp_variable = { hostility_PRT = -100 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_neutrality } }		add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_completed_focus = PRT_NAV_aggressive } }		add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { PRT = { has_country_flag = reject_overture_from_HIR } }	add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { is_justifying_wargoal_against = HIR } }			add_to_temp_variable = { hostility_PRT = 200 } }
		if = { limit = { PRT = { has_wargoal_against = HIR } }						add_to_temp_variable = { hostility_PRT = 400 } }
		if = { limit = { KYU = { is_embargoing = HIR } }							add_to_temp_variable = { hostility_PRT = 200 } }
			# final decision
		if = {
			limit = { check_variable = { hostility_PRT > 499 } }
			clr_country_flag = friendly_to_PRT
			set_country_flag = hostile_to_PRT log = "[THIS.GetName] is hostile towards [PRT.GetName]"
		} else_if = {
			limit = { check_variable = { hostility_PRT < -249 } }
			clr_country_flag = hostile_to_PRT
			set_country_flag = friendly_to_PRT log = "[THIS.GetName] is friendly towards [PRT.GetName]"
		} else = {
			clr_country_flag = hostile_to_PRT
			clr_country_flag = friendly_to_PRT log = "[THIS.GetName] is neutral towards [PRT.GetName]"
		}
		# choose NAV strategy
		if = {
			limit = { NOT = { has_country_flag = NAV_aggressive_strategy has_country_flag = NAV_friendly_strategy } }
			if = {
				limit = { has_country_flag = hostile_to_PRT has_country_flag = hostile_to_KYU }
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_PRT
					check_variable = { hostility_KYU > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					has_country_flag = hostile_to_KYU
					check_variable = { hostility_PRT > 249 }
				}
				set_country_flag = NAV_aggressive_strategy	log = "[THIS.GetName] chose NAV_aggressive_strategy"
			} else_if = {
				limit = {
					NOT = { has_country_flag = hostile_to_PRT }
					NOT = { has_country_flag = hostile_to_KYU }
				}
				set_country_flag = NAV_friendly_strategy	log = "[THIS.GetName] chose NAV_friendly_strategy"
			}
		} else = {
			if = { limit = { has_country_flag = NAV_friendly_strategy } log = "[THIS.GetName] chose NAV_friendly_strategy" }
			if = { limit = { has_country_flag = NAV_aggressive_strategy } log = "[THIS.GetName] chose NAV_aggressive_strategy" }
		}
		# choose overal strategy
		if = {
			limit = { OR = { has_country_flag = ai_path_neutrality has_country_flag = ai_path_autocracy has_country_flag = ai_path_fascism } }	# V.O.C., fascist and monarchist path
			if = {
				limit = {
					OR = {
						any_other_country = { has_war_with_wargoal_against = { target = HIR } }
						KYU = {
							OR = {
								has_country_flag = hostile_to_HIR
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human HIR
							}
						}
						PRT = {
							OR = {
								has_country_flag = hostile_to_HIR
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human HIR
							}
						}
					}
				}
				set_country_flag = ai_alternative_strategy
				log = "[THIS.GetName] chose alternative path / ai_path_aggressive"
			} else = { log = "[THIS.GetName] chose alternative path / NOT ai_path_aggressive" }
		} else = {	# default: democratic (same as before but also checks for aggressive REI)
			if = {
				limit = {
					OR = {
						any_other_country = { has_war_with_wargoal_against = { target = HIR } }
						KYU = {
							OR = {
								has_country_flag = hostile_to_KYU
							}
						}
						PRT = {
							OR = {
								has_country_flag = hostile_to_PRT
							}
						}
						REI = {
							OR = {
								is_embargoing = HIR
								has_war_with = HIR
								has_opinion = { target = HIR value < -50 }
								AND = { is_ai = no difficulty > 4 }	# extra difficulty for human REI
							}
						}
						is_embargoing = REI
						has_opinion = { target = REI value < -50 }
						has_world_stage_coalition_allies = yes
					}
				}
				set_country_flag = ai_alternative_strategy
				log = "[THIS.GetName] chose default path / ai_path_aggressive"
			} else = { log = "[THIS.GetName] chose default path / NOT ai_path_aggressive" }
		}
	}
} d_HIR_choose_stategy_plan = { HIR_choose_stategy_plan = yes log = "HIR_choose_stategy_plan" }

# } DEBUG

choose_ai_strategy = {
	every_country = {
		if = {
			limit = { is_ai = yes }
			if = { limit = { tag = SHO } SHO_choose_stategy_plan = yes }
			if = { limit = { tag = KAN } KAN_choose_stategy_plan = yes }
			if = { limit = { tag = EZO } EZO_choose_stategy_plan = yes }
			if = { limit = { tag = SHI } SHI_choose_stategy_plan = yes }
			if = { limit = { tag = KYU } KYU_choose_stategy_plan = yes }
			if = { limit = { tag = CHU } CHU_choose_stategy_plan = yes }
			if = { limit = { tag = PRO } PRO_choose_stategy_plan = yes }
			if = { limit = { tag = IMS } IMS_choose_stategy_plan = yes }
			if = { limit = { tag = AMO } AMO_choose_stategy_plan = yes }
			if = { limit = { tag = JOS } JOS_choose_stategy_plan = yes }
			if = { limit = { tag = GAN } GAN_choose_stategy_plan = yes }
			if = { limit = { tag = REI } REI_choose_stategy_plan = yes }
			if = { limit = { tag = PRT } PRT_choose_stategy_plan = yes }
			if = { limit = { tag = KOB } KOB_choose_stategy_plan = yes }
			if = { limit = { tag = OSA } OSA_choose_stategy_plan = yes }
			if = { limit = { tag = AMC } AMC_choose_stategy_plan = yes }
			if = { limit = { tag = OKI } OKI_choose_stategy_plan = yes }
			if = { limit = { tag = FER } FER_choose_stategy_plan = yes }
			if = { limit = { tag = HIR } HIR_choose_stategy_plan = yes }
		} else = { log = "[THIS.GetName] is not AI" }
	}
} d_choose_ai_strategy = { choose_ai_strategy = yes log = "choose_ai_strategy (DEBUG)"}


## in SS_generic_triggers.txt:

#left_ideology = {
#	OR = {
#		has_government = democratic_socialism
#		has_government = communism
#	}
#}

#right_ideology = {
#	OR = {
#		has_government = fascism
#		has_government = autocracy
#	}
#}

#center_ideology = {
#	OR = {
#		has_government = democratic
#		has_government = neutrality
#	}
#}