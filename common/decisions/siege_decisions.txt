siege_category = {

	siege_defend_29 = {	# Edo
		icon = siege_defend
		
		custom_cost_trigger = {
			always = no
			#check_variable = { num_of_available_civilian_factories > 0 }	### IT SHOULD NEVER BE AVAILABLE
		}
		
		custom_cost_text = siege_defend_29_cost_tt
		
		available = {
			29 = { has_state_flag = is_under_siege }
			#always = yes
		}
		visible = {
			OR = {
				controls_state = 29
				any_allied_country = { controls_state = 29 }
			}
			any_enemy_country = { controls_province = 1658 }
			any_enemy_country = { controls_province = 1342 }
			any_enemy_country = { controls_province = 932 }
			any_enemy_country = { controls_province = 770 }
			any_enemy_country = { controls_province = 3703 }
			any_enemy_country = { controls_province = 53 }
			check_variable = { global.29_siege_progress > 0.01 }
		}
		
		#state_target = yes

		highlight_states = {
			state = 29
		}
		
		is_good = no
		#on_map_mode = map_and_decisions_view
		#highlight_color_while_active = 1
		
		complete_effect = {
			if = {
				limit = { is_debug = yes }
				custom_effect_tooltip = "siege progress: [?global.29_siege_progress]/1."
				custom_effect_tooltip = "the siege lasted [?global.29_siege_progress_days] days so far."
			}
		}
	}

	siege_attack_29 = { # Edo
		icon = siege_attack
		
		custom_cost_trigger = {
			always = no
			#check_variable = { num_of_available_civilian_factories > 0 }	### IT SHOULD NEVER BE AVAILABLE
		}
		
		custom_cost_text = siege_attack_29_cost_tt
		
		available = {
			29 = { has_state_flag = is_under_siege }
			#always = yes
		}
		
		visible = {
			any_enemy_country = { controls_state = 29 }
			check_variable = { global.29_siege_progress > 0.01 }
			OR = {
				OR = {
					controls_province = 1658
					any_allied_country = { controls_province = 1658 }
				}
				OR = {
					controls_province = 1342
					any_allied_country = { controls_province = 1342 }
				}
				OR = {
					controls_province = 932
					any_allied_country = { controls_province = 932 }
				}
				OR = {
					controls_province = 770
					any_allied_country = { controls_province = 770 }
				}
				OR = {
					controls_province = 3703
					any_allied_country = { controls_province = 3703 }
				}
				OR = {
					controls_province = 53
					any_allied_country = { controls_province = 53 }
				}
			}
		}
		
		#state_target = yes

		highlight_states = {
			state = 29
		}
		
		is_good = yes
		#on_map_mode = map_and_decisions_view
		#highlight_color_while_active = 1
		
		complete_effect = {
			if = {
				limit = { is_debug = yes }
				custom_effect_tooltip = "siege progress: [?global.29_siege_progress]/1."
				custom_effect_tooltip = "the siege lasted [?global.29_siege_progress_days] days so far."
			}
		}
	}
	
	siege_defend_211 = {	# Edo
		icon = siege_defend
		
		custom_cost_trigger = {
			always = no
			#check_variable = { num_of_available_civilian_factories > 0 }	### IT SHOULD NEVER BE AVAILABLE
		}
		
		custom_cost_text = siege_defend_211_cost_tt
		
		available = {
			211 = { has_state_flag = is_under_siege }
			#always = yes
		}
		visible = {
			OR = {
				controls_state = 191
				any_allied_country = { controls_state = 211 }
			}
			any_enemy_country = { controls_province = 220 }
			any_enemy_country = { controls_province = 3425 }
			any_enemy_country = { controls_province = 3388 }
			any_enemy_country = { controls_province = 1365 }
			any_enemy_country = { controls_province = 3440 }
			any_enemy_country = { controls_province = 113 }
			any_enemy_country = { controls_province = 1430 }
			check_variable = { global.211_siege_progress > 0.01 }
		}
		
		#state_target = yes

		highlight_states = {
			state = 211
		}
		
		is_good = no
		#on_map_mode = map_and_decisions_view
		#highlight_color_while_active = 1
		
		complete_effect = {
			if = {
				limit = { is_debug = yes }
				custom_effect_tooltip = "siege progress: [?global.211_siege_progress]/1."
				custom_effect_tooltip = "the siege lasted [?global.211_siege_progress_days] days so far."
			}
		}
	}

	siege_attack_211 = { # Edo
		icon = siege_attack
		
		custom_cost_trigger = {
			always = no
			#check_variable = { num_of_available_civilian_factories > 0 }	### IT SHOULD NEVER BE AVAILABLE
		}
		
		custom_cost_text = siege_attack_211_cost_tt
		
		available = {
			211 = { has_state_flag = is_under_siege }
			#always = yes
		}
		
		visible = {
			any_enemy_country = { controls_state = 211 }
			check_variable = { global.211_siege_progress > 0.01 }
			OR = {
				OR = {
					controls_province = 220
					any_allied_country = { controls_province = 220 }
				}
				OR = {
					controls_province = 3425
					any_allied_country = { controls_province = 3425 }
				}
				OR = {
					controls_province = 3388
					any_allied_country = { controls_province = 3388 }
				}
				OR = {
					controls_province = 1365
					any_allied_country = { controls_province = 1365 }
				}
				OR = {
					controls_province = 3440
					any_allied_country = { controls_province = 3440 }
				}
				OR = {
					controls_province = 113
					any_allied_country = { controls_province = 113 }
				}
				OR = {
					controls_province = 1430
					any_allied_country = { controls_province = 1430 }
				}
			}
		}
		
		#state_target = yes

		highlight_states = {
			state = 211
		}
		
		is_good = yes
		#on_map_mode = map_and_decisions_view
		#highlight_color_while_active = 1
		
		complete_effect = {
			if = {
				limit = { is_debug = yes }
				custom_effect_tooltip = "siege progress: [?global.211_siege_progress]/1."
				custom_effect_tooltip = "the siege lasted [?global.211_siege_progress_days] days so far."
			}
		}
	}
}