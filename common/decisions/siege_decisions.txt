siege_category = {

	29_siege_warning_owner = {	# Edo
		icon = trade_interrupted_western
		
		custom_cost_trigger = {
			always = no
			#check_variable = { num_of_available_civilian_factories > 0 }	### IT SHOULD NEVER BE AVAILABLE
		}
		
		custom_cost_text = PRO_improve_tools_cost	###PLACEHOLDER - it will be a "siege progress"
		
		available = {
			29 = { has_state_flag = is_under_siege }
			always = yes
		}
		visible = {
			OR = {
				controls_state = 29
				any_allied_country = { controls_state = 29 }
			}
			any_enemy_country = { controls_province = 3722 }
			any_enemy_country = { controls_province = 1342 }
			any_enemy_country = { controls_province = 932 }
			any_enemy_country = { controls_province = 770 }
			any_enemy_country = { controls_province = 3703 }
			any_enemy_country = { controls_province = 53 }
			check_variable = { global.29_siege_progress > 0.01 }
		}
		
		#state_target = yes

		#highlight_states = {
		#	state = 29
		#}
		
		is_good = no
		#on_map_mode = map_and_decisions_view
		#highlight_color_while_active = 1
		
		complete_effect = {
			custom_effect_tooltip = "siege progress: [?global.29_siege_progress]/1."
			custom_effect_tooltip = "the siege lasted [?global.29_siege_progress_days] days so far."
		}
	}

	29_siege_warning_atacker = { # Edo
		icon = trade_interrupted_western
		
		custom_cost_trigger = {
			always = no
			#check_variable = { num_of_available_civilian_factories > 0 }	### IT SHOULD NEVER BE AVAILABLE
		}
		
		custom_cost_text = PRO_improve_tools_cost	###PLACEHOLDER - it will be a "siege progress"
		
		available = {
			29 = { has_state_flag = is_under_siege }
			always = yes
		}
		
		visible = {
			any_enemy_country = { controls_state = 29 }
			check_variable = { global.29_siege_progress > 0.01 }
			OR = {
				OR = {
					controls_province = 3722
					any_allied_country = { controls_province = 3722 }
				}
				OR = {
					controls_province = 1342
					any_allied_country = { controls_province = 1342 }
				}
				OR = {
					controls_province = 932
					any_allied_country = { controls_province = 932 }
				}
				OR = {
					controls_province = 770
					any_allied_country = { controls_province = 770 }
				}
				OR = {
					controls_province = 3703
					any_allied_country = { controls_province = 3703 }
				}
				OR = {
					controls_province = 53
					any_allied_country = { controls_province = 53 }
				}
			}
		}
		
		#state_target = yes

		#highlight_states = {
		#	state = 29
		#}
		
		is_good = yes
		#on_map_mode = map_and_decisions_view
		#highlight_color_while_active = 1
		
		complete_effect = {
			custom_effect_tooltip = "siege progress: [?global.29_siege_progress]/1."
			custom_effect_tooltip = "the siege lasted [?global.29_siege_progress_days] days so far."
		}
	}
}