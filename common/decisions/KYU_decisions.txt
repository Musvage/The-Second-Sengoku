KYU_army_reforms_category = {

	KYU_upgrade_artillery_adviser = {
		
		icon = GFX_decision_generic_civil_support
		
		allowed = { original_tag = KYU }
		
		available = {
			any_character = { has_trait = army_artillery_0 }
		}
		
		#visible = {  }
		
		cost = 50
		
		fire_only_once = yes
		
		remove_effect = {
			random_character = {
				limit = { has_trait = army_artillery_0 }
				hidden_effect = {
					if = { limit = { is_hired_as_advisor = yes } set_character_flag = hire_again PREV = { deactivate_advisor = KYU_adviser_army_artillery } }
					remove_advisor_role = { slot = high_command }
					random_list = {
						2 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 50
									idea_token = KYU_adviser_army_artillery
									traits = {
										army_artillery_1
									}
								}
							}
						}
						1 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 100
									idea_token = KYU_adviser_army_artillery
									traits = {
										army_artillery_2
									}
								}
							}
						}
					}
				}
				effect_tooltip = { 
					random_list = {
						1 = {
							add_trait = {
								 slot = high_command
								 trait = army_artillery_1
							}
						}
						2 = {
							add_trait = {
								 slot = high_command
								 trait = army_artillery_2
							}
						}
					}
				}
				hidden_effect = { if = { limit = { has_character_flag = hire_again } clr_character_flag = hire_again PREV = { activate_advisor = KYU_adviser_army_artillery } } }
			}
		}
	}
	
	KYU_upgrade_cavalry_adviser = {
		
		icon = GFX_decision_generic_civil_support
		
		allowed = { original_tag = KYU }
		
		available = {
			any_character = { has_trait = army_cavalry_0 }
		}
		
		#visible = {  }
		
		cost = 50
		
		fire_only_once = yes
		
		remove_effect = {
			random_character = {
				limit = { has_trait = army_cavalry_0 }
				hidden_effect = {
					if = { limit = { is_hired_as_advisor = yes } set_character_flag = hire_again PREV = { deactivate_advisor = KYU_adviser_cavalry } }
					remove_advisor_role = { slot = high_command }
					random_list = {
						2 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 50
									idea_token = KYU_adviser_cavalry
									traits = {
										army_cavalry_1
									}
								}
							}
						}
						1 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 100
									idea_token = KYU_adviser_cavalry
									traits = {
										army_cavalry_2
									}
								}
							}
						}
					}
				}
				effect_tooltip = { 
					random_list = {
						2 = {
							add_trait = {
								 slot = high_command
								 trait = army_cavalry_1
							}
						}
						1 = {
							add_trait = {
								 slot = high_command
								 trait = army_cavalry_2
							}
						}
					}
				}
				hidden_effect = { if = { limit = { has_character_flag = hire_again } clr_character_flag = hire_again PREV = { activate_advisor = KYU_adviser_cavalry } } }
			}
		}
	}
	
	KYU_upgrade_logistics_adviser = {
		
		icon = GFX_decision_generic_civil_support
		
		allowed = { original_tag = KYU }
		
		available = {
			any_character = { has_trait = army_logistics_0 }
		}
		
		#visible = {  }
		
		cost = 50
		
		fire_only_once = yes
		
		remove_effect = {
			random_character = {
				limit = { has_trait = army_logistics_0 }
				hidden_effect = {
					if = { limit = { is_hired_as_advisor = yes } set_character_flag = hire_again PREV = { deactivate_advisor = KYU_adviser_army_logistics } }
					remove_advisor_role = { slot = high_command }
					random_list = {
						2 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 50
									idea_token = KYU_adviser_army_logistics
									traits = {
										army_logistics_1
									}
								}
							}
						}
						1 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 100
									idea_token = KYU_adviser_army_logistics
									traits = {
										army_logistics_2
									}
								}
							}
						}
					}
				}
				effect_tooltip = { 
					random_list = {
						2 = {
							add_trait = {
								 slot = high_command
								 trait = army_logistics_1
							}
						}
						1 = {
							add_trait = {
								 slot = high_command
								 trait = army_logistics_2
							}
						}
					}
				}
				hidden_effect = { if = { limit = { has_character_flag = hire_again } clr_character_flag = hire_again PREV = { activate_advisor = KYU_adviser_army_logistics } } }
			}
		}
	}
	
	KYU_upgrade_division_limit_adviser = {
		
		icon = GFX_decision_generic_civil_support
		
		allowed = { original_tag = KYU }
		
		available = {
			any_character = { has_trait = army_division_limit_0 }
		}
		
		#visible = {  }
		
		cost = 50
		
		fire_only_once = yes
		
		remove_effect = {
			random_character = {
				limit = { has_trait = army_division_limit_0 }
				hidden_effect = {
					if = { limit = { is_hired_as_advisor = yes } set_character_flag = hire_again PREV = { deactivate_advisor = KYU_army_adviser_division_limit } }
					remove_advisor_role = { slot = high_command }
					random_list = {
						2 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 50
									idea_token = KYU_army_adviser_division_limit
									traits = {
										army_logistics_1
									}
								}
							}
						}
						1 = {
							add_advisor_role = {
								advisor = {
									slot = high_command
									cost = 100
									idea_token = KYU_army_adviser_division_limit
									traits = {
										army_division_limit_2
									}
								}
							}
						}
					}
				}
				effect_tooltip = { 
					random_list = {
						2 = {
							add_trait = {
								 slot = high_command
								 trait = army_division_limit_1
							}
						}
						1 = {
							add_trait = {
								 slot = high_command
								 trait = army_division_limit_2
							}
						}
					}
				}
				hidden_effect = { if = { limit = { has_character_flag = hire_again } clr_character_flag = hire_again PREV = { activate_advisor = KYU_army_adviser_division_limit } } }
			}
		}
	}
	
	KYU_upgrade_offensive_adviser = {
		
		icon = GFX_decision_generic_civil_support
		
		allowed = { original_tag = KYU }
		
		available = {
			any_character = { has_trait = army_chief_offensive_0 }
		}
		
		#visible = {  }
		
		cost = 50
		
		fire_only_once = yes
		
		remove_effect = {
			random_character = {
				limit = { has_trait = army_chief_offensive_0 }
				hidden_effect = {
					if = { limit = { is_hired_as_advisor = yes } set_character_flag = hire_again PREV = { deactivate_advisor = KYU_adviser_army_offensive } }
					remove_advisor_role = { slot = army_chief }
					random_list = {
						2 = {
							add_advisor_role = {
								advisor = {
									slot = army_chief
									cost = 50
									idea_token = KYU_adviser_army_offensive
									traits = {
										army_chief_offensive_1
									}
								}
							}
						}
						1 = {
							add_advisor_role = {
								advisor = {
									slot = army_chief
									cost = 100
									idea_token = KYU_adviser_offensive
									traits = {
										army_chief_offensive_2
									}
								}
							}
						}
					}
				}
				effect_tooltip = { 
					random_list = {
						2 = {
							add_trait = {
								 slot = army_chief
								 trait = army_chief_offensive_1
							}
						}
						1 = {
							add_trait = {
								 slot = army_chief
								 trait = army_chief_offensive_2
							}
						}
					}
				}
				hidden_effect = { if = { limit = { has_character_flag = hire_again } clr_character_flag = hire_again PREV = { activate_advisor = KYU_adviser_army_offensive } } }
			}
		}
	}
	
	KYU_upgrade_defensive_adviser = {
		
		icon = GFX_decision_generic_civil_support
		
		allowed = { original_tag = KYU }
		
		available = {
			any_character = { has_trait = army_chief_defensive_0 }
		}
		
		#visible = {  }
		
		cost = 50
		
		fire_only_once = yes
		
		remove_effect = {
			random_character = {
				limit = { has_trait = army_chief_defensive_0 }
				hidden_effect = {
					if = { limit = { is_hired_as_advisor = yes } set_character_flag = hire_again PREV = { deactivate_advisor = KYU_adviser_army_defensive } } }
					remove_advisor_role = { slot = army_chief }
					random_list = {
						2 = {
							add_advisor_role = {
								advisor = {
									slot = army_chief
									cost = 50
									idea_token = KYU_adviser_army_defensive
									traits = {
										army_chief_defensive_1
									}
								}
							}
						}
						1 = {
							add_advisor_role = {
								advisor = {
									slot = army_chief
									cost = 100
									idea_token = KYU_adviser_defensive
									traits = {
										army_chief_defensive_2
									}
								}
							}
						}
					}
				}
				effect_tooltip = { 
					random_list = {
						2 = {
							add_trait = {
								 slot = army_chief
								 trait = army_chief_defensive_1
							}
						}
						1 = {
							add_trait = {
								 slot = army_chief
								 trait = army_chief_defensive_2
							}
						}
					}
				}
				hidden_effect = { if = { limit = { has_character_flag = hire_again } clr_character_flag = hire_again PREV = { activate_advisor = KYU_adviser_army_defensive } } }
			}
		}
	}
}



### OLD BELLOW
### OLD BELLOW
### OLD BELLOW
### OLD BELLOW

KYU_new_generals_category = {

	KYU_Mitsumasa = {

		allowed = {
			original_tag = KYU
		}

		available = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		complete_effect = {
			remove_unit_leader = 56
			create_corps_commander = {
				name = "Mitsumasa Yonai"
					picture = "Portrait_KYU_Mitsumasa_Yonai.dds"
				traits = { inflexible_strategist trait_reckless }
				
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 3
			}
			hidden_effect = {
				if = {
					limit = {
						AND = {
							has_country_flag = first_general
							has_country_flag = second_general
						}
					}
					clr_country_flag = first_general
				}
				else_if = {
					limit = {
						AND = {
							NOT = { has_country_flag = first_general }
							has_country_flag = second_general
						}
					}
					clr_country_flag = second_general
				}
			}
		}
	}
	
	KYU_Nobutake = {

		allowed = {
			original_tag = KYU
		}

		available = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		complete_effect = {
			remove_unit_leader = 55

			create_field_marshal = {
				name = "Nobutake Kondō"
					picture = "Portrait_KYU_Nobutake_Kondo.dds"
				traits = { career_officer commando }
				
				skill = 4
				attack_skill = 3
				defense_skill = 2
				planning_skill = 3
				logistics_skill = 4
			}
			hidden_effect = {
				if = {
					limit = {
						AND = {
							has_country_flag = first_general
							has_country_flag = second_general
						}
					}
					clr_country_flag = first_general
				}
				else_if = {
					limit = {
						AND = {
							NOT = { has_country_flag = first_general }
							has_country_flag = second_general
						}
					}
					clr_country_flag = second_general
				}
			}
		}
	}
	
	KYU_Shigeru = {

		allowed = {
			original_tag = KYU
		}

		available = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		complete_effect = {
			remove_unit_leader = 54

			create_field_marshal = {
				name = "Shigeru Fukudome"
					picture = "Portrait_KYU_Shigeru_Fukudome.dds"
				traits = { 

					}
				skill = 2
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 2
			}
			hidden_effect = {
				if = {
					limit = {
						AND = {
							has_country_flag = first_general
							has_country_flag = second_general
						}
					}
					clr_country_flag = first_general
				}
				else_if = {
					limit = {
						AND = {
							NOT = { has_country_flag = first_general }
							has_country_flag = second_general
						}
					}
					clr_country_flag = second_general
				}
			}
		}
	}
	
	KYU_Toyoda = {

		allowed = {
			original_tag = KYU
		}

		available = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_completed_focus = KYU_new_generals
			OR = {
				has_country_flag = first_general
				has_country_flag = second_general
			}
		}

		complete_effect = {
			remove_unit_leader = 53

			create_corps_commander = {
				name = "Teijirō Toyoda"
				picture = "Portrait_KYU_Teijiro_Toyoda.dds"
				traits = { old_guard }
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 3
			}
			hidden_effect = {
				if = {
					limit = {
						AND = {
							has_country_flag = first_general
							has_country_flag = second_general
						}
					}
					clr_country_flag = first_general
				}
				else_if = {
					limit = {
						AND = {
							NOT = { has_country_flag = first_general }
							has_country_flag = second_general
						}
					}
					clr_country_flag = second_general
				}
			}
		}
	}

}

Unification = {

	
	KYU_begin_army_unification = {

		allowed = {
			original_tag = KYU
		}

		available = {
		has_completed_focus = KYU_begin_the_unification_proccess
		}

		cost = 75

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_completed_focus = KYU_begin_the_unification_proccess
		}

		complete_effect = {
		add_war_support = 0.1
			add_ideas = KYU_begin_army_unification
		}
	}

KYU_begin_navy_unification = {

		allowed = {
			original_tag = KYU
		}

		available = {
		has_completed_focus = KYU_begin_the_unification_proccess
		}

		cost = 75

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_completed_focus = KYU_begin_the_unification_proccess
		}

		complete_effect = {
		navy_experience = 25
		add_ideas = KYU_begin_navy_unification
		}
	}
	
	KYU_begin_political_unification = {

		allowed = {
			original_tag = KYU
		}

		available = {
		has_completed_focus = KYU_begin_the_unification_proccess
		}

		cost = 75

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_completed_focus = KYU_begin_the_unification_proccess
		}

		complete_effect = {
		add_stability = 0.1
		add_ideas = KYU_begin_political_unification
		}
	}
	
	KYU_a_new_leader = {

		allowed = {
			original_tag = KYU
		}

		available = {
		has_completed_focus = KYU_republican_model
		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		visible = {
			has_completed_focus = KYU_republican_leanings
		}

		complete_effect = {
		 country_event = kyushu.13
		}
	}
}

Liberation = {

	
	KYU_clans_spawn = {

		allowed = {
		OR = { original_tag = SMZ
		original_tag = RYU }
		}

		available = {
		has_capitulated = no
		is_subject = no
		has_war_with = KYU
		NOT = {has_idea = KYU_royal_guard }
		}
		
		cost = 0

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
		add_timed_idea = {
				idea = KYU_royal_guard
				days = 30
			}
		add_political_power = 25
	    add_manpower = 1000

		division_template = {
	name = "Storm Batallion" 			
	division_names_group = JAP_INF_01
									
	regiments = {
		infantry = { x = 0 y = 0 }
		infantry = { x = 0 y = 1 }
		infantry = { x = 0 y = 2 }
}
}

	random_owned_controlled_state = {
					create_unit = {
						division = "name = \"Noble Guard Genkai\" division_template = \"Storm Batallion\" start_experience_factor = 0.2" 
						owner = ROOT
					    }
				    }	
			}
		}
		
	KYU_clans_spawn2 = {

		allowed = {
		OR = { original_tag = SMZ
		original_tag = RYU }
		}

		available = {
		has_capitulated = no
		is_subject = no
		has_war_with = KYU
		NOT = {has_idea = KYU_royal_guard }
		}
		
		cost = 0

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
		add_timed_idea = {
				idea = KYU_royal_guard
				days = 30
			}
		add_political_power = 25
	    add_manpower = 1000

		division_template = {
	name = "Storm Batallion" 			
	division_names_group = JAP_INF_01
									
	regiments = {
		infantry = { x = 0 y = 0 }
		infantry = { x = 0 y = 1 }
		infantry = { x = 0 y = 2 }
}
}

	random_owned_controlled_state = {
					create_unit = {
						division = "name = \"Noble Guard Kawasoe\" division_template = \"Storm Batallion\" start_experience_factor = 0.2" 
						owner = ROOT
					    }
				    }	
			}
		}
		
			KYU_clans_spawn3 = {

		allowed = {
		OR = { original_tag = SMZ
		original_tag = RYU }
		}

		available = {
		has_capitulated = no
		is_subject = no
		has_war_with = KYU
		NOT = {has_idea = KYU_royal_guard }
		}
		
		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
		add_timed_idea = {
				idea = KYU_royal_guard
				days = 30
			}
		add_political_power = 25
	    add_manpower = 1000

		division_template = {
	name = "Storm Batallion" 			
	division_names_group = JAP_INF_01
									
	regiments = {
		infantry = { x = 0 y = 0 }
		infantry = { x = 0 y = 1 }
		infantry = { x = 0 y = 2 }
}
}

	random_owned_controlled_state = {
					create_unit = {
						division = "name = \"Noble Guard Sakurajima\" division_template = \"Storm Batallion\" start_experience_factor = 0.2" 
						owner = ROOT
					    }
				    }	
			}
		}
		
		
	}
	
	Operations = {

	
	KYU_forment_rebellion = {

		allowed = {
			original_tag = KYU
		}

		available = {
		42 = { is_owned_by = OKI }
		has_completed_focus = KYU_appoint_a_new_cabinet
		}

		cost = 75

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		visible = {
		original_tag = KYU
		}

		complete_effect = {
		AMC = { country_event = { id = kyushu.15 days = 2 } }
		KYU = { transfer_state = 42 }
		}
	}
}