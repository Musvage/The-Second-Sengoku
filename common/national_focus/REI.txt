focus_tree = {
	id = REI
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = REI
		}
	}
	continuous_focus_position = { x = 50 y = 1600}
	default = no

	focus = {
		id = REI_luds_manifesto
		icon = GFX_focus_REI_manifesto
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL }
		ai_will_do = { factor = 10 }

		x = 5
		y = 0

		bypass = { hidden_trigger = { has_global_flag = REI_luds_manifesto_completed } }
		
		completion_reward = {
			add_political_power = 150
			country_event = ostasien.10
		}
	}
	
	### SETO CRISIS PATH ###
	focus = {
		id = REI_colonial_hegemony
		icon = GFX_focus_REI_colonial_hegemony
		cost = 10
		mutually_exclusive = {  focus = REI_matsuyama_pact }
		ai_will_do = { factor = 5 }
		
		relative_position_id = REI_luds_manifesto
		x = 7
		y = 0
		offset = {
			x = 1
			y = 0
			trigger = { has_global_flag = religion_cthulhu_allowed }
		}

		search_filters = { FOCUS_FILTER_DIPLOMACY FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			diplomatic_relation = {
				country = SHI
				relation = guarantee
				active = no
			}
			diplomatic_relation = {
				country = SHI
				relation = non_aggression_pact
				active = no
			}
			SHI = {
				diplomatic_relation = {
					country = REI
					relation = guarantee
					active = no
				}
			}
			add_war_support = 0.1
		}
	}

	focus = {
		id = REI_matsuyama_pact
		icon = GFX_focus_SHI_friends_in_the_west
		cost = 10

		mutually_exclusive = {  focus = REI_colonial_hegemony }
		ai_will_do = { factor = 10 }
		
		relative_position_id = REI_colonial_hegemony
		x = 2
		y = 0

		search_filters = { FOCUS_FILTER_DIPLOMACY FOCUS_FILTER_STABILITY }

		completion_reward = {
			SHI = { country_event = ostasien.2 }
			custom_effect_tooltip = REI_matsuyama_pact_tt
			effect_tooltip = {
				SHI = {
					give_military_access = REI
					add_stability = 0.05
					add_opinion_modifier = {
						target = REI
						modifier = REI_matsuyama_pact_opinion
					}
				}
				REI = {
					give_military_access = SHI
					add_stability = 0.05
					add_opinion_modifier = {
						target = SHI
						modifier = REI_matsuyama_pact_opinion
					}
				}
			}
		}
	}

	focus = {
		id = REI_stand_with_seto
		icon = GFX_focus_REI_stand_with_seto
		cost = 10

		prerequisite = { focus = REI_colonial_hegemony }
		ai_will_do = { factor = 10 }
		
		relative_position_id = REI_colonial_hegemony
		x = 0
		y = 1

		
		search_filters = { FOCUS_FILTER_DIPLOMACY }
		
		available = {
			IMS = {
				exists = yes
				is_puppet = no
				NOT = { has_war_with = REI }
			}
		}

		completion_reward = {
			country_event = ostasien.5
			IMS = {
				effect_tooltip = {
					add_political_power = 150
					add_equipment_to_stockpile = {
						type = infantry_equipment_traditional
						amount = 1000
						producer = REI
					}
				}
				add_opinion_modifier = {
					target = REI
					modifier = REI_defends_IMS_independence
				}
			}
			add_named_threat = {
				threat = 1
				name = REI_threat_stand_with_seto
			}
			add_ai_strategy = {
				type = protect
				id = IMS
				value = 100
			}
		}
	}
	
	focus = {
		id = REI_diffuse_IMS_crisis
		icon = GFX_focus_REI_diffuse_seto_crisis
		cost = 10

		prerequisite = { focus = REI_matsuyama_pact }
		ai_will_do = { factor = 10 }

		search_filters = { FOCUS_FILTER_DIPLOMACY }
		
		relative_position_id = REI_matsuyama_pact
		x = 0
		y = 1

		available = {
			IMS = {
				exists = yes
				is_puppet = no
			}
			SHI = {
				exists = yes
				is_puppet = no
				NOT = { has_war_with = REI }
			}
			26 = { is_claimed_by = SHI }
		}
		
		completion_reward = {
			add_political_power = 100
			SHI = {
				country_event = ostasien.6
				effect_tooltip = { add_political_power = 100 }
				add_opinion_modifier = {
					target = REI
					modifier = REI_opinion_back_SHI_on_seto
				}
			}
			add_named_threat = {
				threat = -1
				name = REI_threat_diffuse_crisis
			}
		}
	}
	
	focus = {
		id = REI_reinforce_garrison
		icon = GFX_focus_SHI_german_military_mission
		cost = 10
		ai_will_do = { factor = 10 modifier = { factor = 100 has_war = yes } }

		prerequisite = {
			focus = REI_colonial_hegemony
			focus = REI_matsuyama_pact
		}

		search_filters = { FOCUS_FILTER_MILITARY }
		
		relative_position_id = REI_matsuyama_pact
		x = -1
		y = 3

		completion_reward = {
			add_manpower = 10000
			
			hidden_effect = {
				create_equipment_variant = { 
					name = "Torpedoboot S-1 Class" 
					type = ship_hull_light_1 
					name_group = GER_DD_HISTORICAL
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_1
						fixed_ship_torpedo_slot = ship_torpedo_1
						mid_1_custom_slot = ship_torpedo_1
						rear_1_custom_slot = ship_mine_layer_1
					}
					obsolete = yes
				}
			}

			create_ship = {
				type = ship_hull_cruiser_panzerschiff
				equipment_variant = "Deutschland Class"
				creator = REI
				name = "SMS Schleswig-Holstein"
			}

			create_ship = {
				type = ship_hull_light_1
				equipment_variant = "Torpedoboot S-1 Class"
				creator = "REI"
				name = "S-26"
			}
			create_ship = {
				type = ship_hull_light_1
				equipment_variant = "Torpedoboot S-1 Class"
				creator = REI
				name = "S-28"
			}
			create_ship = {
				type = ship_hull_light_1
				equipment_variant = "Torpedoboot S-1 Class"
				creator = REI
				name = "S-72"
			}
		}
	}
	
	### LUDS SUCCESSION
	
	focus = {
		id = REI_nazi_and_emperor
		icon = GFX_focus_REI_emperor_nazi
		cost = 10
		cost = 10
		prerequisite = { focus = REI_luds_manifesto }
		mutually_exclusive = { focus = REI_general_staff focus = REI_cthule_putsch }
		available = {
			has_country_flag = luds_manifesto_happened
			hidden_trigger = { NOT =  { has_global_flag = REI_general_staff_completed has_global_flag = REI_cthule_putsch_completed } }
		}
		bypass = { hidden_trigger = { has_global_flag = REI_nazi_and_emperor_completed } }
		relative_position_id = REI_luds_manifesto
		x = -4
		y = 1

		search_filters = { FOCUS_FILTER_POLITICAL }

		completion_reward = {
			add_timed_idea = { idea = REI_idea_reactionary_influence days = 1095 }
			set_global_flag = REI_nazi_and_emperor_completed
		}
	}
	
	focus = {
		id = REI_general_staff
		icon = GFX_focus_REI_great_general_staff
		x = 0
		y = 1
		cost = 10
		relative_position_id = REI_luds_manifesto
		prerequisite = { focus = REI_luds_manifesto }
		mutually_exclusive = { focus = REI_nazi_and_emperor focus = REI_cthule_putsch }
		available = {
			has_country_flag = luds_manifesto_happened
			hidden_trigger = { NOT =  { has_global_flag = REI_nazi_and_emperor_completed has_global_flag = REI_cthule_putsch_completed } }
		}
		bypass = { hidden_trigger = { has_global_flag = REI_general_staff_completed } }

		search_filters = { 
			FOCUS_FILTER_POLITICAL 
			FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = REI_idea_general_staff
				add_idea = REI_idea_general_staff_2
			}
			set_global_flag = REI_general_staff_completed
		}
	}
	
	focus = {
		id = REI_cthule_putsch
		icon = GFX_focus_REI_cthule_putsch
		x = 4
		y = 1
		cost = 10
		relative_position_id = REI_luds_manifesto
		prerequisite = { focus = REI_luds_manifesto }
		mutually_exclusive = { focus = REI_general_staff focus = REI_nazi_and_emperor }
		
		available = {
			has_country_flag = luds_manifesto_happened
			idden_trigger = { NOT =  { has_global_flag = REI_nazi_and_emperor_completed has_global_flag = REI_general_staff_completed } }
		}
		bypass = { hidden_trigger = { has_global_flag = REI_cthule_putsch_completed } }

		search_filters = { FOCUS_FILTER_POLITICAL }

		completion_reward = {
			add_timed_idea = { idea = REI_idea_tannenberg_thule days = 1095 }
			add_ideas = REI_idea_tannenberbund
			set_global_flag = REI_cthule_putsch_completed
		}
	}

	focus = {
		id = REI_kaiser_august
		icon = GFX_focus_REI_kaiser_august
		search_filters = { FOCUS_FILTER_POLITICAL }
		mutually_exclusive = { focus = REI_new_reich }
		prerequisite = { focus = REI_nazi_and_emperor }
		
		ai_will_do = { factor = 10 modifier = { factor = 0 has_idea_with_trait = fascist_demagogue } }
		
		relative_position_id = REI_nazi_and_emperor
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		
		available = {
			#autocracy > var:party_popularity@fascism
			has_country_flag = lud_died
			hidden_trigger = { NOT = { has_global_trigger = REI_new_reich_completed } }
		}
		bypass = { hidden_trigger = { has_global_trigger = REI_kaiser_august_completed } }
		
		completion_reward = {
			set_politics = {
				ruling_party = autocracy
				elections_allowed = no
				last_election = "[REI.GetDateString]"
				election_frequency = 48
			}
			add_ideas = REI_idea_austrian_painter
			REI_august_hohenzollern = { promote_character = yes }
			remove_ideas = REI_kaiser_willy
			set_global_trigger = REI_kaiser_august_completed
		}
	}
	
	focus = {
		id = REI_new_reich	# A New Reich
		icon = GFX_focus_REI_restore_empire
		search_filters = { FOCUS_FILTER_POLITICAL }
		
		mutually_exclusive = { focus = REI_kaiser_august }
		prerequisite = { focus = REI_nazi_and_emperor }
		
		ai_will_do = { factor = 10 modifier = { factor = 0 has_idea_with_trait = persuasive_monarchist } }
		
		relative_position_id = REI_nazi_and_emperor
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		
		available = {
			#fascism > var:party_popularity@autocracy
			has_country_flag = lud_died
			hidden_trigger = { NOT = { bypass = { has_global_trigger = REI_kaiser_august_completed } } }
		}
		bypass = { has_global_trigger = REI_new_reich_completed }
		
		completion_reward = {
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
				last_election = "[REI.GetDateString]"
				election_frequency = 48
			}
			add_ideas = REI_idea_figurehead_kaiser
			hidden_effect = {
				REI_eugen_ott = {
					clr_character_flag = dual_leader_id_hermann_goring
					set_character_flag = dual_leader_id_adolf_hitler
				}
			}
			remove_ideas = REI_kaiser_willy
		}
		set_global_trigger = REI_new_reich_completed
	}

	focus = {
		id = REI_fascist_cabinet
		icon = GFX_focus_REI_fascist_cabinet
		search_filters = { FOCUS_FILTER_POLITICAL }
		
		mutually_exclusive = { focus = REI_military_dictatorship }
		prerequisite = { focus = REI_general_staff }
		
		ai_will_do = { factor = 10 modifier = { factor = 0 has_idea_with_trait = establishment_mouthpiece } }
		
		relative_position_id = REI_general_staff
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		available = {
			#fascism > var:party_popularity@neutrality
			has_country_flag = lud_died
			hidden_trigger = { NOT = { has_global_flag = REI_military_dictatorship_completed } }
		}
		bypass = { hidden_trigger = { has_global_flag = REI_fascist_cabinet_completed } }
		
		completion_reward = {
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
				last_election = "[REI.GetDateString]"
				election_frequency = 48
			}
			add_ideas = REI_idea_army_over_executive
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_dynamic_modifier = { modifier = PRO_modifier_ruling_party_popularity } }
					}
					add_dynamic_modifier = { modifier = PRO_modifier_ruling_party_popularity }
				}
			}
		}
	}
	
	focus = {
		id = REI_military_dictatorship
		icon = GFX_focus_REI_military_cabinet
		search_filters = { FOCUS_FILTER_POLITICAL }
		
		mutually_exclusive = { focus = REI_fascist_cabinet }
		prerequisite = { focus = REI_general_staff }
		
		ai_will_do = { factor = 10 modifier = { factor = 0 has_idea_with_trait = fascist_demagogue } }
		
		relative_position_id = REI_general_staff
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		available = {
			#neutrality > var:party_popularity@fascism
			has_country_flag = lud_died
			hidden_trigger = { NOT = { has_global_flag = REI_fascist_cabinet_completed } }
		}
		bypass = { hidden_trigger = { has_global_flag = REI_military_dictatorship_completed } }
		
		completion_reward = {
			if = {
				limit = { NOT = { has_government = neutrality } }
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
					last_election = "[REI.GetDateString]"
					election_frequency = 48
				}
			}
			add_ideas = REI_idea_executive_over_army
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_dynamic_modifier = { modifier = PRO_modifier_ruling_party_popularity } }
					}
					add_dynamic_modifier = { modifier = PRO_modifier_ruling_party_popularity }
				}
				REI_herbert_von_dirksen = {
					clr_character_flag = dual_leader_id_ludendorff
					clr_character_flag = dual_leader_id_werner_blomberg
					set_character_flag = dual_leader_id_august_mackensen
				}
			}
		}
	}
	
	focus = {
		id = REI_saint_lud
		icon = GFX_focus_REI_saint_lud
		search_filters = { FOCUS_FILTER_RELIGION FOCUS_FILTER_WAR_SUPPORT }
		
		mutually_exclusive = { focus = REI_paganphiles }
		prerequisite = { focus = REI_cthule_putsch }
		ai_will_do = { factor = 10 }
		
		relative_position_id = REI_cthule_putsch
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
	
		
		available = {
			has_religion_3 = yes
			has_country_flag = lud_died
			hidden_trigger = { NOT = { has_global_flag = REI_paganphiles_completed } }
		}
		bypass = { hidden_trigger = { has_global_flag = REI_saint_lud_completed } }
		
		completion_reward = {
			add_ideas = REI_idea_saint_lud
			add_war_support = 0.05
			if = {
				limit = { NOT = { has_government = neutrality } }
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
					last_election = "[REI.GetDateString]"
					election_frequency = 48
				}
			}
			hidden_effect = {
				REI_herbert_von_dirksen = {
					clr_character_flag = dual_leader_id_ludendorff
					clr_character_flag = dual_leader_id_werner_blomberg
					set_character_flag = dual_leader_id_friedrich_schellendorf
				}
			}
		}
	}
	
	focus = {
		id = REI_paganphiles
		icon = GFX_focus_REI_paganphiles
		search_filters = { FOCUS_FILTER_RELIGION }
		
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_idea_with_trait = protestant_missionary
				has_idea_with_trait = protestant_missionary
				has_idea_with_trait = catholic_priest
				has_idea_with_trait = jesuit
			}
		}
		
		mutually_exclusive = { focus = REI_saint_lud }
		prerequisite = { focus = REI_cthule_putsch }
		
		relative_position_id = REI_cthule_putsch
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		available = {
			has_country_flag = lud_died
			hidden_trigger = { NOT = { has_global_flag = REI_saint_lud_completed } }
		}
		bypass = { hidden_trigger = { has_global_flag = REI_paganphiles_completed } }
		
		completion_reward = {
			add_ideas = REI_idea_paganphile
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
				last_election = "[REI.GetDateString]"
				election_frequency = 48
			}
			hidden_effect = {
				REI_eugen_ott = {
					clr_character_flag = dual_leader_id_hermann_goring
					set_character_flag = dual_leader_id_alfred_rosenberg
				}
			}
		}
	}
	
	### Start of global/local branches
	
	focus = {
		id = REI_denounce_versailles
		icon = GFX_focus_REI_denounce_versailles
		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		prerequisite = { focus = REI_kaiser_august focus = REI_new_reich focus = REI_fascist_cabinet focus = REI_military_dictatorship focus = REI_saint_lud focus = REI_paganphiles }
		
		ai_will_do = {
			factor = 10
			modifier = { factor = 10 has_war = yes }
			modifier = { factor = 100 date > 1936.03.06 }
		}
		
		bypass = { hidden_trigger = { has_global_flag = REI_denounce_versailles_completed } }
		
		relative_position_id = REI_fascist_cabinet
		x = -3
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		completion_reward = {
			add_war_support = 0.1
			add_named_threat = { 
				threat = 5
				name = REI_threat_rhineland
			}
			hidden_effect = { news_event = ostasien.15 }
			set_global_flag = REI_denounce_versailles_completed
		}
	}
	
	focus = {
		id = REI_state_of_affairs
		icon = GFX_focus_REI_state_of_affairs
		cost = 10
		ai_will_do = { factor = 10 }
		search_filters = { FOCUS_FILTER_POLITICAL }
		
		prerequisite = { focus = REI_kaiser_august focus = REI_new_reich focus = REI_fascist_cabinet focus = REI_military_dictatorship focus = REI_saint_lud focus = REI_paganphiles }
		
		relative_position_id = REI_military_dictatorship
		x = 3
		y = 1
		offset = {
			x = -1
			y = 1
			trigger = { has_global_flag = religion_cthulhu_allowed }
		}

		completion_reward = {
			add_political_power = 150
		}

	}
	
	### EUROPEAN/GERMAN POLITICS
	
	focus = {
		id = REI_help_spain
		icon = GFX_focus_REI_help_spain
		search_filters = { FOCUS_FILTER_MILITARY FOCUS_FILTER_DIPLOMACY FOCUS_FILTER_WORLD }
		ai_will_do = { factor = 10 modifier = { factor = 2 has_government = fascism } }
		prerequisite = { focus = REI_denounce_versailles }
		
		relative_position_id = REI_denounce_versailles
		x = -4
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		
		available = {
			has_global_flag = world_stage_theater_spanish_cw_is_active
		}
		
		bypass = {
			has_global_flag = world_stage_spanish_cw_over
		}
		
		allow_branch = {
			always = no 
		}
		
		completion_reward = {
			subtract_from_variable = {
				var = 101.world_stage_power
				value = 1
				tooltip = remove_world_stage_power_tt
			}
			add_to_variable = {	# CHANGE LATER # CHANGE LATER # CHANGE LATER # CHANGE LATER 
				global.FAL_strength_spain_bonus = 10
				tooltip = world_stage_add_help_fal_power
			}
			set_country_flag = world_stage_spanish_cw_helped_falange
			news_event = worldstage.7
		}
	}
	
	focus = {
		id = REI_long_knives
		icon = GFX_focus_REI_long_knives
		search_filters = { FOCUS_FILTER_POLITICAL }
		prerequisite = { focus = REI_denounce_versailles }
		
		relative_position_id = REI_denounce_versailles
		x = -2
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 modifier = { factor = 10 date > 1938.1.1 } }
		
		completion_reward = {
			add_political_power = 150
		}
	}
	
	focus = {
		id = REI_anschluss
		icon = GFX_focus_REI_aschluss
		search_filters = { FOCUS_FILTER_WORLD }
		
		ai_will_do = {
			factor = 0
			modifier = { add = 999 date > 1938.1.1 }
			modifier = { factor = 10 date > 1939.1.1 }
		}
		prerequisite = { focus = REI_long_knives focus = REI_help_spain }
		
		relative_position_id = REI_long_knives
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_anschluss_completed }
		}
		
		completion_reward = {
			hidden_effect = { news_event = ostasien.7 }
			set_global_flag = REI_anschluss_completed
			add_named_threat = { 
				threat = 10
				name = REI_threat_anschluss
			}
			set_variable = { global.worldstage_europe_map_frame = 2 }
			if = {
				limit = { has_global_flag = leagueofnations_exists }
				set_variable = { 26.theater_owner = 101 }
				set_variable = { 26.theater_owner_coalition = 6 }
			} else = {
				set_variable = { 26.theater_owner = 101 }
				set_variable = { 26.theater_owner_coalition = 3 }
			}
			custom_effect_tooltip = REI_austria_tt
			add_to_variable = { global.tc_base_yawatahama_steel = 2 }
			check_trade_cities = yes
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 20
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_befriend_soviet_enemies
		icon = GFX_focus_REI_anti_bolshevism
		search_filters = { FOCUS_FILTER_DIPLOMACY FOCUS_FILTER_WAR_SUPPORT }
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					FER = {
						has_completed_focus = FER_soviet_diplomacy_in_baltic
						has_completed_focus = FER_soviet_finnish_war
					}
				}
			}
		}
		mutually_exclusive = { focus = REI_molotov_ribbentrop }
		prerequisite = { focus =  REI_anschluss}
		
		relative_position_id = REI_anschluss
		x = -3
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		completion_reward = {
			set_global_flag = REI_molotov_ribbentrop_completed			# for auto-pilot on REI-less world stage
			add_war_support = 0.05
			every_other_country = {
				limit = { has_government = fascism }
				add_opinion_modifier = {
						target = REI
						modifier = REI_enemy_of_soviets_strong
					}
			}
			every_other_country = {
				limit = { OR = {	has_government = neutrality
									has_government = autocracy } }
				add_opinion_modifier = {
					target = REI
					modifier = REI_enemy_of_soviets
				}
			}
			every_other_country = {
				limit = { has_government = fascism }
				add_opinion_modifier = {
						target = REI
						modifier = REI_enemy_of_soviets_bad
					}
			}
		}
	}
	
	focus = {
		id = REI_molotov_ribbentrop
		icon = GFX_focus_REI_molotov_ribbentrop
		search_filters = { FOCUS_FILTER_WORLD FOCUS_FILTER_DIPLOMACY }
		dynamic = yes
		
		ai_will_do = {
			factor = 0
			modifier = { add = 999 date > 1939.6.1 }
			modifier = { factor = 10 date > 1940.1.1 }
		}
		mutually_exclusive = { focus = REI_befriend_soviet_enemies }
		prerequisite = { focus = REI_anschluss }
		
		relative_position_id = REI_anschluss
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		available = {
			NOT = { is_justifying_wargoal_against = FER }
		}
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_molotov_ribbentrop_completed }
		}
		
		completion_reward = {
			news_event = ostasien.11
			set_global_flag = REI_molotov_ribbentrop_completed
			add_named_threat = {
				threat = -5
				name = REI_threat_molotov_ribbentrop
			}
			set_global_flag = GER_SOV_pact_enabled
			add_ideas = REI_idea_molotov_ribeentrop_rei
			diplomatic_relation = {
				country = FER
				relation = non_aggression_pact
				active = yes
			}
			remove_wargoal = {
				type = all
				target = FER
			}
			FER = {
				add_ideas = REI_idea_molotov_ribeentrop_fer
				diplomatic_relation = {
					country = REI
					relation = non_aggression_pact
					active = yes
				}
				remove_wargoal = {
					type = all
					target = REI
				}
			}
		}
	}
	
	# ANTI-SOVIET SUBBRANCH
	
	focus = {
		id = REI_help_finland
		icon = GFX_focus_REI_help_finland
		search_filters = { FOCUS_FILTER_MILITARY FOCUS_FILTER_DIPLOMACY FOCUS_FILTER_WORLD }
		ai_will_do = { factor = 100 }
		prerequisite = { focus = REI_befriend_soviet_enemies }
		
		relative_position_id = REI_befriend_soviet_enemies
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		available = {
			NOT = {
				FER = { has_completed_focus = FER_soviet_finnish_war }
			}
		}
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_help_finland_completed }
		}
		
		completion_reward = {
			army_experience = 5
			air_experience = 5
			navy_experience = 5
			FER = { custom_effect_tooltip = REI_help_finland_tt }
			custom_effect_tooltip = metropolis_scope_germany
			subtract_from_variable = {
				var = 101.world_stage_power
				value = 1
				tooltip = remove_world_stage_power_no_scope_tt
			}
			set_global_flag = REI_help_finland_completed
		}
	}
	
	focus = {
		id = REI_help_baltics
		icon = GFX_focus_REI_help_baltic
		search_filters = { FOCUS_FILTER_DIPLOMACY FOCUS_FILTER_MILITARY FOCUS_FILTER_WORLD }
		ai_will_do = { factor = 100 }
		prerequisite = { focus = REI_befriend_soviet_enemies }
		
		relative_position_id = REI_befriend_soviet_enemies
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_help_baltics_completed }
		}
				
		completion_reward = {
			army_experience = 5
			air_experience = 5
			navy_experience = 5
			FER = { custom_effect_tooltip = REI_help_baltics_tt }
			custom_effect_tooltip = metropolis_scope_germany
			subtract_from_variable = {
				var = 101.world_stage_power
				value = 1
				tooltip = remove_world_stage_power_no_scope_tt
			}
			set_global_flag = REI_help_baltics_completed
		}
	}
	
	focus = {
		id = REI_help_mongolia
		icon = GFX_focus_REI_help_mongolia
		search_filters = { FOCUS_FILTER_MILITARY FOCUS_FILTER_DIPLOMACY FOCUS_FILTER_WORLD }
		ai_will_do = { factor = 100 }
		prerequisite = { focus = REI_befriend_soviet_enemies }
		
		relative_position_id = REI_befriend_soviet_enemies
		x = 1
		y = 1
		cost = 10
		
		allow_branch = { always = no }
		
		available_if_capitulated = yes
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_help_mongolia_completed }
		}
		
		completion_reward = {
			army_experience = 5
			air_experience = 5
			navy_experience = 5
			custom_effect_tooltip = metropolis_scope_germany
			subtract_from_variable = {
				var = 101.world_stage_power
				value = 1
				tooltip = remove_world_stage_power_no_scope_tt
			}
			custom_effect_tooltip = metropolis_scope_china
			#add_to_variable = {							# strat adv. add later, if this focus gets implemented
			#	tooltip = world_stage_bonus_power_mongolia
			#	global.ROC_strength_mongolia_bonus = 10 
			#}
			set_global_flag = REI_help_mongolia_completed
		}
	}
	
	### WORLD WAR TWO BRANCH
	
	focus = {
		id = REI_sudetenland
		icon = GFX_focus_REI_sudetenland
		search_filters = { FOCUS_FILTER_WORLD }
		
		ai_will_do = {
			factor = 0
			modifier = { add = 999 date > 1938.7.1 }
			modifier = { factor = 10 date > 1939.6.1 }
		}
		prerequisite = { focus = REI_molotov_ribbentrop focus = REI_befriend_soviet_enemies }
		
		relative_position_id = REI_molotov_ribbentrop
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_sudetenland_completed }
		}
		
		completion_reward = {
			hidden_effect = { news_event = ostasien.8 }
			set_global_flag = REI_sudetenland_completed
			add_named_threat = { 
				threat = 15
				name = REI_threat_sudetenland
			}
			set_variable = { global.worldstage_europe_map_frame = 3 }
			custom_effect_tooltip = REI_czechoslovakia_tt
			add_to_variable = { global.tc_base_yawatahama_steel = 4 }
			add_to_variable = { global.tc_base_yawatahama_oil = 2 }
			check_trade_cities = yes
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 15
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_attack_poland
		icon = GFX_focus_REI_poland
		search_filters = { FOCUS_FILTER_WORLD }
		
		ai_will_do = {
			factor = 0
			modifier = { add = 999 date > 1939.7.1 }
			modifier = { factor = 10 date > 1940.6.1 }
		}
		prerequisite = { focus = REI_sudetenland }
		prerequisite = { focus = REI_army_tech }
		
		relative_position_id = REI_sudetenland
		x = 3
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		available = {
			custom_trigger_tooltip = {
				tooltip = germany_has_world_stage_power_60
				101 = { check_variable = { world_stage_power > 59 } }
			}
		}
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_attack_poland_completed }
		}
		
		completion_reward = {
			set_global_flag = REI_attack_poland_completed	3 = { set_state_flag = theater_is_active }
			hidden_effect = {
				news_event = worldstage.15
				if = {
					limit = { has_global_flag = GER_SOV_pact_enabled }
					news_event = { id = worldstage.16 days = 7 random_days  = 10 }
				}
				news_event = { id = worldstage.55 hours = 24 random = 24 }
			}
			custom_effect_tooltip = REI_attack_poland_tt
			add_named_threat = { 
				threat = 25
				name = REI_threat_attack_poland
			}
			custom_effect_tooltip = theater_scope_poland
			custom_effect_tooltip = world_stage_activate_theater_tt
			add_to_variable = {
				3.attacker_strategic_advantage = 1
				tooltip = world_stage_add_strategic_advantage_attacker
			}
			custom_effect_tooltip = metropolis_scope_germany_space
			subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
				101.world_stage_power = 60
				tooltip = world_stage_deploy_power_poland_space
			}
			hidden_effect = {
				3 = { add_to_variable = { world_stage_power_deployed_by^101 = 60 }  }	# proxy for Poland
				3 = { set_variable = { coalition_side_attack = 6 } }					# it's not Axis quite yet
				3 = { world_stage_state_update_current_day = yes }
			}
			set_global_flag = world_stage_world_war_2_is_active
		}
	}
	
	focus = {
		id = REI_operation_weserbung	# Operation Weserübung
		icon = GFX_focus_generic_western_enemies
		search_filters = { FOCUS_FILTER_WORLD }
		
		ai_will_do = { factor = 10 }
		
		prerequisite = { focus = REI_attack_poland }
		
		relative_position_id = REI_attack_poland
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		allow_branch = {
			always = no
		}
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_operation_weserbung_completed }
		}
		
		available = {
			has_global_flag = world_stage_world_war_2_is_active
			custom_trigger_tooltip = {
				tooltip = has_world_stage_power_ger_60_tt
				check_variable = { global.world_stage_power_ger > 59 }
			}
		}
		
		completion_reward = {
			add_named_threat = { 
				threat = 10
				name = REI_threat_operation_weserbung
			}
			news_event = worldstage.45
			custom_effect_tooltip = theater_scope_norway
			custom_effect_tooltip = world_stage_activate_theater_tt
			subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
				101.world_stage_power = 60
				tooltip = world_stage_deploy_power
			}
			add_to_variable = {
				12.attacker_strategic_advantage = 0.5
				tooltip = world_stage_add_strategic_advantage_attacker
			}	
			hidden_effect = {
				12 = { add_to_variable = { world_stage_power_deployed_by^101 = 60 } }	# proxy for Norway
				12 = { set_variable = { coalition_side_attack = 3 } }
				12 = { world_stage_state_update_current_day = yes }
			}
			set_global_flag = REI_operation_weserbung_completed
		}
	}
	
	focus = {
		id = REI_case_yellow	# Fall Gelb (Case Yellow), invade netherlands/belgium
		icon = GFX_focus_REI_case_yellow
		search_filters = { FOCUS_FILTER_RESEARCH }
		
		ai_will_do = { factor = 100 }
		
		prerequisite = { focus = REI_attack_poland }
		
		relative_position_id = REI_attack_poland
		x = -2
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.33
				uses = 1
				category = land_doctrine
			}
			add_doctrine_cost_reduction = {
				name = air_doc_bonus
				cost_reduction = 0.33
				uses = 1
				category = air_doctrine
			}
			set_global_flag = REI_case_yellow_completed
		}
	}
	
	focus = {
		id = REI_blitzkrieg
		icon = GFX_focus_REI_blitzkrieg
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_case_yellow }
		
		relative_position_id = REI_case_yellow
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 0 modifier = { add = 999 date > 1940.1.1 } }
		
		available = {
			has_global_flag = world_stage_world_war_2_is_active
			custom_trigger_tooltip = { has_global_flag = { flag = world_stage_phoney_war_rages_on days < 110 } tooltip = world_stage_phoney_war_rages_on_110_days_ago  }
			custom_trigger_tooltip = { 101 = { check_variable = { world_stage_power > 89 } } tooltip = germany_has_world_stage_power_90 }
			custom_trigger_tooltip = { 5 = { check_variable = { theater_owner_coalition = 1 } } tooltip = theater_alsace_controlled_allies }
			custom_trigger_tooltip = { 3 = { NOT = { has_state_flag = theater_is_active } } tooltip = theater_not_active_poland }
		}
		
		bypass = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = theater_france_controlled_axis
					8 = { check_variable = { theater_owner_coalition = 3 } }
				}
				NOT = { has_global_flag = world_stage_france_exists }
				hidden_trigger = { has_global_flag = REI_blitzkrieg_completed }
			}
		}
		
		will_lead_to_war_with = KOB
		will_lead_to_war_with = OSA
		
		completion_reward = {
			hidden_effect = {
				if = {
					limit = { has_global_flag = phoney_war_rages_on }
					news_event = worldstage.53
				}
				news_event = worldstage.24
			}
			set_global_flag = REI_blitzkrieg_completed 5 = { set_state_flag = theater_is_active }	
			custom_effect_tooltip = REI_blitzkrieg_tt
			add_named_threat = { 
				threat = 25
				name = REI_threat_blitzkrieg
			}
			custom_effect_tooltip = theater_scope_alsace
			custom_effect_tooltip = world_stage_activate_theater_tt
			add_to_variable = {
				5.attacker_strategic_advantage = 2
				tooltip = world_stage_add_strategic_advantage_attacker
			}
			custom_effect_tooltip = metropolis_scope_germany_space
			subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
				101.world_stage_power = 120
				tooltip = world_stage_deploy_power_alsace_space
			}
			hidden_effect = {
				103 = {
					set_temp_variable = { french_forces = world_stage_power }
					clamp_temp_variable = { var = french_forces min = 0 max = 90 }
					round_temp_variable = french_forces
					subtract_from_variable = { world_stage_power = french_forces }
				}
				5 = { add_to_variable = { world_stage_power_deployed_by^101 = 120 }  }	# proxy for Eastern France
				5 = { add_to_variable = { world_stage_power_deployed_by^103 = french_forces }  }
				5 = { set_variable = { coalition_side_attack = 3 } }					# it's Axis already
				5 = { world_stage_state_update_current_day = yes }
			}
			# calculate chance of auto-win
			set_temp_variable = { chance_success = 200 } 101 = { multiply_temp_variable = { chance_success = doctrine_bonus_land } multiply_temp_variable = { chance_success = doctrine_bonus_air } }
			set_temp_variable = { chance_failure = 100 } 103 = { multiply_temp_variable = { chance_failure = doctrine_bonus_land } multiply_temp_variable = { chance_failure = doctrine_bonus_air } }
			if = { limit = { 107 = { check_variable = { world_stage_coalition = 3 } } } multiply_temp_variable = { chance_success = 2 } }
			if = { limit = { 107 = { check_variable = { world_stage_coalition = 1 } } } multiply_temp_variable = { chance_failure = 2 } }
			random_list = {
				100 = { news_event = { id = worldstage.25 days = 4 random = 2 } }					# FOR TESTING, SET ACTUAL VALUES LATER (the ones commented bellow)
				0 = { news_event = { id = worldstage.26 days = 4 random = 2 }}
				#var:chance_success = { news_event = { id = worldstage.25 days = 40 random = 10 } }
				#var:chance_failure = { news_event = { id = worldstage.26 days = 40 random = 10 }}
			}
			custom_effect_tooltip = blitzkrieg_factors_tt
		}
	}
	
	focus = {
		id = REI_lossberg_halder_plans	# https://youtu.be/PpsGGtrrqMw?t=204
		icon = GFX_goal_generic_occupy_states_ongoing_war
		search_filters = { FOCUS_FILTER_RESEARCH }
		
		prerequisite = { focus = REI_attack_poland }
		
		relative_position_id = REI_attack_poland
		x = 3
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 100 }
		
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.33
				uses = 1
				category = land_doctrine
			}
			add_doctrine_cost_reduction = {
				name = air_doc_bonus
				cost_reduction = 0.33
				uses = 1
				category = air_doctrine
			}
		}
	}
	
	focus = {
		id = REI_barbarossa
		icon = GFX_focus_REI_barbarossa
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_lossberg_halder_plans }
		
		relative_position_id = REI_lossberg_halder_plans
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 0 modifier = { add = 999 date > 1941.4.1 } }
		
		available = {
			custom_trigger_tooltip = { 101 = { check_variable = { world_stage_power > 89 } } tooltip = germany_has_world_stage_power_90 }
			custom_trigger_tooltip = { 3 = { check_variable = { theater_owner_coalition = 3 } } tooltip = theater_poland_controlled_axis }
		}
		
		bypass = {
			OR = {
				custom_trigger_tooltip = { 3 = { check_variable = { theater_owner_coalition = 2 } } tooltip = theater_poland_controlled_komintern }
				custom_trigger_tooltip = { 9 = { check_variable = { theater_owner_coalition = 3 } } tooltip = theater_belarus_controlled_axis }
				hidden_trigger = { has_global_flag = REI_barbarossa_completed }
			}
		}
		
		will_lead_to_war_with = FER
		
		completion_reward = {
			set_global_flag = REI_barbarossa_completed
			add_named_threat = { 
				threat = 25
				name = REI_threat_barbarossa
			}
			# calculate chance of auto-win, it will be use in a random_list later
			set_temp_variable = { chance_success = 200 } 101 = { multiply_temp_variable = { chance_success = doctrine_bonus_land } multiply_temp_variable = { chance_success = doctrine_bonus_air } }
			set_temp_variable = { chance_failure = 100 } 104 = { multiply_temp_variable = { chance_failure = doctrine_bonus_land } multiply_temp_variable = { chance_failure = doctrine_bonus_air } }
			if = { limit = { has_global_flag = GER_SOV_pact_enabled } add_to_temp_variable = { chance_success = 200 } }
			#if = { limit = { <<FINLAND>> = { check_variable = { world_stage_coalition = 3 } } } add_to_temp_variable = { chance_success = 200 } }	# change to Finland later
			# there are 4 possibilities: WW2 is active or ended, German-Soviet Pact is active or not. Those without GER_SOV_pact_enabled must be checked first so the flag can be cleared without firing 2 events
			hidden_effect = {
				set_temp_variable = { ger_forces_value = world_stage_power }
				multiply_temp_variable = { ger_forces_value = 0.75 }
				round_temp_variable = ger_forces_value
				clamp_temp_variable = { var = ger_forces_value min = 90 max = 999 }
				104 = { set_temp_variable = { sov_forces_value = world_stage_power } }	# sov forces value is determined in 4 possible scenarios bellow
				multiply_temp_variable = { sov_forces_value = 0.5 }
			}
			if = {
				limit = { NOT = { has_global_flag = world_stage_world_war_2_is_active } NOT = { has_global_flag = GER_SOV_pact_enabled } }	# WW2 ended: USSR is prepared and fights alone
				set_global_flag = world_stage_german_soviet_war_is_active
				news_event = worldstage.36
				custom_effect_tooltip = theater_scope_belarus
				custom_effect_tooltip = world_stage_activate_theater_tt
				add_to_variable = {
					9.attacker_strategic_advantage = 0.5
					tooltip = world_stage_add_strategic_advantage_attacker
				}
				clamp_temp_variable = { var = sov_forces_value min = 0 max = 90 }
				every_state = {
					limit = { check_variable = { theater_owner_coalition = 2 } }
					set_variable = { theater_owner_coalition = 1 }
				}
				104 = { set_variable = { world_stage_coalition = 1 } }
			}
			if = {
				limit = { has_global_flag = world_stage_world_war_2_is_active NOT = { has_global_flag = GER_SOV_pact_enabled } }			# WW2 is ongoing: USSR is prepared and joins allies
				custom_effect_tooltip = metropolis_scope_sovietunion
				custom_effect_tooltip = join_coalition_allies
				set_global_flag = sovietunion_joined_ww2
				news_event = worldstage.35
				custom_effect_tooltip = theater_scope_belarus
				custom_effect_tooltip = world_stage_activate_theater_tt
				add_to_variable = {
					9.attacker_strategic_advantage = 0.5
					tooltip = world_stage_add_strategic_advantage_attacker
				}
				clamp_temp_variable = { var = sov_forces_value min = 0 max = 90 }
				every_state = {
					limit = { check_variable = { theater_owner_coalition = 2 } }
					set_variable = { theater_owner_coalition = 1 }
				}
				104 = { set_variable = { world_stage_coalition = 1 } }
			}
			if = {
				limit = { has_global_flag = world_stage_world_war_2_is_active has_global_flag = GER_SOV_pact_enabled }						# WW2 is ongoing: USSR is surprised and joins allies
				custom_effect_tooltip = metropolis_scope_sovietunion
				custom_effect_tooltip = join_coalition_allies
				set_global_flag = sovietunion_joined_ww2
				news_event = worldstage.33
				custom_effect_tooltip = theater_scope_belarus
				custom_effect_tooltip = world_stage_activate_theater_tt
				add_to_variable = {
					9.attacker_strategic_advantage = 1
					tooltip = world_stage_add_strategic_advantage_attacker
				}
				clr_global_flag = GER_SOV_pact_enabled
				clamp_temp_variable = { var = sov_forces_value min = 0 max = 60 }
			}
			if = {
				limit = { NOT = { has_global_flag = world_stage_world_war_2_is_active } has_global_flag = GER_SOV_pact_enabled }			# WW2 ended: USSR is surprised and fights alone
				set_global_flag = world_stage_german_soviet_war_is_active
				news_event = worldstage.34
				custom_effect_tooltip = theater_scope_belarus
				custom_effect_tooltip = world_stage_activate_theater_tt
				add_to_variable = {
					9.attacker_strategic_advantage = 1
					tooltip = world_stage_add_strategic_advantage_attacker
				}
				clr_global_flag = GER_SOV_pact_enabled
				clamp_temp_variable = { var = sov_forces_value min = 0 max = 60 }
			}
			round_temp_variable = sov_forces_value
			custom_effect_tooltip = metropolis_scope_germany_space
			subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
				101.world_stage_power = ger_forces_value
				tooltip = world_stage_deploy_power_belarus_space
			}
			custom_effect_tooltip = metropolis_scope_sovietunion_space
			subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
				104.world_stage_power = sov_forces_value
				tooltip = world_stage_deploy_power_belarus_space
			}
			hidden_effect = {
				9 = {	# Belarus proxy
					set_state_flag = theater_is_active
					set_variable = { world_state_power_deployed_by^101 = ger_forces_value }
					set_variable = { world_state_power_deployed_by^104 = sov_forces_value }
					set_variable = { coalition_side_attack = 3 }
					world_stage_state_update_current_day = yes
					REI = { remove_ideas = REI_idea_molotov_ribeentrop_rei }
					FER = { remove_ideas = REI_idea_molotov_ribeentrop_fer }
				}
				news_event = worldstage.32
			}
			random_list = {
				100 = { news_event = { id = worldstage.37 days = 2 random = 2 } }					# FOR TESTING, SET ACTUAL VALUES LATER (the ones commented bellow)
				0 = { news_event = { id = worldstage.38 days = 2 random = 2 } }
				#var:chance_success = { news_event = { id = worldstage.37 days = 14 random = 7 } }
				#var:chance_failure = { news_event = { id = worldstage.38 days = 14 random = 7 } }
			}
			custom_effect_tooltip = barbarossa_factors_tt
		}
	}
	
	focus = {
		id = REI_afrikakorps	# Operation Sonnenblume (sunflower)
		icon = GFX_focus_REI_afrikakorps
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_attack_poland }
		
		relative_position_id = REI_attack_poland
		x = -4
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 100 }
		
		available = {
			has_global_flag = world_stage_world_war_2_is_active
			custom_trigger_tooltip = {
				tooltip = germany_has_world_stage_power_30
				101 = { check_variable = { world_stage_power > 29 } }
			}
			OR = {
				custom_trigger_tooltip = {
					tooltip = theater_active_lybia
					14 = { has_state_flag = theater_is_active }
				}
				custom_trigger_tooltip = {
					tooltip = theater_active_egypt
					15 = { has_state_flag = theater_is_active }
				}
			}
		}
		
		completion_reward = {
			#set_global_flag = afrikakorps_allowed
			#custom_effect_tooltip = afrikakorps_allowed
			#set_country_flag = can_play_lybia set_country_flag = can_play_egypt
			hidden_effect = { country_event = ostasien.13}
			if = {
				limit = {
					14 = { has_state_flag = theater_is_active }
					15 = { has_state_flag = theater_is_active }
				}
				set_temp_variable = { ger_forces_value = 15 }
				set_temp_variable = { xp_bonus = 10 }
			} else = {
				set_temp_variable = { ger_forces_value = 30 }
				set_temp_variable = { xp_bonus = 5 }
			}
			custom_effect_tooltip = theater_scope_lybia
			if = {
				limit = { 14 = { has_state_flag = theater_is_active } }
				if = {
					limit = { var:world_stage_metropolis = { check_variable = { 14.coalition_side_attack = world_stage_coalition } } }
					add_to_variable = {
						14.defender_strategic_advantage = 0.5
						tooltip = world_stage_add_strategic_advantage_attacker
					}
				} else = {
					add_to_variable = {
						14.defender_strategic_advantage = 0.5
						tooltip = world_stage_add_strategic_advantage_defender
					}
				}
				hidden_effect = { 14 = { add_to_variable = { world_stage_power_deployed_by^101 = ger_forces_value }  world_stage_state_update_current_day = yes } }	# proxy for Lybia
				subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
					101.world_stage_power = ger_forces_value
					tooltip = world_stage_deploy_power
				}
				
			} else = { custom_effect_tooltip = world_stage_possibly_reinforce_here }
			custom_effect_tooltip = theater_scope_egypt
			if = {
				limit = { 15 = { has_state_flag = theater_is_active } }
				if = {
					limit = { var:world_stage_metropolis = { check_variable = { 15.coalition_side_attack = world_stage_coalition } } }
					add_to_variable = {
						15.defender_strategic_advantage = 0.5
						tooltip = world_stage_add_strategic_advantage_attacker
					}
				} else = {
					add_to_variable = {
						15.defender_strategic_advantage = 0.5
						tooltip = world_stage_add_strategic_advantage_defender
					}
				}
				hidden_effect = { 15 = { add_to_variable = { world_stage_power_deployed_by^101 = ger_forces_value } world_stage_state_update_current_day = yes } }	# proxy for Egypt
				subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
					101.world_stage_power = ger_forces_value
					tooltip = world_stage_deploy_power
				}
			} else = { custom_effect_tooltip = world_stage_possibly_reinforce_here }
			army_experience = xp_bonus
		}
	}
	
	focus = {
		id = REI_atlantikwall
		icon = GFX_focus_generic_coastal_fort
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_blitzkrieg }
		
		relative_position_id = REI_blitzkrieg
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 5 }
		
		available = {
			custom_trigger_tooltip = {
				tooltip = theater_not_active_france
				8 = { NOT = { has_state_flag = theater_is_active } }
			}
			custom_trigger_tooltip = {
				tooltip = theater_france_controlled_axis
				8 = { check_variable = { theater_owner_coalition = 3 } }
			}
		}
		
		completion_reward = {
			army_experience = 10
			custom_effect_tooltip = theater_scope_france	# normandy?
			add_to_variable = {
				8.defender_strategic_advantage = 0.5
				tooltip = world_stage_add_strategic_advantage_defender
			}
		}
	}
	
	focus = {
		id = REI_sea_lion	# Unternehmen Seelöwe
		icon = GFX_focus_PRO_submarine_tactics
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_blitzkrieg }
		
		relative_position_id = REI_blitzkrieg
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 999 }
		
		available = {
			has_global_flag = world_stage_world_war_2_is_active
			custom_trigger_tooltip = {
				tooltip = owner_france_axis
				check_variable = { global.theater_owner_france = 3 }
			}
			custom_trigger_tooltip = {
				tooltip = owner_england_not_axis
				NOT = { check_variable = { global.theater_owner_england = 3 } }
			}
			custom_trigger_tooltip = {
				tooltip = has_world_stage_power_ger_60_tt
				check_variable = { global.world_stage_power_ger > 59 }
			}
		}
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_sea_lion_completed }
		}
		
		completion_reward = {
			set_global_flag = REI_sea_lion_completed
			unlock_decision_category_tooltip = world_stage_sealion_category
		}
	}
	
	focus = {
		id = REI_case_blue	# Fall Blau
		icon = GFX_focus_generic_western_enemies
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_barbarossa }
		
		relative_position_id = REI_barbarossa
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		allow_branch = {
			always = no
		}
		
		ai_will_do = { factor = 10 }
		
		available = {
			has_global_flag = world_stage_world_war_2_is_active
		}
		
		completion_reward = {
			
		}
	}
	
	focus = {
		id = REI_thrust_to_moscow
		icon = GFX_focus_ger_strike_at_the_source
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_barbarossa }
		
		relative_position_id = REI_barbarossa
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 999 }
		
		available = {
			has_global_flag = world_stage_world_war_2_is_active
			custom_trigger_tooltip = {
				has_global_flag = world_stage_theater_smolensk_is_active
				tooltip = theater_active_smolensk
			}
			custom_trigger_tooltip = {
				NOT = {  11 = { check_variable = { theater_owner_coalition = 3 } } }
				tooltip = theater_russia_not_controlled_axis
			}
		}
		
		completion_reward = {
			# cosmetic event
			custom_effect_tooltip = theater_scope_smolensk
			if = {
				limit = { 10 = { OR = { check_variable = { coalition_side_attack = 1 } check_variable = { coalition_side_attack = 2 } } } }
				add_to_variable = {
					10.attacker_strategic_advantage = 1
					tooltip = world_stage_add_strategic_advantage_defender
				}
			} else = {
				add_to_variable = {
					10.defender_strategic_advantage = 1
					tooltip = world_stage_add_strategic_advantage_attacker
				}
			}
			custom_effect_tooltip = theater_scope_russia
			add_to_variable = {
				11.attacker_strategic_advantage = 1
				tooltip = world_stage_add_strategic_advantage_attacker
			}
		}
	}
	
	focus = {
		id = REI_volksstrum
		icon = GFX_focus_REI_volksstrum
		search_filters = { FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_blitzkrieg focus = REI_barbarossa }
		
		relative_position_id = REI_blitzkrieg
		x = 3
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 100 }
		
		available = {
			has_global_flag = world_stage_world_war_2_is_active
			OR = {
				custom_trigger_tooltip = {
					tooltip = theater_active_germany
					6 = { has_state_flag = theater_is_active }
				}
				custom_trigger_tooltip = {
					tooltip = theater_active_westphalia
					7 = { has_state_flag = theater_is_active }
				}
				custom_trigger_tooltip = {
					tooltip = theater_active_austria
					26 = { has_state_flag = theater_is_active }
				}
			}
		}
		
		completion_reward = {
			hidden_effect = { news_event = ostasien.14 }
			set_temp_variable = { ger_forces_value = 30 }
			if = { limit = { 6 = { has_state_flag = theater_is_active } } add_to_temp_variable = { number_of_theaters = 1 } }
			if = { limit = { 7 = { has_state_flag = theater_is_active } } add_to_temp_variable = { number_of_theaters = 1 } }
			if = { limit = { 26 = { has_state_flag = theater_is_active } } add_to_temp_variable = { number_of_theaters = 1 } }
			divide_temp_variable = { ger_forces_value = number_of_theaters?0 }
			add_to_variable = {
				var = 101.world_stage_power
				value = 30
				tooltip = add_world_stage_power_tt
			}
			custom_effect_tooltip = theater_scope_germany
			if = {
				limit = { 6 = { has_state_flag = theater_is_active } }
				hidden_effect = { 6 = { add_to_variable = { world_stage_power_deployed_by^101 = ger_forces_value }  world_stage_state_update_current_day = yes } }	# proxy for Berlin
				subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
					101.world_stage_power = ger_forces_value
					tooltip = world_stage_deploy_power
				}
				
			} else = { custom_effect_tooltip = world_stage_possibly_reinforce_here }
			custom_effect_tooltip = theater_scope_westphalia
			if = {
				limit = { 7 = { has_state_flag = theater_is_active } }
				hidden_effect = { 7 = { add_to_variable = { world_stage_power_deployed_by^101 = ger_forces_value }  world_stage_state_update_current_day = yes } }	# proxy for Western Germany
				subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
					101.world_stage_power = ger_forces_value
					tooltip = world_stage_deploy_power
				}
				
			} else = { custom_effect_tooltip = world_stage_possibly_reinforce_here }
			custom_effect_tooltip = theater_scope_austria
			if = {
				limit = { 26 = { has_state_flag = theater_is_active } }
				hidden_effect = { 26 = { add_to_variable = { world_stage_power_deployed_by^101 = ger_forces_value }  world_stage_state_update_current_day = yes } }	# proxy for Austria
				subtract_from_variable = {	# this operation's tooltip IS the deployment tooltip, actual deployment is hidden to avoid the wrong scope appering in the focus effect
					101.world_stage_power = ger_forces_value
					tooltip = world_stage_deploy_power
				}
				
			} else = { custom_effect_tooltip = world_stage_possibly_reinforce_here }
		}
	}
	
	### HOME DEVELOPMENT AND REARMAMENT
	
	focus = {
		id = REI_west_ost_wall
		icon = GFX_focus_REI_west_ost_wall
		search_filters = { FOCUS_FILTER_WORLD FOCUS_FILTER_MILITARY }
		
		prerequisite = { focus = REI_denounce_versailles }
		
		relative_position_id = REI_denounce_versailles
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 modifier = { factor = 10 date > 1937.6.1 } }
		
		bypass = {
			hidden_trigger = { has_global_flag = REI_west_ost_wall_completed }
		}
		
		completion_reward = {
			custom_effect_tooltip = theater_scope_germany
			add_to_variable = {
				7.defender_strategic_advantage = 0.5
				tooltip = world_stage_add_strategic_advantage_defender
			}
			custom_effect_tooltip = theater_scope_westphalia
			add_to_variable = {
				6.defender_strategic_advantage = 0.5
				tooltip = world_stage_add_strategic_advantage_defender
			}
			army_experience = 10
			set_global_flag = REI_west_ost_wall_completed
		}
	}
	
	focus = {
		id = REI_army_tech
		icon = GFX_focus_REI_army_tech
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_west_ost_wall }
		
		relative_position_id = REI_west_ost_wall
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 modifier = { factor = 10 date > 1938.1.1 } }
		
		completion_reward = {
			effect_tooltip = {
				add_tech_bonus = {
					name = land_equipment_bonus
					bonus = 1.0
					uses = 2
					category = land_equipment_category
				}
			}
			hidden_effect = {
				add_tech_bonus = {
					name = land_equipment_bonus
					bonus = 1.0
					uses = 1
					category = armor
					category = artillery
					category = infantry_weapons
					category = cat_mechanized_equipment
					category = mot_rockets
				}
			}
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 5
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_air_tech
		icon = GFX_focus_HIR_air_force_modernized
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_west_ost_wall }
		
		relative_position_id = REI_west_ost_wall
		x = 1
		y = 2
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_tech_bonus = {
				name = air_equipment_bonus
				bonus = 1.0
				uses = 2
				category = air_equipment
			}
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 5
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_home_construction # Four Year Plan
		icon = GFX_focus_REI_four_years_plan
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_denounce_versailles }
		
		relative_position_id = REI_denounce_versailles
		x = 4
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			crash_1929_decrease_level = yes
			add_tech_bonus = {
				name = construction_tech_bonus
				bonus = 1.0
				uses = 1
				category = construction_tech
			}
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 5
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_home_industry # Autarky
		icon = GFX_focus_REI_autarky
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_home_construction }
		
		relative_position_id = REI_home_construction
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_offsite_building = { type = industrial_complex level = 1 }
			add_tech_bonus = {
				name = concentrated_dispersed_tech_bonus
				bonus = 1.0
				uses = 1
				category = concentrated_industry_category
				category = dispersed_industry_category
			}
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 5
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_home_infrastructure # # Großraumwirtschaft
		icon = GFX_focus_REI_home_infrastructure
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_home_construction }
		
		relative_position_id = REI_home_construction
		x = 1
		y = 2
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_tech_bonus = {
				name = concentrated_dispersed_tech_bonus
				bonus = 1.0
				uses = 1
				category = concentrated_industry_category
				category = dispersed_industry_category
			}
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 2
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_reichskommissariats
		icon = GFX_focus_REI_reichskommissariat
		search_filters = { FOCUS_FILTER_WORLD FOCUS_FILTER_POLITICAL }
		
		prerequisite = { focus = REI_home_infrastructure }
		prerequisite = { focus = REI_attack_poland }
		
		relative_position_id = REI_home_infrastructure
		x = 0
		y = 3
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			swap_ideas = {
				remove_idea = REI_idea_generalkommissariat
				add_idea = REI_idea_reichskommissariat
			}
			add_political_power = 100
			hidden_effect = {
				every_character = {
					limit = { has_character_flag = dual_leader_first_title_generalkomissar }
					clr_character_flag = dual_leader_first_title_generalkomissar
					set_character_flag = dual_leader_first_title_reichskomissar
				}
			}
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 5
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_synthetic_resources
		icon = GFX_focus_REI_synth_resources
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_WORLD }
		
		prerequisite = { focus = REI_home_industry }
		
		relative_position_id = REI_home_industry
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_offsite_building = { type = synthetic_refinery level = 1 }
			add_tech_bonus = {
				name = JAP_coal_liquification
				bonus = 1.0
				uses = 1
				category = synth_resources	
			}
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 2
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_extra_tech
		icon = GFX_focus_REI_research
		search_filters = { FOCUS_FILTER_RESEARCH }
		
		prerequisite = { focus = REI_synthetic_resources focus = REI_air_tech }
		
		relative_position_id = REI_synthetic_resources
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 100 }
		
		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = REI_volkswagen
		icon = GFX_focus_REI_volkswagen
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_WORLD }
		dynamic = yes
		
		prerequisite = { focus = REI_home_industry }
		
		relative_position_id = REI_home_industry
		x = 1
		y = 2
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_tech_bonus = {
				name = motorized_bonus
				bonus = 1.0
				category = motorized_equipment
			}
			add_offsite_building = { type = arms_factory level = 1 }
			custom_effect_tooltip = metropolis_scope_germany
			add_to_variable = {
				var = 101.world_stage_power
				value = 2
				tooltip = add_world_stage_power_no_scope_tt
			}
		}
	}
	
	focus = {
		id = REI_wonder_waffle
		icon = GFX_focus_REI_wonder_waffle
		search_filters = { FOCUS_FILTER_RESEARCH }
		
		prerequisite = { focus = REI_extra_tech }
		
		relative_position_id = REI_extra_tech
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 5 }
		
		completion_reward = {
			add_tech_bonus = {
				name = secret_bonus
				bonus = 1.0
				uses = 4
				category = electronics
				category = nuclear
				category = rocketry
			}
		}
	}
	
	### COLONIAL DEVELOPMENT
	
	focus = {
		id = REI_civilian_administration
		icon = GFX_focus_REI_loyal_administration
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
		
		mutually_exclusive = { focus = REI_wehrmacht_administration focus = REI_ss_administration }
		prerequisite = { focus = REI_state_of_affairs }
		
		relative_position_id = REI_state_of_affairs
		x = -2
		y = 1
		cost = 10
		
		offset = {
			x = 1
			y = 0
			trigger = { has_global_flag = religion_cthulhu_allowed }
		}
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 20 modifier = { factor = 0.5 has_government = fascism } }
		
		completion_reward = {
			add_ideas = REI_idea_loyal_administration
		}
	}
	
	focus = {
		id = REI_wehrmacht_administration
		icon = GFX_focus_REI_wehrmacht_administration
		search_filters = { FOCUS_FILTER_MANPOWER }
		
		mutually_exclusive = { focus = REI_ss_administration focus = REI_civilian_administration }
		prerequisite = { focus = REI_state_of_affairs }
		
		relative_position_id = REI_civilian_administration
		x = 2
		y = 0
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 20 }
		
		completion_reward = {
			add_ideas = REI_idea_military_rule
		}
	}
	
	focus = {
		id = REI_ss_administration
		icon = GFX_focus_REI_special_jurisdiction
		search_filters = { FOCUS_FILTER_MANPOWER }
		
		mutually_exclusive = { focus = REI_wehrmacht_administration focus = REI_civilian_administration }
		prerequisite = { focus = REI_state_of_affairs }
		
		relative_position_id = REI_wehrmacht_administration
		x = 2
		y = 0
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 20 modifier = { factor = 0.5 has_government = autocracy } }
		
		available = {
			has_government = fascism
		}
		
		completion_reward = {
			add_ideas = REI_idea_special_jurisdiction
		}
	}
	
	focus = {
		id = REI_coopt_local_leaderships
		icon = GFX_focus_REI_coopt_local_leaderships
		search_filters = { FOCUS_FILTER_MILITARY }
		
		mutually_exclusive = { focus = REI_commandeer_industry }
		prerequisite = { focus = REI_civilian_administration focus = REI_wehrmacht_administration }
		
		relative_position_id = REI_wehrmacht_administration
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 20 modifier = { factor = 0.5 has_government = fascism } }
		
		completion_reward = {
			add_ideas = REI_idea_coopt_leadership
		}
	}
	
	focus = {
		id = REI_commandeer_industry
		icon = GFX_focus_REI_commandeer_industry
		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		mutually_exclusive = { focus = REI_coopt_local_leaderships }
		prerequisite = { focus = REI_wehrmacht_administration focus = REI_ss_administration }
		
		relative_position_id = REI_wehrmacht_administration
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 20 modifier = { factor = 0.5 has_government = autocracy } }
		
		completion_reward = {
			add_ideas = REI_idea_commandeer_industry
		}
	}
	
	focus = {
		id = REI_help_japanese_strategy
		icon = GFX_focus_REI_japanese_strategy
		search_filters = { FOCUS_FILTER_DIPLOMACY }
		
		mutually_exclusive = { focus = REI_help_shikoku_strategy }
		prerequisite = { focus = REI_coopt_local_leaderships focus = REI_commandeer_industry }
		
		relative_position_id = REI_coopt_local_leaderships
		x = 0
		y = 2
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 3
				has_completed_focus = REI_colonial_hegemony
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = SHI
					value > 100
				}
			}
		}
		
		completion_reward = {
			custom_effect_tooltip = PRO_trade_japan_tt
			every_other_country = {
				limit = {
					NOT = { tag = OSA tag = HIR tag = KOB tag = REI tag = FER tag = JOS tag = AMC tag = OKI tag = PRT tag = GAN }
				}
				hidden_effect = { add_ideas = REI_idea_trade_bonus_hidden }
				add_opinion_modifier = {
					target = REI
					modifier = REI_diplomatic_overtures
				}
				add_opinion_modifier = {
					target = REI
					modifier = REI_diplomatic_overtures_trade
				}
			}
		}
	}
	
	focus = {
		id = REI_help_shikoku_strategy
		icon = GFX_focus_REI_bet_on_shikoku
		search_filters = { FOCUS_FILTER_DIPLOMACY }
		
		mutually_exclusive = { focus = REI_help_japanese_strategy }
		prerequisite = { focus = REI_commandeer_industry focus = REI_coopt_local_leaderships }
		
		relative_position_id = REI_commandeer_industry
		x = 0
		y = 2
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 3
				has_completed_focus = REI_matsuyama_pact
			}
			modifier = {
				factor = 0
				has_opinion = {
					target = SHI
					value < 1
				}
			}
		}
		
		available = {
			SHI = {
				exists = yes
				NOT = { has_war_with = REI }
			}
		}
		
		completion_reward = {
			# event for SHI
			SHI = {
				add_opinion_modifier = {
					target = REI
					modifier = REI_prefered_partner
				}
				add_opinion_modifier = {
					target = REI
					modifier = REI_prefered_partner_trade
				}
				add_ideas = REI_idea_prefered_partner
			}
			hidden_effect = {
				add_opinion_modifier = {
					target = SHI
					modifier = REI_prefered_partner
				}
				add_opinion_modifier = {
					target = SHI
					modifier = REI_prefered_partner_trade
				}
				add_ai_strategy = {
					type = alliance
					id = SHI
					value = 200
				}
				SHI = {
					add_ai_strategy = {
						type = alliance
						id = REI
						value = 200
					}
				}
			}
		}
	}
	
	focus = {
		id = REI_local_industry
		icon = GFX_focus_generic_arms_factory
		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		prerequisite = { focus = REI_state_of_affairs  focus = REI_reinforce_garrison }
		
		relative_position_id = REI_reinforce_garrison
		x = 1
		y = 1
		cost = 10
		offset = {
			x = -1
			y = 1
			trigger = { has_global_flag = religion_cthulhu_allowed }
		}
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			random_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
			}
			random_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	
	focus = {
		id = REI_german_standard
		icon = GFX_focus_REI_german_engineering
		search_filters = { FOCUS_FILTER_RESEARCH }
		
		prerequisite = { focus = REI_local_industry }
		
		relative_position_id = REI_local_industry
		x = -2
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1.0
				uses = 1
				category = industry
			}
			add_tech_bonus = {
				name = computing_tech_bonus
				bonus = 1
				uses = 1
				category = computing_tech
			}
		}
	}
	
	focus = {
		id = REI_local_volunteers
		icon = GFX_focus_REI_local_volunteers
		search_filters = { FOCUS_FILTER_MANPOWER }
		
		prerequisite = { focus = REI_local_industry }
		
		relative_position_id = REI_local_industry
		x = 3
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 modifier = { factor = 10 has_war = yes } }
		
		completion_reward = {
			add_ideas = REI_idea_local_volunteers
		}
	}
	
	focus = {
		id = REI_secret_police
		icon = GFX_focus_REI_secret_police
		search_filters = { FOCUS_FILTER_SPY }
		
		prerequisite = { focus = REI_local_industry }
		
		relative_position_id = REI_local_industry
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 5 modifier = { factor = 20 any_controlled_state = { NOT = { is_core_of = REI } } } }
		
		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = REI_idea_secret_police_lar
			} else = {
				add_ideas = REI_idea_secret_police
			}
			custom_effect_tooltip = REI_secret_police_tt
			hidden_effect = {
				division_template = {
					name = "Polizeiregiment"
					division_names_group = REI_POLICE_01 ### CENSORED VERSION, UNCENSORED IS REI_POLICE_02
					regiments = {
						cavalry = { x = 0 y = 0 }
						cavalry = { x = 0 y = 1 }
						cavalry = { x = 0 y = 2 }
						cavalry = { x = 1 y = 0 }
						cavalry = { x = 1 y = 1 }
						cavalry = { x = 1 y = 2 }
					}
					support = {
						military_police = { x = 0 y = 0 }
					}
					priority = 0
				}
				#capital_scope = {
				#	create_unit = {
				#			division = "name = \"Polizeiregiment\" division_template = \"Polizeiregiment\" start_experience_factor = 0.33 start_equipment_factor = 1"
				#			owner = ROOT
				#	}
				#}
			}
		}
	}
	
	focus = {
		id = REI_seto_sea_strategy
		icon = GFX_focus_REI_seto_sea_supremacy
		search_filters = {  }
		
		prerequisite = { focus = REI_german_standard }
		
		relative_position_id = REI_german_standard
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = naval_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
	}
	
	focus = {
		id = REI_local_military_schools
		icon = GFX_focus_REI_military_academy
		search_filters = { FOCUS_FILTER_MILITARY }
		
		prerequisite = { focus = REI_german_standard }
		
		relative_position_id = REI_german_standard
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}
	
	focus = {
		id = REI_modernize_equipment
		icon = GFX_focus_REI_modern_equipment
		search_filters = { FOCUS_FILTER_RESEARCH }
		
		prerequisite = { focus = REI_local_volunteers focus = REI_secret_police }
		
		relative_position_id = REI_secret_police
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 5 }
		
		completion_reward = {
			add_tech_bonus = {
				name = infantry_artillery_bonus
				bonus = 2.0
				uses = 2
				category = infantry_weapons
				category = artillery
			}
		}
	}
	
	focus = {
		id = REI_sturmpioniere
		icon = GFX_focus_REI_sappers
		search_filters = { FOCUS_FILTER_RESEARCH }
		
		prerequisite = { focus = REI_local_volunteers focus = REI_secret_police }
		
		relative_position_id = REI_local_volunteers
		x = 0
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 5 }
		
		completion_reward = {
			add_tech_bonus = {
				name = support_special_forces_bonus
				bonus = 2.0
				uses = 2
				category = support_tech
				category = cat_special_forces_generic
			}
		}
	}
	
	focus = {
		id = REI_cult_of_cthulhu
		icon = GFX_focus_REI_call_of_cthulhu1
		search_filters = { FOCUS_FILTER_RELIGION }
		
		prerequisite = { focus = REI_paganphiles }
		
		relative_position_id = REI_paganphiles
		x = 1
		y = 1
		cost = 10
		
		available = {
			if = {
				limit = { NOT = { has_idea_with_trait = REI_crypto_archaeologist_cthulhu} }
				has_idea_with_trait = REI_crypto_archaeologist
			}
		}
		
		allow_branch = {
			has_global_flag = religion_cthulhu_allowed
		}
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 999 }	# because why not
		
		completion_reward = {
			hidden_effect = { news_event = ostasiencthulhu.2 }
			set_religion_cthulhu = yes
			hidden_effect = {
				add_trait = {
					 character = REI_rene_belloq
					 slot = political_advisor
					 trait = REI_crypto_archaeologist_cthulhu
				}
				remove_trait = {
					 character = REI_rene_belloq
					 slot = political_advisor
					 trait = REI_crypto_archaeologist
				}
			}
			REI_rene_belloq = {
				custom_effect_tooltip = conversion_cthulhu_50_tt
			}
			REI_arnold_toht = {
				promote_character = yes
				set_character_flag = dual_leader_first_title_generalkomissar
				set_character_flag = dual_leader_id_alfred_rosenberg
				set_character_flag = dual_leader_second_title_reichchancellror
			}
		}
	}
	
	focus = {
		id = REI_cult_of_cthulhu_a
		icon = GFX_focus_REI_call_of_cthulhu2
		search_filters = { FOCUS_FILTER_RELIGION FOCUS_FILTER_WAR_SUPPORT }
		
		prerequisite = { focus = REI_cult_of_cthulhu }
		
		relative_position_id = REI_cult_of_cthulhu
		x = -1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 999 }
		
		completion_reward = {
			custom_effect_tooltip = cthulhu_conversion_tooltip
			add_stability = -0.1
			add_war_support = 0.1
			hidden_effect = {
				capital_scope = {
					set_variable = { state_religion_buddhism = 0 }
					set_variable = { state_religion_shinto = 0 }
					set_variable = { state_religion_christianity = 0 }
					set_variable = { state_religion_taoism = 0 }
					set_variable = { state_religion_confucianism = 0 }
					set_variable = { state_religion_secularism = 0 }
					set_variable = { state_religion_cthulhu = 100 }
					set_variable = { state_religion = 7 }
				}
			}
		}
	}
	
	focus = {
		id = REI_cult_of_cthulhu_b
		icon = GFX_focus_REI_call_of_cthulhu3
		search_filters = { FOCUS_FILTER_RELIGION }
		
		prerequisite = { focus = REI_cult_of_cthulhu }
		
		relative_position_id = REI_cult_of_cthulhu
		x = 1
		y = 1
		cost = 10
		
		available_if_capitulated = yes
		
		ai_will_do = { factor = 10 }
		
		completion_reward = {
			random_list = {
				1 = { news_event = ostasiencthulhu.3 }	# research
				1 = { news_event = ostasiencthulhu.4 }	# conversion spirit
				1 = { news_event = ostasiencthulhu.5 }	# madness
				1 = { news_event = ostasiencthulhu.6 }	# dagonites
			}
		}
	}
}
#FOCUS_FILTER_SPY
#FOCUS_FILTER_ANNEXATION
#FOCUS_FILTER_DIPLOMACY
#FOCUS_FILTER_EQUIPMENT
#FOCUS_FILTER_INDUSTRY
#FOCUS_FILTER_MANPOWER
#FOCUS_FILTER_MILITARY
#FOCUS_FILTER_POLITICAL
#FOCUS_FILTER_RESEARCH
#FOCUS_FILTER_STABILITY
#FOCUS_FILTER_WAR_SUPPORT
#FOCUS_FILTER_RELIGION
#FOCUS_FILTER_WORLD