focus_tree = {
	id = AMO
	continuous_focus_position = {
		x = 0
		y = 800
	}
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = AMO
		}
	}

	focus = {
		id = AMO_war_started
		icon = GFX_focus_generic_attack_shogun
		cost = 0
		available = {
			always = no
		}

		x = 5
		y = 0

		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2000
				producer = AMO
			}

			hidden_effect = {
				set_variable = {
					weaken_sho = 0
				}
				set_variable = {
					chance_collapse = 0
				}
				set_variable = {
					military_development_index = 0
				}
			}
		}
	}

	focus = {
		id = AMO_send_Tamemoto_away
		icon = GFX_focus_AMO_send_tamemoto
		cost = 5
		x = 4
		y = 1
		prerequisite = { focus =  AMO_war_started }
		mutually_exclusive = { focus = AMO_send_our_generals_to_school }
		completion_reward = {
			custom_effect_tooltip = AMO_general_retire_tt
			custom_effect_tooltip = AMO_increase_tension_slight
			custom_effect_tooltip = AMO_chance_collapse_slight
			
			hidden_effect = {
				retire_character = AMO_kuroki_tamemoto

				add_to_variable = { weaken_sho = -10 }
				add_to_variable = { chance_collapse = 10 }
			}
		}
	}

	focus = {
		id = AMO_provide_guns
		icon = GFX_focus_AMO_provide_guns
		cost = 5
		x = 4
		y = 2

		prerequisite = { 
			focus = AMO_war_started 
			focus = AMO_send_Tamemoto_away
		
		}
		mutually_exclusive = { focus = AMO_women_in_army }

		completion_reward = {
			custom_effect_tooltip = AMO_provide_guns_tt
			custom_effect_tooltip = AMO_increase_tension_medium
			custom_effect_tooltip = AMO_chance_collapse_high
			hidden_effect = {
				if = {
					limit = {
						has_equipment = {
							infantry_equipment_1 > 2000
						}
					}

					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -2000
						producer = AMO
					}
				}
				else = {
					add_timed_idea = {
						idea = AMO_paying_weapons
						days = 100
					}
				}
				add_to_variable = { weaken_sho = -20 }
				add_to_variable = { chance_collapse = 30 }
			}
		}
	}

	focus = {
		id = AMO_lend_naval_industry
		icon = GFX_focus_AMO_lend_naval_industry
		cost = 5
		x = 4
		y = 3

		prerequisite = { 
			focus = AMO_women_in_army 
			focus = AMO_provide_guns
		
		}
		mutually_exclusive = { focus = AMO_international_help }

		completion_reward = {
			custom_effect_tooltip = AMO_lend_dockyards_tt
			custom_effect_tooltip = AMO_increase_tension_slight
			custom_effect_tooltip = AMO_chance_collapse_medium
			
			hidden_effect = {
				add_timed_idea = {
					idea = AMO_lending_dockyards
					days = 70
				}
				add_to_variable = { weaken_sho = -10 }
				add_to_variable = { chance_collapse = 20 }
			}
		}
	}

	focus = {
		id = AMO_promise_asylum
		icon = GFX_focus_AMO_promise_asylum
		cost = 5
		x = 4
		y = 4

		prerequisite = { 
			focus = AMO_lend_naval_industry 
			focus = AMO_international_help
		
		}
		mutually_exclusive = { focus = AMO_buy_foreign_tanks }

		completion_reward = {
			custom_effect_tooltip = AMO_asylum_tt
			custom_effect_tooltip = AMO_increase_tension_high
			custom_effect_tooltip = AMO_chance_collapse_high
			hidden_effect = {
				add_stability = -0.15
				SHO = {
					SHO_hatazo_adachi = {
						add_unit_leader_trait = hidden_sympathies
					}
				}
				add_to_variable = { weaken_sho = -30 }
				add_to_variable = { chance_collapse = 30 }
			}
		}
	}

	focus = {
		id = AMO_send_our_generals_to_school
		icon = GFX_focus_AMO_general_school
		cost = 5
		x = 6
		y = 1
		prerequisite = { focus = AMO_war_started }
		mutually_exclusive = { focus = AMO_send_Tamemoto_away }
		completion_reward = {
			custom_effect_tooltip = AMO_generals_to_school_tt
			custom_effect_tooltip = AMO_increase_mil_index_tt

			hidden_effect = {
				AMO_mitsuru_ushijima = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist skilled_staffer
					}
				}

				AMO_oku_yasukata = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist inflexible_strategist harsh_leader
					}
				}

				AMO_kuroki_tamemoto = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist inflexible_strategist harsh_leader skilled_staffer
					}
				}

				AMO_yamagata_aritomo = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist harsh_leader skilled_staffer trickster hill_fighter trait_mountaineer naval_invader
					}
				}

				AMO_oyama_iwao = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						inflexible_strategist skilled_staffer trickster hill_fighter trait_mountaineer naval_invader
					}
				}

				AMO_hasegawa_yoshimichi = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist inflexible_strategist harsh_leader skilled_staffer trickster hill_fighter urban_assault_specialist naval_invader
					}
				}

				AMO_kawamura_kageaki = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist inflexible_strategist harsh_leader skilled_staffer trickster hill_fighter trait_mountaineer urban_assault_specialist
					}
				}

				AMO_terauchi_masatake = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist harsh_leader skilled_staffer trickster hill_fighter naval_invader
					}
				}

				AMO_uehara_yusaku = {
					remove_unit_leader_trait = old_guard
					add_random_trait = { 
						brilliant_strategist inflexible_strategist harsh_leader skilled_staffer hill_fighter trait_mountaineer naval_invader
					}
				}
			
				add_to_variable = { military_development_index = 1 }
			}
		}
	}

	focus = {
		id = AMO_women_in_army
		icon = GFX_focus_AMO_daughters_of_amaterasu
		cost = 5
		x = 6
		y = 2

		prerequisite = { 
			focus = AMO_war_started 
			focus = AMO_send_Tamemoto_away
		
		}
		mutually_exclusive = { focus = AMO_provide_guns }

		completion_reward = {
			custom_effect_tooltip = AMO_women_army_tt
			custom_effect_tooltip = AMO_increase_mil_index_tt
			hidden_effect = {
				set_rule = {
					can_generate_female_aces = yes
				}
				add_ideas = AMO_women_army
				add_to_variable = { military_development_index = 1 }
			}
		}
	}

	focus = {
		id = AMO_international_help
		icon = GFX_focus_CHU_renamed_party
		cost = 5
		x = 6
		y = 3

		prerequisite = { 
			focus = AMO_women_in_army 
			focus = AMO_provide_guns
		
		}
		mutually_exclusive = { focus = AMO_lend_naval_industry }

		completion_reward = {
			custom_effect_tooltip = AMO_as_help_tt
			custom_effect_tooltip = AMO_increase_mil_index_tt

			hidden_effect = {
				country_event = amaterasu.4
				add_to_variable = { military_development_index = 1 }
			}

		}
	}

	focus = {
		id = AMO_buy_foreign_tanks
		icon = GFX_focus_AMO_buy_foreign_tanks
		cost = 5
		x = 6
		y = 4

		prerequisite = { 
			focus = AMO_lend_naval_industry 
			focus = AMO_international_help
		
		}
		mutually_exclusive = { focus = AMO_promise_asylum }

		completion_reward = {

			add_equipment_to_stockpile = {
				type = light_tank_equipment_1
				amount = 450
				producer = REI
			}

			add_tech_bonus = {
				bonus = 1
				uses = 1
				category = armor
			}
			add_political_power = -50

			custom_effect_tooltip = AMO_light_tank_brigade_tt
			custom_effect_tooltip = AMO_increase_mil_index_tt

			hidden_effect = {
				division_template = {
					name = "Experimental Tank Brigade"
					is_locked = no
					priority = 2
					regiments = {
						light_armor = { x = 0 y = 0 }
						light_armor = { x = 0 y = 1 }
						light_armor = { x = 0 y = 2 }
						cavalry = { x = 1 y = 0 }
						cavalry = { x = 1 y = 1 }
						cavalry = { x = 1 y = 2 }
						cavalry = { x = 1 y = 3 }
						light_armor = { x = 2 y = 0 }
						light_armor = { x = 2 y = 1 }
						light_armor = { x = 2 y = 2 }
					}
					support = { 
					} 
				}
				set_technology = {
					gwtank = 1
				}
				add_to_variable = { military_development_index = 1 }
			}
		}
	}

	focus = {
		id = AMO_enact_plan
		icon = GFX_focus_KYU_elite_marines
		cost = 5.715
		x = 5
		y = 5

		prerequisite = { 
			focus = AMO_buy_foreign_tanks 
			focus = AMO_promise_asylum
		}

		completion_reward = {
			if = {
				limit = {
					has_variable = weaken_sho
					has_variable = chance_collapse
				}
				hidden_effect = {
					SHO = {
						add_days_mission_timeout = {
							mission = impending_revolt
							days = AMO.weaken_sho
						}
					}

					set_temp_variable = { temp1 = 100 }
					subtract_from_temp_variable = { temp1 = chance_collapse }

					random_list = { # Will the nation collapse?
						temp1 = { # No collapse
							country_event = { id = amaterasu.16 days = 1 }
						}
						chance_collapse = { # Collapse
							country_event = { id = amaterasu.15 days = 1 }
						}
					}
				}

				if = {
					limit = {
						check_variable = { chance_collapse > 0 }
						check_variable = { chance_collapse < 33 }
					}

					custom_effect_tooltip = AMO_low_collapse_tt

					else_if = {
						limit = {
							check_variable = { chance_collapse > 33 }
							check_variable = { chance_collapse < 66 }
						}

						custom_effect_tooltip = AMO_medium_collapse_tt
					}
					else_if = {
						limit = {
							check_variable = { chance_collapse > 66 }
						}

						custom_effect_tooltip = AMO_high_collapse_tt
					}
					else = {
						custom_effect_tooltip = AMO_no_collapse_tt
					}
				}
				


				if = {
					limit = {
						check_variable = { military_development_index < 1 }
					}

					custom_effect_tooltip = AMO_mil_index_0_tt
					
					else_if = {
						limit = {
							check_variable = { military_development_index < 2 }
						}

						custom_effect_tooltip = AMO_mil_index_1_tt
						
						hidden_effect = {
							add_ideas = {
								AMO_reformed_military_lim
							}
						}
					}
					else_if = {
						limit = {
							check_variable = { military_development_index < 3 }
						}

						custom_effect_tooltip = AMO_mil_index_2_tt

						hidden_effect = {
							add_ideas = {
								AMO_reformed_military_mod
							}
						}
					}
					else_if = {
						limit = {
							check_variable = { military_development_index < 4 }
						}

						custom_effect_tooltip = AMO_mil_index_3_tt

						hidden_effect = {
							add_ideas = {
								AMO_reformed_military_ext
							}
						}
					}
					else_if = {
						limit = {
							check_variable = { military_development_index < 5 }
						}

						custom_effect_tooltip = AMO_mil_index_4_tt

						hidden_effect = {
							add_ideas = {
								AMO_reformed_military_abs
							}
						}
					}
				}
				
			}

			else = {
				custom_effect_tooltip = AMO_no_vars_tt
			}
		}
	}

	focus = {
		id = AMO_national_collapse
		icon = GFX_focus_SHO_peasant_protests
		cost = 0
		x = 10
		y = 0

		available = {
			always = no
		}

		bypass = {
			has_idea = AMO_national_collapse
		}

		completion_reward = {

		}
	}

	focus = {
		id = AMO_save_the_economy
		icon = GFX_focus_AMO_save_economy
		cost = 5.8
		x = 8
		y = 2

		prerequisite = { focus = AMO_national_collapse }

		completion_reward = {
			add_ideas = {
				civilian_economy
				closed_economy
				volunteer_only
			}

			if = {
				limit = {
					has_idea = AMO_national_collapse
				}
				swap_ideas = {
					remove_idea = AMO_national_collapse
					add_idea = AMO_national_collapse_1
				}

				else_if = {
					limit = {
						has_idea = AMO_national_collapse_1
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_1
						add_idea = AMO_national_collapse_2
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_2
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_2
						add_idea = AMO_national_collapse_3
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_3
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_3
						add_idea = AMO_national_collapse_4
					}
				}
			}
		}
	}

	focus = {
		id = AMO_slash_navy_budget
		icon = GFX_focus_generic_money
		cost = 5.8
		x = 9
		y = 1

		prerequisite = { focus = AMO_national_collapse }

		completion_reward = {
			add_timed_idea = {
				idea = AMO_low_navy_budget
				days = 365
			}

			if = {
				limit = {
					has_idea = AMO_national_collapse
				}
				swap_ideas = {
					remove_idea = AMO_national_collapse
					add_idea = AMO_national_collapse_1
				}

				else_if = {
					limit = {
						has_idea = AMO_national_collapse_1
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_1
						add_idea = AMO_national_collapse_2
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_2
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_2
						add_idea = AMO_national_collapse_3
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_3
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_3
						add_idea = AMO_national_collapse_4
					}
				}
			}
		}
	}

	focus = {
		id = AMO_scrap_infrastructure
		icon = GFX_focus_CHU_clans_developt_infrustracture
		cost = 5.8
		x = 11
		y = 1

		prerequisite = { focus = AMO_national_collapse }

		completion_reward = {
			custom_effect_tooltip = AMO_lose_infra
			hidden_effect = {
				196 = {
					set_building_level = {
						type = infrastructure
						level = 2					#add railroad
						instant_build = yes
					}

					set_building_level = {
						type = bunker
						level = 6
					}

					set_building_level = {
						type = coastal_bunker
						level = 6
					}

					set_building_level = {
						type = anti_air_building
						level = 2
					}
				}
			}


			if = {
				limit = {
					has_idea = AMO_national_collapse
				}
				swap_ideas = {
					remove_idea = AMO_national_collapse
					add_idea = AMO_national_collapse_1
				}

				else_if = {
					limit = {
						has_idea = AMO_national_collapse_1
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_1
						add_idea = AMO_national_collapse_2
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_2
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_2
						add_idea = AMO_national_collapse_3
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_3
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_3
						add_idea = AMO_national_collapse_4
					}
				}
			}
		}
	}

	focus = {
		id = AMO_demobilize_army
		icon = GFX_focus_AMO_demobilize_army
		cost = 5.8
		x = 12
		y = 2

		prerequisite = { focus = AMO_national_collapse }

		completion_reward = {
			army_experience = -100
			add_manpower = -5000

			if = {
				limit = {
					has_idea = AMO_national_collapse
				}
				swap_ideas = {
					remove_idea = AMO_national_collapse
					add_idea = AMO_national_collapse_1
				}

				else_if = {
					limit = {
						has_idea = AMO_national_collapse_1
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_1
						add_idea = AMO_national_collapse_2
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_2
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_2
						add_idea = AMO_national_collapse_3
					}
				}
				else_if = {
					limit = {
						has_idea = AMO_national_collapse_3
					}
					swap_ideas = {
						remove_idea = AMO_national_collapse_3
						add_idea = AMO_national_collapse_4
					}
				}
			}

		}
	}

	focus = {
		id = AMO_complete_recovery
		icon = GFX_focus_AMO_complete_recovery
		cost = 2.9
		x = 10
		y = 3

		prerequisite = { focus = AMO_save_the_economy }
		prerequisite = { focus = AMO_slash_navy_budget }
		prerequisite = { focus = AMO_demobilize_army }
		prerequisite = { focus = AMO_scrap_infrastructure }


		completion_reward = {
			custom_effect_tooltip = AMO_recover_total_tt
			hidden_effect = {
				remove_ideas = AMO_national_collapse_4
			}
			add_stability = 0.1
			add_war_support = 0.1
		}
	}

	focus = {
		id = AMO_crushing_defeat
		icon = GFX_focus_KOB_ban_shintoism
		cost = 1
		x = 15
		y = 0
		mutually_exclusive = { focus = AMO_stunning_victory }
		available = {
			NOT = {
				has_idea = AMO_national_collapse
				has_idea = AMO_national_collapse_1
				has_idea = AMO_national_collapse_2
				has_idea = AMO_national_collapse_3
				has_idea = AMO_national_collapse_4
			}
			has_country_flag = AMO_lost_war
		}

		completion_reward = {
			load_focus_tree = generic_focus
		}
	}

	focus = {
		id = AMO_stunning_victory
		#icon = GFX_focus_KOB_ban_shintoism
		cost = 1
		x = 18
		y = 0
		mutually_exclusive = {focus = AMO_crushing_defeat }
		available = {
			NOT = {
				has_idea = AMO_national_collapse
				has_idea = AMO_national_collapse_1
				has_idea = AMO_national_collapse_2
				has_idea = AMO_national_collapse_3
				has_idea = AMO_national_collapse_4
			}
			has_country_flag = AMO_lost_war
		}

		completion_reward = {
			load_focus_tree = generic_focus
		}
	}

}
#FOCUS_FILTER_SPY
#FOCUS_FILTER_ANNEXATION
#FOCUS_FILTER_DIPLOMACY
#FOCUS_FILTER_EQUIPMENT
#FOCUS_FILTER_INDUSTRY
#FOCUS_FILTER_MANPOWER
#FOCUS_FILTER_MILITARY
#FOCUS_FILTER_POLITICAL
#FOCUS_FILTER_RESEARCH
#FOCUS_FILTER_STABILITY
#FOCUS_FILTER_WAR_SUPPORT
#FOCUS_FILTER_RELIGION
#FOCUS_FILTER_WORLD