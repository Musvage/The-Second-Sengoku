scripted_gui = {
	TWR_UN_open = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "TWR_UN_open_container"
		dirty = show_UN_main

		visible = {
			is_ai = no
			NOT = { has_variable = show_UN_main } 
			always = no
		}

		effects = {
			view_UN_button_click = {
					set_variable = { show_UN_main = 1 }
				if = {
					limit = {
						is_in_array = { global.LON_leader = ROOT }
					}
					set_variable = { voting_button_x = 0 }
				}
				else = {
					set_variable = { voting_button_x = -1000 }
				}
				set_variable = { show_SS_trade = 0 }
				set_variable = { show_SS_religion = 0 }
				set_variable = { show_SS_unification = 0 }
			}
		}
	}

	TWR_UN_close = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "TWR_UN_open_container"
		dirty = show_UN_main

		visible = {
			is_ai = no
			check_variable = {
				show_UN_main > 0
			}
		}

		effects = {
			view_UN_button_click = {
				if = {
					limit = { has_variable = show_UN_main }
					clear_variable = show_UN_main
				}
				if = {
					limit = {
						is_in_array = { global.LON_leader = ROOT }
					}
					set_variable = { voting_button_x = 0 }
				}
				else = {
					set_variable = { voting_button_x = -1000 }
				}
			}
		}
	}

	TWR_UN_member = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		window_name = "LoN_member_container"
		dirty = show_UN_main

		visible = {
			is_in_array = { global.LON_members = THIS }
		}
	}

	LoN_main = {
		context_type = player_context
		window_name = "LoN_main_container"
		dirty = show_UN_main
		parent_window_token = politics_tab
		visible = {
			check_variable = { show_UN_main > 0 }
		}

		dynamic_lists = {
			LoN_leader_grid = {
				array = global.LON_leader
				change_scope = yes
				entry_container = LoN_leader_entry
			}
			LoN_members_grid = {
				array = global.LON_members
				change_scope = yes
				entry_container = LoN_members_entry
			}
			LoN_observers_grid = {
				array = global.LON_observers
				change_scope = yes
				entry_container = LoN_observers_entry
			}
		}

		effects = {
			LoN_issue_1_button_click = {
				#country_event = league.1
			}
			LoN_issue_5_button_click = {	# Become member
				#remove_from_array = {
				#	array = global.LON_observers
				#	value = THIS
				#}
				#add_to_array = { global.LON_members = THIS }
				ask_become_member = yes
				#country_event = league.1
			}
			close_UN_button_click = {
				clear_variable = show_UN_main
			}
			LoN_member_flag_icon_click = {
				ROOT = {
					#country_event = league.1
				}
			}
			LoN_observer_flag_icon_click = {
				ROOT = {
					#country_event = league.1
				}
			}
		}

		triggers = {
			LoN_issue_1_button_click_enabled = {
				is_in_array = { global.LON_members = THIS }
				NOT = { is_in_array = { global.LON_observers = THIS } }
			}
			LoN_issue_2_button_click_enabled = {
				is_in_array = { global.LON_members = THIS }
				NOT = { is_in_array = { global.LON_observers = THIS } }
			}
			LoN_issue_3_button_click_enabled = {
				is_in_array = { global.LON_members = THIS }
				NOT = { is_in_array = { global.LON_observers = THIS } }
			}
			LoN_issue_4_button_click_enabled = {
				is_in_array = { global.LON_members = THIS }
				NOT = { is_in_array = { global.LON_observers = THIS } }
			}
			LoN_issue_5_button_click_enabled = {
				NOT = { is_in_array = { global.LON_members = THIS } }
				is_in_array = { global.LON_observers = THIS }
			}
			LoN_issue_6_button_click_enabled = {
				NOT = { is_in_array = { global.LON_members = THIS } }
				NOT = { is_in_array = { global.LON_observers = THIS } }
			}
		}

		properties = {
			LoN_issue_1_button = {
				x = var:LoN_issue_1_button_x
				y = 200
			}
			LoN_issue_2_button = {
				x = var:LoN_issue_2_button_x
				y = 200
			}
			LoN_issue_3_button = {
				x = var:LoN_issue_3_button_x
				y = 200
			}
			LoN_issue_4_button = {
				x = var:LoN_issue_4_button_x
				y = 200
			}
			LoN_issue_5_button = {
				x = var:LoN_issue_5_button_x
				y = 200
			}
			LoN_issue_6_button = {
				x = var:LoN_issue_6_button_x
				y = 200
			}
			LoN_leader_flag_icon = {
				image = "[THIS.GetFlag]"
				x = global.unsc_position_flag
			}
			LoN_member_flag_icon = {
				image = "[THIS.GetFlag]"
			}
			LoN_observer_flag_icon = {
				image = "[THIS.GetFlag]"
			}
			TWR_UNSC_vote_text = {
				x = global.unsc_position_text
			}
		}
	}

	TWR_UN_resolution = {
		context_type = player_context
		window_name = "TWR_UN_resolution_container"
		dirty = show_UN_resolution

		visible = {
			check_variable = { show_UN_resolution > 0 }
		}

		dynamic_lists = {
			TWR_resolution_grid = {
				array = global.TWR_resolution_array
				change_scope = yes
				entry_container = TWR_resolution_entry
			}
		}

		effects = {
			close_resolution_button_click = {
				if = {
					limit = { has_variable = show_UN_resolution }
					clear_variable = show_UN_resolution
				}
				else = {
					set_variable = { show_UN_resolution = 1 }
				}
			}
		}
	}
}

