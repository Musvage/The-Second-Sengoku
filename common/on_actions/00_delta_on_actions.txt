on_actions = {
	
	on_startup = {
	
		effect = {

			every_country = {
				
				set_variable = { ROOT.influence_power = 0.00 }
				set_variable = { ROOT.influence_power_daily_gain = 0.00 }
			
			}
			set_variable = { FER_protests_level = 0 }
			add_to_variable = { FER_protests_level = 35 }
			set_variable = { FER_stalin_trust = 0 }
			set_variable = { FER_protests_frame = 0 }
			set_variable = { FER_stalin_frame = 0 }

			set_variable = { FER_protests_event_frequency = 0 }
			set_variable = { FER_nmth = 0 }

			FER = {
				random_list = {
					33 = {
						set_country_flag = FER_AI_social_democracy
					}
					33 = {
						set_country_flag = FER_AI_appease_people
					}
					33 = {
						set_country_flag = FER_AI_military_state
					}
				}
			}

		}

	}
	
	on_daily = {
	
		effect = {
			
			every_country = {
				if = {
					limit = {
						check_variable = { var = ROOT.influence_level@THIS value = 0 compare = greater_than }
					}
					set_variable = { var = THIS.opinion_about_temp@ROOT value = THIS.opinion@ROOT }
					
					divide_variable = { var = THIS.opinion_about_temp@ROOT value = 2 }
					
					set_variable = { var = THIS.opinion_about@ROOT value = THIS.opinion_about_temp@ROOT }
					
					if = {
						limit = {
							check_variable = { var = THIS.opinion_about_temp@ROOT value = 1 compare = greater_than }
						}
						set_variable = { var = ROOT.influence_multiplier@THIS value = THIS.opinion_about_temp@ROOT }
						
						divide_variable = { var = ROOT.influence_multiplier@THIS value = 50 }
					}
					if = {
						limit = {
							check_variable = { var = THIS.opinion_about_temp@ROOT value = 1 compare = less_than_or_equals }
						}
						set_variable = { var = ROOT.influence_multiplier@THIS value = 1 }
					}
				}
			}
			
			set_variable = { ROOT.influence_power_daily_gain = political_power_daily }
			divide_variable = { ROOT.influence_power_daily_gain = 2 }
			add_to_variable = { ROOT.influence_power = ROOT.influence_power_daily_gain  }
			if = {
				limit = {
					check_variable = { ROOT.influence_power > 100.00 }
				}
				set_variable = { ROOT.influence_power = 100.00 }
			}
			
			clear_array = ROOT.all_countries
			every_country = {
				limit = {
					OR = {
						check_variable = {
							var = ROOT.influence_level@THIS
							value = 0
							compare = greater_than
						}
						check_variable = {
							var = THIS.influence_level@ROOT
							value = 0
							compare = greater_than
						}
					}
				}
				add_to_array = { ROOT.all_countries = THIS.id }
			}
			
			if = {
				limit = {
					date = 1936.1.2
					check_variable = { FER_protests_level = 0 }
				}
				set_variable = { FER_protests_level = 35 }
			}
			
			if = {
				limit = {
					TAG = FER
					NOT = {
						has_country_flag = FER_path_chosen
					}
				}
				if = {
					limit = {
						check_variable = { FER_protests_level > -1 }
						check_variable = { FER_protests_level < 20 }
					}
					add_ideas = FER_protests_idea_0
					remove_ideas = FER_protests_idea_1
					remove_ideas = FER_protests_idea_2
					remove_ideas = FER_protests_idea_3
					remove_ideas = FER_protests_idea_4
				}
				if = {
					limit = {
						check_variable = { FER_protests_level > 19 }
						check_variable = { FER_protests_level < 40 }
					}
					remove_ideas = FER_protests_idea_0
					add_ideas = FER_protests_idea_1
					remove_ideas = FER_protests_idea_2
					remove_ideas = FER_protests_idea_3
					remove_ideas = FER_protests_idea_4
				}
				if = {
					limit = {
						check_variable = { FER_protests_level > 39 }
						check_variable = { FER_protests_level < 60 }
					}
					remove_ideas = FER_protests_idea_0
					remove_ideas = FER_protests_idea_1
					add_ideas = FER_protests_idea_2
					remove_ideas = FER_protests_idea_3
					remove_ideas = FER_protests_idea_4
				}
				if = {
					limit = {
						check_variable = { FER_protests_level > 59 }
						check_variable = { FER_protests_level < 80 }
					}
					remove_ideas = FER_protests_idea_1
					remove_ideas = FER_protests_idea_2
					remove_ideas = FER_protests_idea_3
					add_ideas = FER_protests_idea_3
					remove_ideas = FER_protests_idea_4
				}
				if = {
					limit = {
						check_variable = { FER_protests_level > 79 }
					}
					remove_ideas = FER_protests_idea_0
					remove_ideas = FER_protests_idea_1
					remove_ideas = FER_protests_idea_2
					remove_ideas = FER_protests_idea_3
					add_ideas = FER_protests_idea_4
				}
			}
			if = {
				limit = {
					TAG = FER
					has_country_flag = FER_path_chosen
				}
				remove_ideas = FER_protests_idea_0
				remove_ideas = FER_protests_idea_1
				remove_ideas = FER_protests_idea_2
				remove_ideas = FER_protests_idea_3
				remove_ideas = FER_protests_idea_4
			}
			if = {
				limit = {
					TAG = FER
					date = 1938.8.22
				}
				country_event = primorski.19
			}

			set_temp_variable = { FER_temp_calc = FER_protests_level }
			add_to_temp_variable = { FER_temp_calc = -10 }
			set_variable = { FER_protests_event_frequency = FER_temp_calc }
			set_variable = { FER_nmth = 100 }
			subtract_from_variable = { FER_nmth = FER_protests_event_frequency }
			if = {
				limit = {
					check_variable = { FER_protests_event_frequency < 0 }
				}
				set_variable = { FER_protests_event_frequency = 0 }
			}
		
		}
	
	}

	on_daily = {

		effect = {

			if = {
				limit = {
					check_variable = { FER_stalin_trust < 6 }
				}
				set_variable = { FER_stalin_frame = 1 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 5 }
						check_variable = { FER_stalin_trust < 12 }
					}
				}
				set_variable = { FER_stalin_frame = 2 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 11 }
						check_variable = { FER_stalin_trust < 18 }
					}
				}
				set_variable = { FER_stalin_frame = 3 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 17 }
						check_variable = { FER_stalin_trust < 24 }
					}
				}
				set_variable = { FER_stalin_frame = 4 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 23 }
						check_variable = { FER_stalin_trust < 30 }
					}
				}
				set_variable = { FER_stalin_frame = 5 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 29 }
						check_variable = { FER_stalin_trust < 36 }
					}
				}
				set_variable = { FER_stalin_frame = 6 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 35 }
						check_variable = { FER_stalin_trust < 42 }
					}
				}
				set_variable = { FER_stalin_frame = 7 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 41 }
						check_variable = { FER_stalin_trust < 48 }
					}
				}
				set_variable = { FER_stalin_frame = 8 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 47 }
						check_variable = { FER_stalin_trust < 54 }
					}
				}
				set_variable = { FER_stalin_frame = 9 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 53 }
						check_variable = { FER_stalin_trust < 60 }
					}
				}
				set_variable = { FER_stalin_frame = 10 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 59 }
						check_variable = { FER_stalin_trust < 66 }
					}
				}
				set_variable = { FER_stalin_frame = 11 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 65 }
						check_variable = { FER_stalin_trust < 72 }
					}
				}
				set_variable = { FER_stalin_frame = 12 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 71 }
						check_variable = { FER_stalin_trust < 78 }
					}
				}
				set_variable = { FER_stalin_frame = 13 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 77 }
						check_variable = { FER_stalin_trust < 84 }
					}
				}
				set_variable = { FER_stalin_frame = 14 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 83 }
						check_variable = { FER_stalin_trust < 90 }
					}
				}
				set_variable = { FER_stalin_frame = 15 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_stalin_trust > 89 }
						check_variable = { FER_stalin_trust < 96 }
					}
				}
				set_variable = { FER_stalin_frame = 16 }
			}
			if = {
				limit = {
					check_variable = { FER_stalin_trust > 95 }
				}
				set_variable = { FER_stalin_frame = 17 }
			}


			if = {
				limit = {
					check_variable = { FER_protests_level < 5 }
				}
				set_variable = { FER_protests_frame = 1 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 4 }
						check_variable = { FER_protests_level < 10 }
					}
				}
				set_variable = { FER_protests_frame = 2 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 9 }
						check_variable = { FER_protests_level < 15 }
					}
				}
				set_variable = { FER_protests_frame = 3 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 14 }
						check_variable = { FER_protests_level < 20 }
					}
				}
				set_variable = { FER_protests_frame = 4 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 19 }
						check_variable = { FER_protests_level < 25 }
					}
				}
				set_variable = { FER_protests_frame = 5 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 24 }
						check_variable = { FER_protests_level < 30 }
					}
				}
				set_variable = { FER_protests_frame = 6 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 29 }
						check_variable = { FER_protests_level < 35 }
					}
				}
				set_variable = { FER_protests_frame = 7 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 34 }
						check_variable = { FER_protests_level < 40 }
					}
				}
				set_variable = { FER_protests_frame = 8 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 39 }
						check_variable = { FER_protests_level < 45 }
					}
				}
				set_variable = { FER_protests_frame = 9 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 44 }
						check_variable = { FER_protests_level < 50 }
					}
				}
				set_variable = { FER_protests_frame = 10 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 49 }
						check_variable = { FER_protests_level < 55 }
					}
				}
				set_variable = { FER_protests_frame = 11 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 54 }
						check_variable = { FER_protests_level < 60 }
					}
				}
				set_variable = { FER_protests_frame = 12 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 59 }
						check_variable = { FER_protests_level < 65 }
					}
				}
				set_variable = { FER_protests_frame = 13 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 64 }
						check_variable = { FER_protests_level < 70 }
					}
				}
				set_variable = { FER_protests_frame = 14 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 69 }
						check_variable = { FER_protests_level < 75 }
					}
				}
				set_variable = { FER_protests_frame = 15 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 74 }
						check_variable = { FER_protests_level < 80 }
					}
				}
				set_variable = { FER_protests_frame = 16 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 79 }
						check_variable = { FER_protests_level < 85 }
					}
				}
				set_variable = { FER_protests_frame = 17 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 84 }
						check_variable = { FER_protests_level < 90 }
					}
				}
				set_variable = { FER_protests_frame = 18 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 89 }
						check_variable = { FER_protests_level < 95 }
					}
				}
				set_variable = { FER_protests_frame = 19 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 94 }
						check_variable = { FER_protests_level < 100 }
					}
				}
				set_variable = { FER_protests_frame = 20 }
			}
			if = {
				limit = {
					AND = {
						check_variable = { FER_protests_level > 99 }
					}
				}
				set_variable = { FER_protests_frame = 21 }
			}

		}

	}
	
	on_weekly_FER = {

		effect = {

			if = {
				limit = {
					NOT = {
						has_country_flag = FER_path_chosen
					}
				}
				random_list = {
					FER_protests_event_frequency = {
						if = {
							limit = {
								check_variable = { FER_protests_event_frequency < 33 }
							}
							random_list = {
								30 = {
									FER = {
										country_event = primorski.31
									}
								}
								40 = {
									FER = {
										country_event = primorski.25
									}
								}
								20 = {
									FER = {
										country_event = primorski.26
									}
								}
								10 = {
									FER = {
										country_event = primorski.27
									}
								}
							}
						}
						if = {
							limit = {
								check_variable = { FER_protests_event_frequency > 33 }
								check_variable = { FER_protests_event_frequency < 66 }
							}
							random_list = {
								20 = {
									FER = {
										country_event = primorski.31
									}
								}
								20 = {
									FER = {
										country_event = primorski.25
									}
								}
								40 = {
									FER = {
										country_event = primorski.26
									}
								}
								20 = {
									FER = {
										country_event = primorski.27
									}
								}
							}
						}
						if = {
							limit = {
								check_variable = { FER_protests_event_frequency > 66 }
							}
							random_list = {
								20 = {
									FER = {
										country_event = primorski.31
									}
								}
								20 = {
									FER = {
										country_event = primorski.25
									}
								}
								30 = {
									FER = {
										country_event = primorski.26
									}
								}
								30 = {
									FER = {
										country_event = primorski.27
									}
								}
							}
						}
					}
					FER_nmth = {
						random_list = {
							50 = {
								FER = {
									country_event = primorski.31
								}
							}
							50 = {

							}
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { FER_protests_level > 100 }
				}
				set_variable = { FER_protests_level = 100 }
				if = {
					limit = {
						NOT = {
							has_completed_focus = FER_start_reforms
						}
					}
					complete_national_focus = FER_start_reforms
					complete_national_focus = FER_request_moscow_help
				}
				if = {
					limit = {
						has_completed_focus = FER_start_reforms
					}
					complete_national_focus = FER_request_moscow_help
				}
			}

		}

	}

	on_weekly = {
	
		effect = {
			every_country = {
			
				if = {
					limit = {
						check_variable = { ROOT.influence_level@THIS > 0 }
					}
					add_to_variable = { ROOT.influence_level@THIS = -0.05 }
				}
				if = {
					limit = {
						check_variable = { ROOT.influence_level@THIS < 0 }
					}
					set_variable = { ROOT.influence_level@THIS = 0 }
				}
				if = {
					limit = {
						check_variable = { ROOT.influence_level@THIS > 10.2 }
					}
					set_variable = { ROOT.influence_level@THIS = 10.2 }
				}
			
			}
			if = {
				limit = {
					FER = {
						NOT = {
							has_country_flag = FER_path_chosen
						}
					}
				}
				add_to_variable = { FER_protests_level = 4 }
			}
			
			if = {
				limit = {
					check_variable = { FER_protests_level < 0 }
				}
				set_variable = { FER_protests_level = 0 }
			}
			
			if = {
				limit = {
					TAG = FER
					has_country_flag = FER_active_stalin_trust_flag
				}
				add_to_variable = { FER_stalin_trust = -2 }
			}
			if = {
				limit = {
					check_variable = { FER_stalin_trust > 100 }
				}
				set_variable = { FER_stalin_trust = 100 }
			}
			if = {
				limit = {
					check_variable = { FER_stalin_trust < 0 }
				}
				set_variable = { FER_stalin_trust = 0 }
			}
			if = {
				limit = {
					TAG = FER
					NOT = {
						has_country_flag = FER_active_stalin_trust_flag
					}
				}
				remove_ideas = FER_stalin_pressure_0_idea
				remove_ideas = FER_stalin_pressure_1_idea
				remove_ideas = FER_stalin_pressure_2_idea
				remove_ideas = FER_stalin_pressure_3_idea
			}
			if = {
				limit = {
					TAG = FER
					has_country_flag = FER_active_stalin_trust_flag
				}
				if = {
					limit = {
						check_variable = { FER_stalin_trust < 25 }
					}
					remove_ideas = FER_stalin_pressure_0_idea
					remove_ideas = FER_stalin_pressure_1_idea
					remove_ideas = FER_stalin_pressure_2_idea
					add_ideas = FER_stalin_pressure_3_idea
				}
				if = {
					limit = {
						check_variable = { FER_stalin_trust > 24 }
						check_variable = { FER_stalin_trust < 50 }
					}
					remove_ideas = FER_stalin_pressure_0_idea
					remove_ideas = FER_stalin_pressure_1_idea
					add_ideas = FER_stalin_pressure_2_idea
					remove_ideas = FER_stalin_pressure_3_idea
				}
				if = {
					limit = {
						check_variable = { FER_stalin_trust > 49 }
						check_variable = { FER_stalin_trust < 75 }
					}
					remove_ideas = FER_stalin_pressure_0_idea
					add_ideas = FER_stalin_pressure_1_idea
					remove_ideas = FER_stalin_pressure_2_idea
					remove_ideas = FER_stalin_pressure_3_idea
				}
				if = {
					limit = {
						check_variable = { FER_stalin_trust > 74 }
					}
					remove_ideas = FER_stalin_pressure_0_idea
					remove_ideas = FER_stalin_pressure_1_idea
					remove_ideas = FER_stalin_pressure_2_idea
					add_ideas = FER_stalin_pressure_3_idea
				}
			}
			
			if = {
				limit = {
					FER = {
						has_completed_focus = FER_nkvd_contact_korean_communists
						NOT = {
							has_completed_focus = FER_help_korean_workers
						}
					}
				}
				add_to_variable = { FER_korea_influence = FER_korea_influence_gain }
			}
			
			if = {
				limit = {
					check_variable = { FER_korea_influence > FER_korea_influence_max }
				}
				set_variable = { FER_korea_influence = FER_korea_influence_max }
			}
			if = {
				limit = {
					check_variable = { FER_korea_influence < 0 }
				}
				set_variable = { FER_korea_influence = 0 }
			}
		
		}
	
	}
	
	on_daily = {
	
		effect = {
		
			every_country = {
				
				if = {
					limit = {
						check_variable = { ROOT.influence_level@THIS < 0 }
						NOT = {
							THIS = {
								gives_military_access_to = ROOT
								has_country_flag = under_influence_of_@ROOT
							}
						}
					}
					set_variable = { ROOT.influence_level@THIS = 0 }
				}
				if = {
					limit = {
						check_variable = { ROOT.influence_level@THIS < 0.2 }
						THIS = {
							gives_military_access_to = ROOT
							has_country_flag = under_influence_of_@ROOT
						}
					}
					set_variable = { ROOT.influence_level@THIS = 0.2 }
				}
				if = {
					limit = {
						check_variable = { ROOT.influence_level@THIS > 10.19 }
					}
					set_variable = { ROOT.influence_level@THIS = 10.2 }
				}
			
			}
			every_country = {
			
				if = {
					limit = {
						check_variable = { ROOT.dependence_level@THIS < 0 }
					}
					set_variable = { ROOT.dependence_level@THIS = 0 }
				}
				if = {
					limit = {
						check_variable = { ROOT.dependence_level@THIS > 10 }
					}
					set_variable = { ROOT.dependence_level@THIS = 10 }
				}
			
			}
		
		}
	
	}

}