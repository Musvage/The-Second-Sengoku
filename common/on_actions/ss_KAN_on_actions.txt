on_actions = {
	
	on_daily_KAN = {
		effect = {
			set_variable = { kan_chrysantemum_court_proportion = 0 }
			if = {
				limit = { has_country_flag = kan_chrysantemum_court }
				set_temp_variable = {  kan_chrysantemum_court_units_total = num_armies }
				add_to_temp_variable = {  kan_chrysantemum_court_units_total = num_ships }
				set_temp_variable = {  kan_chrysantemum_court_units_prince = 0 }
				every_unit_leader  = {
					limit = { has_trait = imperial_prince_unit_leader is_leading_army_group = no }
					add_to_temp_variable = { kan_chrysantemum_court_units_prince = num_units }
					add_to_temp_variable = { kan_chrysantemum_court_units_prince = num_ships }
				}
			}
			log = "kan_chrysantemum_court_units_total [?kan_chrysantemum_court_units_total]" 
			log = "kan_chrysantemum_court_units_prince [?kan_chrysantemum_court_units_prince]" 
			set_variable = { kan_chrysantemum_court_proportion = kan_chrysantemum_court_units_prince }
			divide_variable = {kan_chrysantemum_court_proportion = kan_chrysantemum_court_units_total }
			set_variable = { kan_chrysantemum_court_bonus = kan_chrysantemum_court_proportion }
			multiply_variable = { kan_chrysantemum_court_bonus = 0.20 }
		}
	}
}
