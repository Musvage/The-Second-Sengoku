on_actions = {
	
	on_unit_leader_created = {
		effect = {
			log = "on_unit_leader_created"
			if = {
				limit = {
					FROM = {
						tag = EZO
						NOT = { has_country_flag = stop_random_exiled_general }
					}
				}
				FROM = { set_country_flag = stop_random_exiled_general }
				random_list = {
					100 = { log = "nothing happens, keep generic leader" }	# nothing happens, keep generic leader
					50 = {	# generate generic exiled leader
						log = "generate generic exiled leader"
						# now we check to see if this leader is a general or an admiral
						set_unit_leader_flag = new_unit_leader_flag
						if = {
							limit = {
								FROM = {
									any_army_leader = {	# "reverse search" to check if new leader is general or not
										has_unit_leader_flag = new_unit_leader_flag
									}
								}
							}
							# new leader is a general
							FROM = {
								# create random exiled general
								create_random_exiled_general = yes
								get_random_general_dna = yes # rolls dice for next leader
							}
						} else = {
							# new leader is an admiral
							FROM = {
								create_random_exiled_admiral = yes
								get_random_general_dna = yes # rolls dice for next leader
							}
						}
						if = {
							limit = {	# begone!, random generic general. This bit of code looks clunky but trust me, it's necessary
								FROM = {
									is_ai = no
									any_other_country = { is_ai = yes }
								}
							}
							random_country = {
								limit = { is_ai = yes }	# exile the general to an AI country just so the player won't notice that he would last for an hour
								ROOT = {
									set_nationality = PREV
									unit_leader_event = { id = EZO.999 hours = 1 }
								}
								log = "general sent to [THIS.GetName]!"
							}
							unit_leader_event = { id = EZO.999 hours = 1 }
						}
					}
				}
				FROM = { clr_country_flag = stop_random_exiled_general }
			}
			log = "finish on_unit_leader_created code"
		}
	}
	
	on_startup = {
		effect = {
			EZO = {
				country_lock_all_division_template = yes
				every_state = {
					limit = {
						is_core_of = EZO
					}
					remove_core_of = CZO
					remove_core_of = RZO
					remove_core_of = FZO
					remove_core_of = SZO
					remove_core_of = AZO
					remove_core_of = DZO
					remove_core_of = MZO
				}
			}
		}
	}
	
	on_daily_EZO = {
		effect = {
			every_owned_state = {
				limit = {
					has_state_flag = EZO_player_deal_flag
				}
				add_dynamic_modifier = { modifier = EZO_deals }
				remove_dynamic_modifier = { modifier = EZO_rebels }
			}
			every_owned_state = {
				limit = {
					has_state_flag = EZO_player_revolt_flag
				}
				remove_dynamic_modifier = { modifier = EZO_deals }
				add_dynamic_modifier = { modifier = EZO_rebels }
			}
		}
	}
}
