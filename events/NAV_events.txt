#####################
# Navigators Events #
#####################

# these are events for the interactions between HIR, PRT and KYU

add_namespace = navigator

# Diplomatic Overtures, Offer
country_event = {
	id = navigator.1
	title = navigator.1.t
	desc = navigator.1.d
	picture = GFX_report_news_kyushu_map

	is_triggered_only = yes 
	
	option = {
		name = navigator.1.a	# accept (complete focus)
		if = {
			limit = { has_focus_tree = HIR_focus_tree }
			if = { limit = { FROM = { tag = PRT } }
				unlock_national_focus = HIR_NAV_befriend_PRT
				add_opinion_modifier = {
					target = PRT
					modifier = NAV_diplomatic_overture_opinion
				}
			}
			if = { limit = { FROM = { tag = KYU } }
				unlock_national_focus = HIR_NAV_befriend_KYU
				add_opinion_modifier = {
					target = KYU
					modifier = NAV_diplomatic_overture_opinion
				}
			}
		} if = {
			limit = { has_focus_tree = PRT_focus_tree }
			if = { limit = { FROM = { tag = HIR } }
				unlock_national_focus = PRT_NAV_befriend_HIR
				add_opinion_modifier = {
					target = HIR
					modifier = NAV_diplomatic_overture_opinion
				}
			}
			if = { limit = { FROM = { tag = KYU } }
				unlock_national_focus = PRT_NAV_befriend_KYU
				add_opinion_modifier = {
					target = KYU
					modifier = NAV_diplomatic_overture_opinion
				}
			}
		} if = {
			limit = { has_focus_tree = KYU_focus_tree }
			if = { limit = { FROM = { tag = HIR } }
				#unlock_national_focus = KYU_NAV_befriend_HIR
				add_ideas = NAV_diplomatic_overture_HIR_spirit
				give_guarantee = HIR
				add_opinion_modifier = {
					target = HIR
					modifier = NAV_diplomatic_overture_opinion
				}
			}
			if = { limit = { FROM = { tag = PRT } }
				#unlock_national_focus = KYU_NAV_befriend_PRT
				add_ideas = NAV_diplomatic_overture_PRT_spirit
				give_guarantee = PRT
				add_opinion_modifier = {
					target = PRT
					modifier = NAV_diplomatic_overture_opinion
				}
			}
		}
		FROM = { country_event = navigator.2 }
	}
	option = {
		name = navigator.1.b	# refuse (block focus)
		hidden_effect = {
			if = {  limit = { tag = PRT } FROM = { set_country_flag = reject_overture_from_PRT } }
			if = {  limit = { tag = HIR } FROM = { set_country_flag = reject_overture_from_HIR } }
			if = {  limit = { tag = KYU } FROM = { set_country_flag = reject_overture_from_KYU } }
		}
		FROM = {
			country_event = navigator.3
			add_opinion_modifier = {
				target = ROOT
				modifier = NAV_diplomatic_overture_rejected_opinion
			}
		}
	}
}

# Diplomatic Overtures, Accept
country_event = {
	id = navigator.2
	title = navigator.2.t
	desc = navigator.2.d
	picture = GFX_report_news_kyushu_map
	
	is_triggered_only = yes 
	
	option = {
		name = navigator.2.a
		if = {
			limit = { has_focus_tree = HIR_focus_tree }
			if = { limit = { FROM = { tag = PRT } } unlock_national_focus = HIR_NAV_befriend_PRT }
			if = { limit = { FROM = { tag = KYU } }
				unlock_national_focus = HIR_NAV_befriend_KYU
				effect_tooltip = {
					KYU = {
						add_ideas = NAV_diplomatic_overture_HIR_spirit
						give_guarantee = HIR
						add_opinion_modifier = {
							target = HIR
							modifier = NAV_diplomatic_overture_opinion
						}
					}
				}
			}
		} if = {
			limit = { has_focus_tree = PRT_focus_tree }
			if = { limit = { FROM = { tag = HIR } } unlock_national_focus = PRT_NAV_befriend_HIR }
			if = { limit = { FROM = { tag = KYU } }
				unlock_national_focus = PRT_NAV_befriend_KYU
				effect_tooltip = {
					KYU = {
						add_ideas = NAV_diplomatic_overture_PRT_spirit
						give_guarantee = PRT
						add_opinion_modifier = {
							target = PRT
							modifier = NAV_diplomatic_overture_opinion
						}
					}
				}
			}
		} if = {
			limit = { has_focus_tree = KYU_focus_tree }
			#if = { limit = { FROM = { tag = HIR } } unlock_national_focus = KYU_NAV_befriend_HIR }
			#if = { limit = { FROM = { tag = PRT } } unlock_national_focus = KYU_NAV_befriend_PRT }
		}
	}
}
	
# Diplomatic Overtures, Refused
country_event = {
	id = navigator.3
	title = navigator.3.t
	desc = navigator.3.d
	picture = GFX_report_news_kyushu_map
	
	is_triggered_only = yes 
	
	option = {
		name = navigator.3.a
		if = {
			limit = { has_focus_tree = HIR_focus_tree }
			if = { limit = { FROM = { tag = PRT } } uncomplete_national_focus = { focus = HIR_NAV_befriend_PRT } }
			if = { limit = { FROM = { tag = KYU } } uncomplete_national_focus = { focus = HIR_NAV_befriend_KYU } }
		}
		if = {
			limit = { has_focus_tree = PRT_focus_tree }
			if = { limit = { FROM = { tag = HIR } } uncomplete_national_focus = { focus = PRT_NAV_befriend_HIR } }
			if = { limit = { FROM = { tag = KYU } } uncomplete_national_focus = { focus = PRT_NAV_befriend_KYU } }
		}
		if = {
			limit = { has_focus_tree = KYU_focus_tree }
			#if = { limit = { FROM = { tag = HIR } } uncomplete_national_focus = { focus = KYU_NAV_befriend_HIR } }
			#if = { limit = { FROM = { tag = PRT } } uncomplete_national_focus = { focus = KYU_NAV_befriend_PRT } }
		}
		effect_tooltip = {
			add_opinion_modifier = {
				target = ROOT
				modifier = NAV_diplomatic_overture_rejected_opinion
			}
		}
	}
}

# Denounce to LoN
country_event = {
	id = navigator.4
	title = navigator.4.t
	desc = navigator.4.d
	picture = GFX_report_news_kyushu_map
	
	is_triggered_only = yes 
	
	option = {
		trigger = { tag = ROOT }
		name = navigator.4.a
		effect_tooltip = { add_timed_idea = { idea = NAV_denounced_lon_spirit days = 180 } }
	}
	option = {
		trigger = { NOT = { tag = ROOT } }
		name = navigator.4.a
		effect_tooltip = { ROOT = { add_timed_idea = { idea = NAV_denounced_lon_spirit days = 180 } } }
	}
}

# Pirates!
country_event = {
	id = navigator.5
	title = navigator.5.t
	desc = navigator.5.d
	picture = GFX_report_news_kyushu_map
	
	is_triggered_only = yes 
	
	option = {
		trigger = { tag = ROOT }
		name = navigator.5.a
		effect_tooltip = { add_timed_idea = { idea = NAV_pirate_problem_spirit days = 180 } }
	}
	option = {
		trigger = { NOT = { tag = ROOT } }
		name = navigator.5.a
		effect_tooltip = { ROOT = { add_timed_idea = { idea = NAV_pirate_problem_spirit days = 180 } } }
	}
}