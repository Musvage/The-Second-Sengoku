add_namespace = portuguese
add_namespace = PRT_foreign_influence

# PRT monarchist coup
news_event = {
    id = portuguese.1
	title = portuguese.1.t
	desc = portuguese.1.d
	picture = GFX_news_event_por_return_of_monarchy
	
	major = yes
	
	is_triggered_only = yes
	
	option = {	# GOOD
		name = portuguese.1.a
		trigger = { OR = { has_government = autocracy has_government = fascism } }
		effect_tooltip = {
			PRT = {
				set_politics = { ruling_party = autocracy elections_allowed = no }
				if = { limit = { autocracy < 0.3 } add_stability = -0.15 }
				else_if = { limit = { autocracy < 0.4 } add_stability = -0.10 }
				else_if = { limit = { autocracy < 0.5 } add_stability = -0.05}
			}
		}
	}
	option = {	# NEUTRAL
		name = portuguese.1.b
		trigger = { OR = { has_government = democratic has_government = neutrality } }
		add_political_power = 999
		effect_tooltip = {
			PRT = {
				set_politics = { ruling_party = autocracy elections_allowed = no }
				if = { limit = { autocracy < 0.3 } add_stability = -0.15 }
				else_if = { limit = { autocracy < 0.4 } add_stability = -0.10 }
				else_if = { limit = { autocracy < 0.5 } add_stability = -0.05}
			}
		}
	}
	option = {	# BAD
		name = portuguese.1.c
		trigger = { OR = { has_government = communism has_government = democratic_socialism } }
		effect_tooltip = {
			PRT = {
				set_politics = { ruling_party = autocracy elections_allowed = no }
				if = { limit = { autocracy < 0.3 } add_stability = -0.15 }
				else_if = { limit = { autocracy < 0.4 } add_stability = -0.10 }
				else_if = { limit = { autocracy < 0.5 } add_stability = -0.05}
			}
		}
	}
}

# PRT fascist coup
news_event = {
    id = portuguese.2
	title = portuguese.2.t
	desc = portuguese.2.d
	picture = GFX_news_portugal_fascism
	
	major = yes
	
	is_triggered_only = yes
	
	option = {	# GOOD
		name = portuguese.2.a
		trigger = { OR = { has_government = autocracy has_government = fascism } }
		effect_tooltip = {
			PRT = {
				set_politics = { ruling_party = fascism elections_allowed = no }
				if = { limit = { fascism < 0.3 } add_stability = -0.15 }
				else_if = { limit = { fascism < 0.4 } add_stability = -0.10 }
				else_if = { limit = { fascism < 0.5 } add_stability = -0.05}
			}
		}
	}
	option = {	# NEUTRAL
		name = portuguese.2.b
		trigger = { OR = { has_government = democratic has_government = neutrality } }
		effect_tooltip = {
			PRT = {
				set_politics = { ruling_party = fascism elections_allowed = no }
				if = { limit = { fascism < 0.3 } add_stability = -0.15 }
				else_if = { limit = { fascism < 0.4 } add_stability = -0.10 }
				else_if = { limit = { fascism < 0.5 } add_stability = -0.05}
			}
		}
	}
	option = {	# BAD
		name = portuguese.2.c
		trigger = { OR = { has_government = communism has_government = democratic_socialism } }
		effect_tooltip = {
			PRT = {
				set_politics = { ruling_party = fascism elections_allowed = no }
				if = { limit = { fascism < 0.3 } add_stability = -0.15 }
				else_if = { limit = { fascism < 0.4 } add_stability = -0.10 }
				else_if = { limit = { fascism < 0.5 } add_stability = -0.05}
			}
		}
	}
}

# The Devolution of Macau (ROC event)
country_event = {
    id = portuguese.2222
	title = portuguese.1.t
	desc = portuguese.1.d
	picture = GFX_report_news_macau

	is_triggered_only = yes

	option = {	# ACCEPT
		name =  portuguese.1.a
		custom_effect_tooltip = portuguese.1.tt
		set_global_flag = world_stage_devolution_of_macau
		PRT = {
			remove_ideas = PRT_inequal_treaty_macau_spirit
			add_named_threat = { threat = -0.5 name = PRT_threat_macau }
		}
		hidden_effect = { remove_opinion_modifier = { target = PRT modifier = ROC_holds_macau } add_offsite_building = { type = industrial_complex level = -1 } }
		ai_chance = {
			base = 100
		}
	}
	option = {	# REFUSE
		name =  portuguese.1.b
		if = { limit = { has_government = democratic } add_popularity = { ideology = democratic popularity = -0.1 } }
		if = { limit = { has_government = democratic_socialism } add_popularity = { ideology = democratic_socialism popularity = -0.1 } }
		if = { limit = { has_government = communism } add_popularity = { ideology = communism popularity = -0.1 } }
		if = { limit = { has_government = neutrality } add_popularity = { ideology = neutrality popularity = -0.1 } }
		if = { limit = { has_government = autocracy } add_popularity = { ideology = autocracy popularity = -0.1 } }
		if = { limit = { has_government = fascism } add_popularity = { ideology = fascism popularity = -0.1 } }
		ai_chance = {
			base = 0
		}
	}
}
	
	
### OLD 
### OLD 
### OLD 
### OLD 
	
add_namespace = PRT_foreign_influence # for countries affecting OSA

country_event = {
    id = PRT_foreign_influence.1
	title = PRT_foreign_influence.1.t
	desc = PRT_foreign_influence.1.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	fire_only_once = no

	option = {
		ai_chance = {
			base = 100
		}
		name="A fellow brother shall never be turned down!"
		custom_effect_tooltip = "If both countries are not in a faction, then a faction will be created. Upon creation, both countries will join. The country who iniated the invitation will be the faction leader."
		PRT = {
            diplomatic_relation = {
                country = KOB
                relation = non_aggression_pact
            }
        }
        KOB = {
            diplomatic_relation = {
                country = PRT
                relation = non_aggression_pact
            }
            country_event = KOB_foreign_influence.2
        }
	}

    option = {
		ai_chance = {
			base = 0
		}
        name = "We shall not be apart of their affairs."
        KOB = {
            country_event = KOB_foreign_influence.1
        }
    }
}

 country_event = {
    id = PRT_foreign_influence.2
	title = PRT_foreign_influence.2.t
	desc = PRT_foreign_influence.2.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	option = {
		ai_chance = {
			base = 0
		}
		name="We shall not be apart of their affairs."
		KOB = { country_event = KOB_foreign_influence.3 }
	}

	option = {
		ai_chance = {
			base = 100
		}
		name="Perhaps, this could be a new beginning of a long lasting friendship"
		KOB = { country_event = KOB_foreign_influence.4 }
		PRT = {
			diplomatic_relation = {
				country = KOB
				relation = docking_rights
			}
			give_guarantee = KOB
		}
		KOB = {
			diplomatic_relation = {
				country = PRT
				relation = docking_rights
			}
			give_guarantee = PRT
		}
	}
}
